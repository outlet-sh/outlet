import"../chunks/DsnmJJEf.js";import{f as O,p as Pt,s as h,a as kt,u as Bt,b as r,i as t,d as Et,e as Ut,h as i,c as s,g as jt,r as a,n as j,t as P,j as Nt}from"../chunks/odI--4Kw.js";import{d as Ot,s as b}from"../chunks/BNMK9zrr.js";import{c as Z,a as n,f as u,t as X}from"../chunks/CCInJaqd.js";import{l as At,s as Dt,i as N}from"../chunks/COaB7F5h.js";import{e as Ft,i as It}from"../chunks/BohEjZuL.js";import{h as Vt}from"../chunks/hUjpWz_l.js";import{l as Tt,ab as qt,R as Ht}from"../chunks/MOXZsotB.js";import{a as Rt,s as Wt,M as Gt,B as Jt,l as Kt,A as Qt,I as Xt,C as Y}from"../chunks/B2E-c0C9.js";import{L as Yt}from"../chunks/D716f0vp.js";import{S as Zt}from"../chunks/DmKCzuEX.js";import{B as lt}from"../chunks/BD7k7D4N.js";import"../chunks/B9hjHVe6.js";function te(J,H){const A=At(H,["children","$$slots","$$events","$$legacy"]);const v=[["path",{d:"M10 12h4"}],["path",{d:"M10 8h4"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16"}]];Rt(J,Dt({name:"building-2"},()=>A,{get iconNode(){return v},children:($,D)=>{var w=Z(),k=O(w);Wt(k,H,"default",{}),n($,w)},$$slots:{default:!0}}))}var ee=u("<p> </p>"),ae=u('<div class="text-center py-12"><!> <h3 class="mt-2 text-sm font-medium text-text">No brands</h3> <p class="mt-1 text-sm text-text-muted">No brands found. Create a brand to get started.</p></div>'),se=u('<span class="text-sm text-text-muted">Loading...</span>'),re=u('<span class="text-sm font-medium text-text"> </span> <span class="text-sm text-text-muted">/</span> <!>',1),ne=u('<button type="button" class="w-full flex items-center justify-between py-4 first:pt-0 last:pb-0 hover:bg-surface-secondary transition-colors cursor-pointer text-left -mx-4 px-4 first:-mt-4 first:pt-4 last:-mb-4 last:pb-4 rounded-lg"><div class="flex items-center gap-3"><div class="h-10 w-10 rounded-full bg-primary flex items-center justify-center"><span class="text-sm font-medium text-white"> </span></div> <div><div class="flex items-center gap-2"><span class="font-medium text-text"> </span> <!></div> <p class="text-sm text-text-muted"> </p></div></div> <div class="text-right"><div class="flex items-center gap-2"><!></div> <p class="text-xs text-text-muted">Contacts</p></div></button>'),oe=u('<div class="divide-y divide-border"></div>'),ie=u(`<div class="p-4 bg-surface-secondary rounded-lg"><h3 class="text-sm font-medium text-text mb-2">About Contact Limits</h3> <p class="text-sm text-text-muted">Contact limits control how many contacts each brand can store.
					Setting a limit to 0 or leaving it empty means unlimited contacts.
					When a brand reaches its limit, new contact imports will be blocked.</p></div>`),le=u("<!> <!>",1),de=u('<div class="flex justify-end gap-3"><!> <!></div>'),ce=u('<div><label for="edit-max-contacts" class="form-label">Maximum Contacts</label> <!> <p class="mt-1 text-xs text-text-muted"> </p></div>'),ue=u('<div class="space-y-4"><div><p class="text-sm text-text-muted mb-4">Configure the maximum number of contacts for <strong> </strong>.</p></div> <div class="flex items-center justify-between p-3 bg-surface-secondary rounded-lg"><div><span class="text-sm font-medium text-text">Unlimited contacts</span> <p class="text-xs text-text-muted">No limit on the number of contacts</p></div> <!></div> <!></div>'),ve=u('<div class="space-y-6"><div class="flex justify-between items-center"><p class="text-sm text-text-secondary">Manage limits and quotas for all brands</p></div> <!> <!></div> <!>',1);function ze(J,H){Pt(H,!0);let A=h(!0),v=h(kt([])),$=h(""),D=h(!1),w=h(!1),k=h(!1),C=h(null),R=h(0),F=h(!1);Bt(()=>{tt()});async function tt(){r(A,!0),r($,"");try{const e=await Tt();r(v,(e.organizations||[]).map(o=>({...o,loading_stats:!0})),!0),await Promise.all(t(v).map(async(o,l)=>{try{const d=await qt({},o.id);t(v)[l]={...t(v)[l],current_contacts:d.total_subscribers,loading_stats:!1}}catch{t(v)[l]={...t(v)[l],loading_stats:!1}}}))}catch(e){console.error("Failed to load organizations:",e),r($,"Failed to load brands")}finally{r(A,!1)}}function dt(e){r(C,e,!0),r(R,e.max_contacts||0,!0),r(F,e.max_contacts===0),r(D,!0)}function et(){r(D,!1),r(C,null)}async function ct(){if(t(C)){r(w,!0),r(k,!1),r($,"");try{const e=t(F)?0:t(R);await Ht({},{max_contacts:e},t(C).id),r(k,!0),setTimeout(()=>{r(k,!1),et()},1500),await tt()}catch(e){console.error("Failed to update brand:",e),r($,e.message||"Failed to update brand",!0)}finally{r(w,!1)}}}function ut(e){return e===0?"Unlimited":e.toLocaleString()}function vt(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}function mt(e,o){if(o===0||e===void 0)return"default";const l=e/o*100;return l>=90?"error":l>=75?"warning":"success"}var at=ve();Vt("d1dcfh",e=>{Ut(()=>{jt.title="Brands - Outlet"})});var K=O(at),st=i(s(K),2);{var ft=e=>{Qt(e,{type:"error",title:"Error",children:(o,l)=>{var d=ee(),M=s(d,!0);a(d),P(()=>b(M,t($))),n(o,d)},$$slots:{default:!0}})};N(st,e=>{t($)&&e(ft)})}var pt=i(st,2);{var _t=e=>{Yt(e,{size:"large"})},xt=e=>{var o=Z(),l=O(o);{var d=m=>{Y(m,{children:(p,_)=>{var x=ae(),y=s(x);te(y,{class:"mx-auto h-12 w-12 text-text-muted"}),j(4),a(x),n(p,x)},$$slots:{default:!0}})},M=m=>{var p=le(),_=O(p);Y(_,{children:(y,W)=>{var S=oe();Ft(S,21,()=>t(v),It,(I,c)=>{var B=ne();B.__click=()=>dt(t(c));var V=s(B),g=s(V),E=s(g),G=s(E,!0);a(E),a(g);var T=i(g,2),q=s(T),z=s(q),ht=s(z,!0);a(z);var bt=i(z,2);lt(bt,{variant:"default",size:"sm",children:(f,L)=>{j();var U=X();P(()=>b(U,t(c).slug)),n(f,U)},$$slots:{default:!0}}),a(q);var rt=i(q,2),$t=s(rt);a(rt),a(T),a(V);var nt=i(V,2),ot=s(nt),yt=s(ot);{var wt=f=>{var L=se();n(f,L)},Ct=f=>{var L=re(),U=O(L),Mt=s(U,!0);a(U);var St=i(U,4);{let Q=Nt(()=>mt(t(c).current_contacts,t(c).max_contacts));lt(St,{get variant(){return t(Q)},size:"sm",children:(zt,me)=>{j();var it=X();P(Lt=>b(it,Lt),[()=>ut(t(c).max_contacts)]),n(zt,it)},$$slots:{default:!0}})}P(Q=>b(Mt,Q),[()=>t(c).current_contacts?.toLocaleString()??"â€”"]),n(f,L)};N(yt,f=>{t(c).loading_stats?f(wt):f(Ct,!1)})}a(ot),j(2),a(nt),a(B),P((f,L)=>{b(G,f),b(ht,t(c).name),b($t,`Created ${L??""}`)},[()=>t(c).name[0].toUpperCase(),()=>vt(t(c).created_at)]),n(I,B)}),a(S),n(y,S)},$$slots:{default:!0}});var x=i(_,2);Y(x,{children:(y,W)=>{var S=ie();n(y,S)},$$slots:{default:!0}}),n(m,p)};N(l,m=>{t(v).length===0?m(d):m(M,!1)},!0)}n(e,o)};N(pt,e=>{t(A)?e(_t):e(xt,!1)})}a(K);var gt=i(K,2);Gt(gt,{title:"Edit Contact Limit",get show(){return t(D)},set show(o){r(D,o,!0)},footer:o=>{var l=de(),d=s(l);Jt(d,{type:"secondary",onclick:et,get disabled(){return t(w)},children:(m,p)=>{j();var _=X("Cancel");n(m,_)},$$slots:{default:!0}});var M=i(d,2);Zt(M,{label:"Save Changes",get saving(){return t(w)},get saved(){return t(k)},onclick:ct}),a(l),n(o,l)},children:(o,l)=>{var d=Z(),M=O(d);{var m=p=>{var _=ue(),x=s(_),y=s(x),W=i(s(y)),S=s(W,!0);a(W),j(),a(y),a(x);var I=i(x,2),c=i(s(I),2);Kt(c,{get checked(){return t(F)},set checked(g){r(F,g,!0)}}),a(I);var B=i(I,2);{var V=g=>{var E=ce(),G=i(s(E),2);Xt(G,{id:"edit-max-contacts",type:"number",min:1,placeholder:"Enter max contacts (e.g., 10000)",get value(){return t(R)},set value(z){r(R,z,!0)}});var T=i(G,2),q=s(T);a(T),a(E),P(z=>b(q,`Current usage: ${z??""} contacts`),[()=>t(C).current_contacts?.toLocaleString()??"Unknown"]),n(g,E)};N(B,g=>{t(F)||g(V)})}a(_),P(()=>b(S,t(C).name)),n(p,_)};N(M,p=>{t(C)&&p(m)})}n(o,d)},$$slots:{footer:!0,default:!0}}),n(J,at),Et()}Ot(["click"]);export{ze as component};
