import"../chunks/DsnmJJEf.js";import{p as $e,a as te,s as x,u as ke,b as r,f as ae,d as Be,e as Ce,$ as Oe,g as Pe,c as t,h as s,i as a,r as e,t as z,n as T,j as ze}from"../chunks/odI--4Kw.js";import{d as Se,e as Ue,s as b}from"../chunks/BNMK9zrr.js";import{s as je}from"../chunks/C07Dfx-t.js";import{i as J}from"../chunks/COaB7F5h.js";import{s as Ae,e as Le,i as Me}from"../chunks/BohEjZuL.js";import{a as l,f as g,t as K}from"../chunks/CCInJaqd.js";import{h as Ie}from"../chunks/hUjpWz_l.js";import{g as re}from"../chunks/D0Hc16L8.js";import{g as Ne,l as Fe}from"../chunks/CuiFJ7Vr.js";import{A as Re}from"../chunks/CgasH4Ck.js";import{l as Te,c as Ee}from"../chunks/DiRzRdok.js";import{M as Ge,I as se,A as qe,B as oe}from"../chunks/nXjfFSP3.js";import{C as De}from"../chunks/B8NH692Y.js";import{P as He}from"../chunks/yphMO-fJ.js";import{S as Je}from"../chunks/tT2wwfOA.js";var Ke=g('<meta name="robots" content="noindex, nofollow"/>'),Qe=g('<button class="w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100"><span class="flex items-center justify-center h-8 w-8 rounded-md text-xs font-semibold text-white bg-primary flex-shrink-0"> </span> <span class="flex-1 text-sm font-medium text-text truncate"> </span></button>'),Ve=g('<div class="absolute right-0 top-full mt-2 w-64 rounded-lg shadow-lg py-1 z-50 bg-white border border-base-200"><div class="px-3 py-2 border-b border-border"><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Brands</p></div> <div class="max-h-64 overflow-y-auto"></div> <div class="border-t border-border mt-1 pt-1"><button class="w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100 text-text-muted hover:text-text"><span class="flex items-center justify-center h-8 w-8 rounded-md border-2 border-dashed border-base-300 flex-shrink-0"><!></span> <span class="text-sm">Add brand</span></button></div></div>'),We=g('<div class="absolute right-0 z-50 mt-2 w-56 origin-top-right rounded-lg py-1 bg-white border border-base-200 shadow-lg" role="menu" aria-orientation="vertical"><div class="px-4 py-3 border-b border-border"><p class="text-sm font-medium text-text truncate"> </p> <p class="text-xs text-text-muted capitalize"> </p></div> <a href="/settings" class="flex items-center gap-2 px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900" role="menuitem"><!> Settings</a> <div class="border-t border-border my-1"></div> <button class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900 w-full text-left" role="menuitem">Sign out</button></div>'),Xe=g('<div class="min-h-screen bg-base-50"><nav class="border-b border-base-200 bg-white"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><div class="flex h-16 justify-between"><div class="flex items-center"><a href="/" class="text-xl font-bold text-primary">Outlet</a></div> <div class="flex items-center space-x-4"><div class="brand-switcher relative"><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors hover:bg-base-100 group"><span class="font-medium text-sm">Brands</span> <!></button> <!></div> <div class="user-menu-container relative ml-3"><div><button class="flex items-center rounded-full text-sm transition-colors focus:outline-none" aria-haspopup="true"><span class="sr-only">Open user menu</span> <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary text-white"><span class="text-sm font-medium text-white"> </span></div></button></div> <!></div></div></div></div></nav> <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><!></main></div>'),Ye=g("<!> <!>",1),Ze=g('<div class="space-y-4"><!> <div><label for="brand-name" class="block text-sm font-medium text-text mb-1">Brand Name</label> <!></div> <div><label for="brand-slug" class="block text-sm font-medium text-text mb-1">URL Slug</label> <!> <p class="text-xs text-text-muted mt-1"> </p></div></div>'),et=g("<!> <!>",1);function bt(ne,Q){$e(Q,!0);let S=te(Ne()),_=x(!1),V=x(te([])),h=x(!1),U=x(!1),w=x(""),m=x(""),j=x(!1),A=x("");ke(()=>{ie()});async function ie(){try{const o=await Te();r(V,o.organizations||[],!0)}catch(o){console.error("Failed to load organizations:",o)}}function le(){Fe()}function de(o){const i=o.target;i.closest(".user-menu-container")||r(_,!1),i.closest(".brand-switcher")||r(h,!1)}function ce(o){r(h,!1),re(`/${o}`)}function ue(o){return o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}function ve(){r(m,ue(a(w)),!0)}function me(){r(h,!1),r(w,""),r(m,""),r(A,""),r(U,!0)}async function pe(){if(!(!a(w).trim()||!a(m).trim())){r(j,!0),r(A,"");try{const o=await Ee({name:a(w).trim(),slug:a(m).trim()});r(U,!1),re(`/${o.slug}/welcome`)}catch(o){r(A,o.message||"Failed to create brand",!0)}finally{r(j,!1)}}}var W=et();Ue("click",Oe,de),Ie("osdhk3",o=>{var i=Ke();Ce(()=>{Pe.title="Outlet"}),l(o,i)});var X=ae(W);Re(X,{children:(o,i)=>{var y=Xe(),d=t(y),$=t(d),p=t($),v=s(t(p),2),f=t(v),c=t(f);c.__click=n=>{n.stopPropagation(),r(_,!1),r(h,!a(h))};var E=s(t(c),2);De(E,{class:"h-4 w-4 text-text-muted group-hover:text-text transition-colors"}),e(c);var G=s(c,2);{var q=n=>{var k=Ve(),B=s(t(k),2);Le(B,21,()=>a(V),Me,(O,R)=>{var P=Qe();P.__click=()=>ce(a(R).slug);var H=t(P),he=t(H,!0);e(H);var ee=s(H,2),we=t(ee,!0);e(ee),e(P),z(ye=>{b(he,ye),b(we,a(R).name)},[()=>a(R).name[0].toUpperCase()]),l(O,P)}),e(B);var C=s(B,2),N=t(C);N.__click=me;var F=t(N),D=t(F);He(D,{class:"h-4 w-4"}),e(F),T(2),e(N),e(C),e(k),l(n,k)};J(G,n=>{a(h)&&n(q)})}e(f);var u=s(f,2),L=t(u),M=t(L);M.__click=n=>{n.stopPropagation(),r(h,!1),r(_,!a(_))};var I=s(t(M),2),Y=t(I),xe=t(Y,!0);e(Y),e(I),e(M),e(L);var be=s(L,2);{var ge=n=>{var k=We(),B=t(k),C=t(B),N=t(C,!0);e(C);var F=s(C,2),D=t(F,!0);e(F),e(B);var O=s(B,2);O.__click=()=>r(_,!1);var R=t(O);Je(R,{class:"h-4 w-4"}),T(),e(O);var P=s(O,4);P.__click=le,e(k),z(()=>{b(N,S?.name||S?.email),b(D,S?.role)}),l(n,k)};J(be,n=>{a(_)&&n(ge)})}e(u),e(v),e(p),e($),e(d);var Z=s(d,2),_e=t(Z);je(_e,()=>Q.children),e(Z),e(y),z(n=>{Ae(M,"aria-expanded",a(_)),b(xe,n)},[()=>(S?.name||S?.email||"U")[0].toUpperCase()]),l(o,y)},$$slots:{default:!0}});var fe=s(X,2);Ge(fe,{title:"Create Brand",get show(){return a(U)},set show(i){r(U,i,!0)},footer:i=>{var y=Ye(),d=ae(y);oe(d,{type:"secondary",onclick:()=>r(U,!1),get disabled(){return a(j)},children:(p,v)=>{T();var f=K("Cancel");l(p,f)},$$slots:{default:!0}});var $=s(d,2);{let p=ze(()=>!a(w).trim()||!a(m).trim()||a(j));oe($,{type:"primary",onclick:pe,get disabled(){return a(p)},children:(v,f)=>{T();var c=K();z(()=>b(c,a(j)?"Creating...":"Create Brand")),l(v,c)},$$slots:{default:!0}})}l(i,y)},children:(i,y)=>{var d=Ze(),$=t(d);{var p=u=>{qe(u,{type:"error",children:(L,M)=>{T();var I=K();z(()=>b(I,a(A))),l(L,I)},$$slots:{default:!0}})};J($,u=>{a(A)&&u(p)})}var v=s($,2),f=s(t(v),2);se(f,{id:"brand-name",oninput:ve,placeholder:"My Company",get value(){return a(w)},set value(u){r(w,u,!0)}}),e(v);var c=s(v,2),E=s(t(c),2);se(E,{id:"brand-slug",placeholder:"my-company",get value(){return a(m)},set value(u){r(m,u,!0)}});var G=s(E,2),q=t(G);e(G),e(c),e(d),z(()=>b(q,`This will be used in the URL: /${(a(m)||"my-company")??""}`)),l(i,d)},$$slots:{footer:!0,default:!0}}),l(ne,W),Be()}Se(["click"]);export{bt as component};
