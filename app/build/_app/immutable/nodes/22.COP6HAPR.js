import"../chunks/DsnmJJEf.js";import{p as xt,u as _t,b as u,f as B,d as ht,s as Y,e as gt,g as bt,i as r,h as t,c as e,r as a,t as b,n as I,j as $t}from"../chunks/odI--4Kw.js";import{s as c}from"../chunks/BNMK9zrr.js";import{a as s,f as i,t as J,c as yt}from"../chunks/CCInJaqd.js";import{i as w}from"../chunks/COaB7F5h.js";import{h as wt}from"../chunks/hUjpWz_l.js";import{b as kt,d as Ct}from"../chunks/DsZuZzfy.js";import{A as Ut,C as K,B as rt,b as Pt}from"../chunks/D_7vKuD1.js";import{L as jt}from"../chunks/D716f0vp.js";import{B as Q}from"../chunks/BD7k7D4N.js";import{R as Dt}from"../chunks/CQ1n2zyf.js";import{C as It}from"../chunks/BG0OWad_.js";import{D as Rt}from"../chunks/loaIUK6d.js";var Ft=i("<p> </p>"),Bt=i('<div class="mb-6"><!></div>'),St=i('<div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-text-muted">Version</span> <!></div> <div class="flex items-center justify-between"><span class="text-sm text-text-muted">Commit</span> <code class="text-sm font-mono text-text"> </code></div> <div class="flex items-center justify-between"><span class="text-sm text-text-muted">Build Date</span> <span class="text-sm text-text"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-text-muted">Go Version</span> <span class="text-sm text-text"> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-text-muted">Platform</span> <span class="text-sm text-text"> </span></div></div>'),Vt=i('<h2 class="text-lg font-medium text-text mb-4">Current Version</h2> <!>',1),At=i("<!> ",1),Lt=i('<p class="text-sm text-text-muted mt-2"> </p>'),Ot=i(`<div class="mt-4"><h4 class="text-sm font-medium text-text mb-2">What's New</h4> <div class="text-sm text-text-muted bg-bg-secondary rounded p-3 whitespace-pre-wrap"> </div></div>`),Gt=i("<!> Download Update",1),Yt=i('<div class="mt-4"><!></div>'),zt=i(`<div class="bg-primary/10 border border-primary/20 rounded-lg p-4"><div class="flex items-start gap-3"><!> <div class="flex-1"><h3 class="font-medium text-text">Update Available</h3> <p class="text-sm text-text-muted mt-1">A new version <!> is available.
									You are currently running <!>.</p> <!> <!> <!> <div class="mt-4 text-sm text-text-muted"><p>To update via CLI, run:</p> <code class="block bg-bg-secondary rounded p-2 mt-1 font-mono">outlet update</code></div></div></div></div>`),Et=i(`<div class="bg-green-500/10 border border-green-500/20 rounded-lg p-4"><div class="flex items-center gap-3"><!> <div><h3 class="font-medium text-text">You're up to date!</h3> <p class="text-sm text-text-muted mt-1"> </p></div></div></div>`),Ht=i('<div class="text-center py-8 text-text-muted"><p>Click "Check for Updates" to see if a new version is available.</p></div>'),Mt=i('<div class="flex items-center justify-between mb-4"><h2 class="text-lg font-medium text-text">Update Status</h2> <!></div> <!>',1),Nt=i('<h2 class="text-lg font-medium text-text mb-4">Update Instructions</h2> <div class="space-y-4 text-sm text-text-muted"><div><h3 class="font-medium text-text mb-2">CLI Update (Recommended)</h3> <p>Run the update command to automatically download and install the latest version:</p> <code class="block bg-bg-secondary rounded p-3 mt-2 font-mono">outlet update</code> <p class="mt-2 text-xs">Use <code class="bg-bg-secondary px-1 rounded">--check</code> to check without installing.</p></div> <div><h3 class="font-medium text-text mb-2">Docker Update</h3> <p>If running via Docker, pull the latest image:</p> <code class="block bg-bg-secondary rounded p-3 mt-2 font-mono">docker pull ghcr.io/localrivet/outlet:latest</code></div> <div><h3 class="font-medium text-text mb-2">Manual Update</h3> <ol class="list-decimal list-inside space-y-1"><li>Download the latest release from <a href="https://github.com/localrivet/outlet/releases" target="_blank" class="text-primary hover:underline">GitHub Releases</a></li> <li>Stop the current Outlet instance</li> <li>Replace the binary with the new version</li> <li>Start Outlet again</li></ol></div></div>',1),Tt=i('<div class="space-y-6"><!> <!> <!></div>'),Wt=i("<!> <!>",1);function de(st,ot){xt(ot,!0);let N=Y(!0),S=Y(!1),$=Y(null),n=Y(null),R=Y("");_t(()=>{it()});async function it(){u(N,!0),u(R,"");try{u($,await kt(),!0)}catch(o){console.error("Failed to load version info:",o),u(R,o.message||"Failed to load version information",!0)}finally{u(N,!1)}}async function lt(){u(S,!0),u(R,"");try{u(n,await Ct(),!0)}catch(o){console.error("Failed to check for updates:",o),u(R,o.message||"Failed to check for updates",!0)}finally{u(S,!1)}}var X=Wt();wt("1473wn3",o=>{gt(()=>{bt.title="Updates - Settings"})});var Z=B(X);{var dt=o=>{var k=Bt(),z=e(k);Ut(z,{type:"error",title:"Error",children:(E,tt)=>{var f=Ft(),H=e(f,!0);a(f),b(()=>c(H,r(R))),s(E,f)},$$slots:{default:!0}}),a(k),s(o,k)};w(Z,o=>{r(R)&&o(dt)})}var nt=t(Z,2);{var vt=o=>{jt(o,{size:"large"})},ct=o=>{var k=Tt(),z=e(k);K(z,{children:(f,H)=>{var C=Vt(),V=t(B(C),2);{var T=A=>{var L=St(),O=e(L),p=t(e(O),2);Q(p,{type:"primary",children:(M,et)=>{I();var G=J();b(()=>c(G,r($).version)),s(M,G)},$$slots:{default:!0}}),a(O);var x=t(O,2),U=t(e(x),2),F=e(U,!0);a(U),a(x);var P=t(x,2),m=t(e(P),2),_=e(m,!0);a(m),a(P);var h=t(P,2),y=t(e(h),2),j=e(y,!0);a(y),a(h);var g=t(h,2),D=t(e(g),2),W=e(D);a(D),a(g),a(L),b(()=>{c(F,r($).commit),c(_,r($).build_date),c(j,r($).go_version),c(W,`${r($).os??""}/${r($).arch??""}`)}),s(A,L)};w(V,A=>{r($)&&A(T)})}s(f,C)},$$slots:{default:!0}});var E=t(z,2);K(E,{children:(f,H)=>{var C=Mt(),V=B(C),T=t(e(V),2);rt(T,{type:"secondary",onclick:lt,get disabled(){return r(S)},children:(p,x)=>{var U=At(),F=B(U);{let m=$t(()=>r(S)?"animate-spin":"");Dt(F,{get class(){return`mr-2 h-4 w-4 ${r(m)??""}`}})}var P=t(F);b(()=>c(P,` ${r(S)?"Checking...":"Check for Updates"}`)),s(p,U)},$$slots:{default:!0}}),a(V);var A=t(V,2);{var L=p=>{var x=yt(),U=B(x);{var F=m=>{var _=zt(),h=e(_),y=e(h);It(y,{class:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"});var j=t(y,2),g=t(e(j),2),D=t(e(g));Q(D,{type:"success",children:(l,d)=>{I();var v=J();b(()=>c(v,r(n).latest_version)),s(l,v)},$$slots:{default:!0}});var W=t(D,2);Q(W,{type:"secondary",children:(l,d)=>{I();var v=J();b(()=>c(v,r(n).current_version)),s(l,v)},$$slots:{default:!0}}),I(),a(g);var M=t(g,2);{var et=l=>{var d=Lt(),v=e(d);a(d),b(()=>c(v,`Released: ${r(n).release_date??""}`)),s(l,d)};w(M,l=>{r(n).release_date&&l(et)})}var G=t(M,2);{var mt=l=>{var d=Ot(),v=t(e(d),2),q=e(v,!0);a(v),a(d),b(()=>c(q,r(n).changelog)),s(l,d)};w(G,l=>{r(n).changelog&&l(mt)})}var pt=t(G,2);{var ut=l=>{var d=Yt(),v=e(d);rt(v,{type:"primary",onclick:()=>window.open(r(n)?.download_url,"_blank"),children:(q,qt)=>{var at=Gt(),ft=B(at);Rt(ft,{class:"mr-2 h-4 w-4"}),I(),s(q,at)},$$slots:{default:!0}}),a(d),s(l,d)};w(pt,l=>{r(n).download_url&&l(ut)})}I(2),a(j),a(h),a(_),s(m,_)},P=m=>{var _=Et(),h=e(_),y=e(h);Pt(y,{class:"h-5 w-5 text-green-500"});var j=t(y,2),g=t(e(j),2),D=e(g);a(g),a(j),a(h),a(_),b(()=>c(D,`Outlet.sh ${r(n).current_version??""} is the latest version.`)),s(m,_)};w(U,m=>{r(n).update_available?m(F):m(P,!1)})}s(p,x)},O=p=>{var x=Ht();s(p,x)};w(A,p=>{r(n)?p(L):p(O,!1)})}s(f,C)},$$slots:{default:!0}});var tt=t(E,2);K(tt,{children:(f,H)=>{var C=Nt();I(2),s(f,C)},$$slots:{default:!0}}),a(k),s(o,k)};w(nt,o=>{r(N)?o(vt):o(ct,!1)})}s(st,X),ht()}export{de as component};
