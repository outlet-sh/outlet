import"../chunks/DsnmJJEf.js";import{a as We}from"../chunks/Hdby3CWe.js";import{p as Oe,d as Re,e as je,b as e,i as t,g as Be,c as s,h as a,r,s as v,t as _e,f as k,n as A}from"../chunks/odI--4Kw.js";import{d as Le,s as xe}from"../chunks/BNMK9zrr.js";import{i as $}from"../chunks/COaB7F5h.js";import{a as d,f as n,t as De}from"../chunks/CCInJaqd.js";import{h as Ge}from"../chunks/hUjpWz_l.js";import{A as ce,e as He,C as be,S as qe,b as ye,B as ue,I as M}from"../chunks/e1pqODLP.js";import{L as Ve}from"../chunks/D716f0vp.js";import{S as he}from"../chunks/CtUfzAwU.js";import{A as Xe}from"../chunks/CQ5dNm6G.js";import{g as Ye,u as Se}from"../chunks/G69xwvxa.js";import{C as Je}from"../chunks/fF6NwSe1.js";import{P as we}from"../chunks/CXH8zQ2k.js";import{S as Qe}from"../chunks/Cz-p8-Zx.js";var Ze=n("<p> </p>"),et=n('<div class="flex justify-center py-8"><!></div>'),tt=n(`<p>Choose how Outlet sends emails. You can use an SMTP relay service (like SendGrid, Mailgun, Postmark)
				or connect directly to Amazon SES for high-volume sending.</p>`),at=n("<!> Change",1),st=n('<div class="sm:col-span-6"><div class="flex items-center justify-between p-4 bg-surface-secondary rounded-lg border border-border"><div class="flex items-center gap-3"><!> <div><p class="font-medium text-text">AWS Credentials Configured</p> <p class="text-sm text-text-muted">Access Key ID: <code class="bg-surface-tertiary px-1.5 py-0.5 rounded text-xs"> </code></p> <p class="text-sm text-text-muted">Secret Access Key: <code class="bg-surface-tertiary px-1.5 py-0.5 rounded text-xs">••••••••••••••••</code></p></div></div> <!></div></div>'),rt=n('<div class="sm:col-span-6"><!></div>'),lt=n('<div class="sm:col-span-3"><label for="aws-access-key" class="form-label">Access Key ID</label> <!></div> <div class="sm:col-span-3"><label for="aws-secret-key" class="form-label">Secret Access Key</label> <!></div> <!>',1),ot=n(`<p>In sandbox mode, you can only send emails to verified email addresses.
								Request production access from your AWS console to send to any recipient.</p>`),it=n('<div class="flex items-center gap-3 mb-4"><!> <div><h2 class="text-lg font-medium text-text">Amazon SES</h2> <p class="text-sm text-text-muted">Connect directly to AWS Simple Email Service for high-volume sending</p></div></div> <div class="space-y-6"><div class="grid grid-cols-1 gap-6 sm:grid-cols-6"><div class="sm:col-span-6"><label for="aws-region" class="form-label">AWS Region</label> <!> <p class="mt-1 text-sm text-text-muted">Choose the region closest to your audience for best delivery performance</p></div> <!></div> <div class="pt-4 border-t border-border"><h3 class="font-medium text-text mb-3">SES Sandbox Mode</h3> <!></div> <p class="text-sm text-text-muted">From Name and From Email are configured per organization.</p> <div class="flex justify-end"><!></div></div>',1),dt=n("<!> <!>",1),nt=n("<!> Change",1),vt=n('<div class="sm:col-span-3"><label class="form-label">Password / API Key</label> <div class="flex items-center gap-2 p-2 bg-surface-secondary rounded-lg border border-border"><!> <code class="text-sm text-text-muted">••••••••••••••••</code> <!></div></div>'),ct=n('<button type="button" class="mt-1 text-sm text-text-muted hover:text-text">Cancel</button>'),ut=n('<div class="sm:col-span-3"><label for="smtp-password" class="form-label">Password / API Key</label> <!> <!></div>'),mt=n('<div class="flex items-center gap-3 mb-4"><!> <div><h2 class="text-lg font-medium text-text">SMTP Relay</h2> <p class="text-sm text-text-muted">Connect to SendGrid, Mailgun, Postmark, or any SMTP server</p></div></div> <div class="space-y-6"><div class="grid grid-cols-1 gap-6 sm:grid-cols-6"><div class="sm:col-span-4"><label for="smtp-host" class="form-label">SMTP Host</label> <!></div> <div class="sm:col-span-2"><label for="smtp-port" class="form-label">Port</label> <!></div> <div class="sm:col-span-3"><label for="smtp-user" class="form-label">Username</label> <!></div> <!></div> <div class="pt-4 border-t border-border"><h3 class="font-medium text-text mb-3">Common Providers</h3> <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm"><div class="p-3 bg-surface-secondary rounded-lg"><p class="font-medium text-text">SendGrid</p> <p class="text-text-muted">smtp.sendgrid.net:587</p> <p class="text-text-muted text-xs">Username: apikey</p></div> <div class="p-3 bg-surface-secondary rounded-lg"><p class="font-medium text-text">Mailgun</p> <p class="text-text-muted">smtp.mailgun.org:587</p> <p class="text-text-muted text-xs">Username: your login</p></div> <div class="p-3 bg-surface-secondary rounded-lg"><p class="font-medium text-text">Postmark</p> <p class="text-text-muted">smtp.postmarkapp.com:587</p> <p class="text-text-muted text-xs">Username: server API token</p></div></div></div> <p class="text-sm text-text-muted">From Name and From Email are configured per organization.</p> <div class="flex justify-end"><!></div></div>',1),pt=n('<!> <div class="mb-4"><!></div> <!>',1),ft=n('<div class="space-y-6"><!> <!></div>');function Mt(Pe,ke){Oe(ke,!0);let C=v(!1),x=v(!1),me=v(!0),b=v(""),T=v("ses"),K=v(""),H=v(587),q=v(""),F=v(""),ae=v(!1),V=v(!1),E=v(""),U=v(""),X=v("us-east-1"),Y=v(!1),J=v(!1);const Ae=[{value:"us-east-1",label:"US East (N. Virginia)"},{value:"us-east-2",label:"US East (Ohio)"},{value:"us-west-1",label:"US West (N. California)"},{value:"us-west-2",label:"US West (Oregon)"},{value:"eu-west-1",label:"Europe (Ireland)"},{value:"eu-west-2",label:"Europe (London)"},{value:"eu-west-3",label:"Europe (Paris)"},{value:"eu-central-1",label:"Europe (Frankfurt)"},{value:"ap-south-1",label:"Asia Pacific (Mumbai)"},{value:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{value:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{value:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{value:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{value:"sa-east-1",label:"South America (São Paulo)"},{value:"ca-central-1",label:"Canada (Central)"}],$e=[{id:"ses",label:"Amazon SES"},{id:"smtp",label:"SMTP Relay"}];We(async()=>{await Ce()});async function Ce(){try{const l=await Ye({},"email");for(const o of l.settings)switch(o.key){case"smtp_host":e(K,o.value||"",!0);break;case"smtp_port":e(H,o.value?parseInt(o.value):587,!0);break;case"smtp_user":e(q,o.value||"",!0);break;case"smtp_password":e(ae,!!o.value);break;case"aws_access_key":e(E,o.value||"",!0),e(Y,!!o.value);break;case"aws_region":e(X,o.value||"us-east-1",!0);break}t(E)||t(Y)?e(T,"ses"):t(K)&&e(T,"smtp")}catch(l){e(b,l.message||"Failed to load settings",!0)}finally{e(me,!1)}}async function Ee(){e(C,!0),e(x,!1),e(b,"");try{await Se({smtp_host:t(K),smtp_port:t(H),smtp_user:t(q),smtp_password:t(F)||void 0}),e(x,!0),setTimeout(()=>{e(x,!1)},2e3),t(F)&&(e(ae,!0),e(F,""))}catch(l){e(b,l.message||"Failed to save settings",!0)}finally{e(C,!1)}}async function Ie(){e(C,!0),e(x,!1),e(b,"");try{await Se({aws_access_key:t(E),aws_secret_key:t(U)||void 0,aws_region:t(X)}),e(x,!0),setTimeout(()=>{e(x,!1)},2e3),t(U)&&(e(Y,!0),e(U,""))}catch(l){e(b,l.message||"Failed to save settings",!0)}finally{e(C,!1)}}var se=ft();Ge("1v3r2l5",l=>{je(()=>{Be.title="Integrations - Settings"})});var pe=s(se);{var Me=l=>{ce(l,{type:"error",title:"Error",onclose:()=>e(b,""),children:(o,z)=>{var h=Ze(),re=s(h,!0);r(h),_e(()=>xe(re,t(b))),d(o,h)},$$slots:{default:!0}})};$(pe,l=>{t(b)&&l(Me)})}var Te=a(pe,2);{var Ke=l=>{var o=et(),z=s(o);Ve(z,{}),r(o),d(l,o)},Fe=l=>{var o=pt(),z=k(o);ce(z,{type:"info",title:"Email Sending Provider",children:(f,N)=>{var W=tt();d(f,W)},$$slots:{default:!0}});var h=a(z,2),re=s(h);He(re,{get tabs(){return $e},variant:"pills",get activeTab(){return t(T)},set activeTab(f){e(T,f,!0)}}),r(h);var Ue=a(h,2);{var ze=f=>{var N=dt(),W=k(N);be(W,{children:(O,fe)=>{var R=it(),S=k(R),j=s(S);Je(j,{class:"h-5 w-5 text-primary"}),A(2),r(S);var Z=a(S,2),w=s(Z),B=s(w),L=a(s(B),2);qe(L,{id:"aws-region",get options(){return Ae},get value(){return t(X)},set value(i){e(X,i,!0)}}),A(2),r(B);var le=a(B,2);{var oe=i=>{var m=st(),p=s(m),g=s(p),u=s(g);ye(u,{class:"h-5 w-5 text-green-500"});var y=a(u,2),P=a(s(y),2),I=a(s(P)),_=s(I,!0);r(I),r(P),A(2),r(y),r(g);var G=a(g,2);ue(G,{type:"secondary",size:"sm",onclick:()=>e(J,!0),children:(de,ge)=>{var ne=at(),ve=k(ne);we(ve,{class:"h-4 w-4 mr-1.5"}),A(),d(de,ne)},$$slots:{default:!0}}),r(p),r(m),_e(()=>xe(_,t(E))),d(i,m)},ie=i=>{var m=lt(),p=k(m),g=a(s(p),2);M(g,{type:"text",id:"aws-access-key",placeholder:"AKIAIOSFODNN7EXAMPLE",get value(){return t(E)},set value(_){e(E,_,!0)}}),r(p);var u=a(p,2),y=a(s(u),2);M(y,{type:"password",id:"aws-secret-key",placeholder:"",get value(){return t(U)},set value(_){e(U,_,!0)}}),r(u);var P=a(u,2);{var I=_=>{var G=rt(),de=s(G);ue(de,{type:"secondary",size:"sm",onclick:()=>e(J,!1),children:(ge,ne)=>{A();var ve=De("Cancel");d(ge,ve)},$$slots:{default:!0}}),r(G),d(_,G)};$(P,_=>{t(J)&&_(I)})}d(i,m)};$(le,i=>{t(Y)&&!t(J)?i(oe):i(ie,!1)})}r(w);var D=a(w,2),ee=a(s(D),2);ce(ee,{type:"warning",title:"New AWS accounts start in sandbox mode",children:(i,m)=>{var p=ot();d(i,p)},$$slots:{default:!0}}),r(D);var te=a(D,4),c=s(te);he(c,{label:"Save SES Settings",get saving(){return t(C)},get saved(){return t(x)},onclick:Ie}),r(te),r(Z),d(O,R)},$$slots:{default:!0}});var Q=a(W,2);Xe(Q,{}),d(f,N)},Ne=f=>{be(f,{children:(N,W)=>{var Q=mt(),O=k(Q),fe=s(O);Qe(fe,{class:"h-5 w-5 text-primary"}),A(2),r(O);var R=a(O,2),S=s(R),j=s(S),Z=a(s(j),2);M(Z,{type:"text",id:"smtp-host",placeholder:"smtp.sendgrid.net",get value(){return t(K)},set value(c){e(K,c,!0)}}),r(j);var w=a(j,2),B=a(s(w),2);M(B,{type:"number",id:"smtp-port",get value(){return t(H)},set value(c){e(H,c,!0)}}),r(w);var L=a(w,2),le=a(s(L),2);M(le,{type:"text",id:"smtp-user",placeholder:"apikey",get value(){return t(q)},set value(c){e(q,c,!0)}}),r(L);var oe=a(L,2);{var ie=c=>{var i=vt(),m=a(s(i),2),p=s(m);ye(p,{class:"h-4 w-4 text-green-500 flex-shrink-0"});var g=a(p,4);ue(g,{type:"secondary",size:"sm",class:"ml-auto",onclick:()=>e(V,!0),children:(u,y)=>{var P=nt(),I=k(P);we(I,{class:"h-3 w-3 mr-1"}),A(),d(u,P)},$$slots:{default:!0}}),r(m),r(i),d(c,i)},D=c=>{var i=ut(),m=a(s(i),2);M(m,{type:"password",id:"smtp-password",placeholder:"",get value(){return t(F)},set value(u){e(F,u,!0)}});var p=a(m,2);{var g=u=>{var y=ct();y.__click=()=>e(V,!1),d(u,y)};$(p,u=>{t(V)&&u(g)})}r(i),d(c,i)};$(oe,c=>{t(ae)&&!t(V)?c(ie):c(D,!1)})}r(S);var ee=a(S,6),te=s(ee);he(te,{label:"Save SMTP Settings",get saving(){return t(C)},get saved(){return t(x)},onclick:Ee}),r(ee),r(R),d(N,Q)},$$slots:{default:!0}})};$(Ue,f=>{t(T)==="ses"?f(ze):f(Ne,!1)})}d(l,o)};$(Te,l=>{t(me)?l(Ke):l(Fe,!1)})}r(se),d(Pe,se),Re()}Le(["click"]);export{Mt as component};
