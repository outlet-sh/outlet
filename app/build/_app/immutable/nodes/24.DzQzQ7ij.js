import"../chunks/DsnmJJEf.js";import{a as Be}from"../chunks/Hdby3CWe.js";import{c as r,r as t,t as J,i as e,p as He,a as Ze,f as p,d as Ve,e as Je,b as i,g as Xe,s as A,h as s,n as f,j as Qe}from"../chunks/odI--4Kw.js";import{s as ye,d as ea,e as Te}from"../chunks/BNMK9zrr.js";import{p as Ee,i as T}from"../chunks/COaB7F5h.js";import{a as o,f as n,c as ie}from"../chunks/CCInJaqd.js";import{h as aa}from"../chunks/hUjpWz_l.js";import{g as ue}from"../chunks/J_BT3AZT.js";import{ac as ta,ad as ra,a as sa,u as la}from"../chunks/CbJUEE85.js";import{a as ke}from"../chunks/DF8FslrH.js";import{C as V,I as R,S as Pe,A as Me,h as ce}from"../chunks/CKHj2K0U.js";import{e as ia,c as oa,a as $e,i as na}from"../chunks/BohEjZuL.js";import{A as da}from"../chunks/DuiGfe8g.js";import{L as ge}from"../chunks/oaK_Ob9t.js";import{S as De}from"../chunks/Co0iPhGF.js";import{C as xe}from"../chunks/Ch6Q5zDb.js";import{C as ua}from"../chunks/ChzVDfOX.js";import{G as ca}from"../chunks/b2d9ej_w.js";import{C as Ie}from"../chunks/Dm-kwr-C.js";import{K as ma}from"../chunks/CPQDiAtD.js";import{E as va}from"../chunks/CnqfCpUb.js";var pa=n("<li> </li>"),fa=n("<ul></ul>");function ba(me,X){let _=Ee(X,"vertical",3,!1),y=Ee(X,"class",3,"");function w(E){return E==="complete"?"step step-success":E==="current"?"step step-primary":"step"}var I=fa();ia(I,21,()=>X.steps,na,(E,k)=>{var P=pa(),j=r(P,!0);t(P),J(B=>{$e(P,1,B),ye(j,e(k).label)},[()=>oa(w(e(k).status))]),o(E,P)}),t(I),J(()=>$e(I,1,`steps ${_()?"steps-vertical":"steps-horizontal w-full"} ${y()??""}`)),o(me,I)}var _a=n('<div class="flex items-center justify-center py-12"><!></div>'),ha=n("<p> </p>"),ga=n("<!> Creating...",1),xa=n("Continue <!>",1),ya=n('<div><div class="text-center mb-6"><div class="mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-6"><!></div> <h1 class="text-2xl font-bold text-text mb-2">Create Admin Account</h1> <p class="text-text-muted">Set up your administrator account to get started.</p></div> <!> <form class="space-y-5"><div><label for="admin-company" class="form-label">Company</label> <!></div> <div><label for="admin-name" class="form-label">Name</label> <!></div> <div><label for="admin-email" class="form-label">Email Address</label> <!></div> <div><label for="admin-password" class="form-label">Password</label> <!></div> <div><label for="admin-confirm-password" class="form-label">Confirm Password</label> <!></div> <div><label for="admin-timezone" class="form-label">Timezone</label> <!> <p class="mt-1 text-xs text-text-muted">Used for scheduling campaigns and reports</p></div> <div class="pt-4"><button type="submit" class="btn btn-primary w-full"><!></button></div></form></div>'),wa=n("<p> </p>"),Sa=n("<!> Connecting...",1),Aa=n("Complete Setup <!>",1),Ca=n('<div><div class="text-center mb-6"><div class="mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-6"><!></div> <h1 class="text-2xl font-bold text-text mb-2">Connect Amazon SES</h1> <p class="text-text-muted">Enter your AWS credentials to enable email sending.</p></div> <!> <form class="space-y-5"><div><label for="aws-region" class="form-label">AWS Region</label> <!> <p class="mt-1 text-xs text-text-muted">Choose the region closest to your audience</p></div> <div><label for="aws-access-key" class="form-label">Access Key ID</label> <!></div> <div><label for="aws-secret-key" class="form-label">Secret Access Key</label> <!></div> <div class="flex flex-col gap-3 pt-4"><button type="submit" class="btn btn-primary w-full"><!></button> <button type="button" class="btn btn-ghost btn-sm">Skip for now</button></div></form></div>'),Ta=n(`<div class="text-center"><div class="mx-auto w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mb-6"><!></div> <h2 class="text-2xl font-bold text-text mb-2">You're all set!</h2> <p class="text-text-muted mb-8">Your platform is configured and ready to use. Create your first brand to start sending emails.</p> <button class="btn btn-primary btn-lg w-full">Go to Dashboard <!></button></div>`),Ea=n("<!> <!>",1),ka=n('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Admin Account</h3></div> <p class="text-sm text-text-muted mb-4">This is the first administrator account for your Outlet installation.</p> <ul class="space-y-3 text-sm text-text-muted"><li class="flex items-start gap-2"><!> <span>Full access to all features</span></li> <li class="flex items-start gap-2"><!> <span>Can create additional users</span></li> <li class="flex items-start gap-2"><!> <span>Manage lists and campaigns</span></li></ul>',1),Pa=n('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Timezone Setting</h3></div> <p class="text-sm text-text-muted mb-2">Your timezone is used for:</p> <ul class="space-y-2 text-sm text-text-muted"><li>• Scheduling campaign sends</li> <li>• Displaying report timestamps</li> <li>• Email queue timing</li></ul>',1),Ma=n('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Password Requirements</h3></div> <ul class="space-y-2 text-sm text-text-muted"><li>Minimum 8 characters</li> <li>Use a strong, unique password</li> <li>Consider using a password manager</li></ul>',1),$a=n("<!> <!> <!>",1),Da=n('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Getting AWS Credentials</h3></div> <ol class="space-y-3 text-sm text-text-muted list-decimal list-inside"><li>Go to AWS IAM Console</li> <li>Create a new IAM user</li> <li>Attach the policy below</li> <li>Copy the Access Key ID and Secret</li></ol> <a href="https://console.aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer" class="mt-4 inline-flex items-center gap-1 text-sm text-primary hover:underline">Open IAM Console <!></a>',1),Ia=n("<!> <!>",1),Ua=n(`<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">What's next?</h3></div> <ul class="space-y-3 text-sm text-text-muted"><li class="flex items-start gap-2"><span class="text-primary font-medium shrink-0">1.</span> <span>Create your first brand with a domain</span></li> <li class="flex items-start gap-2"><span class="text-primary font-medium shrink-0">2.</span> <span>Add DNS records to verify your domain</span></li> <li class="flex items-start gap-2"><span class="text-primary font-medium shrink-0">3.</span> <span>Create email lists and start collecting subscribers</span></li> <li class="flex items-start gap-2"><span class="text-primary font-medium shrink-0">4.</span> <span>Send your first campaign!</span></li></ul>`,1),Na=n('<div class="grid grid-cols-1 md:grid-cols-5 gap-8"><div class="md:col-span-3"><!></div> <div class="md:col-span-2"><div class="sticky top-8 space-y-6"><!></div></div></div>');function rt(me,X){He(X,!0);let _=A("loading"),y=A(!1),w=A(""),I=Ze(new Set),E=A(""),k=A(""),P=A(""),j=A(""),B=A(""),H=A(""),oe=A(""),ne=A(""),ve=A("us-east-1");const Ue=[{value:"us-east-1",label:"US East (N. Virginia)"},{value:"us-east-2",label:"US East (Ohio)"},{value:"us-west-1",label:"US West (N. California)"},{value:"us-west-2",label:"US West (Oregon)"},{value:"eu-west-1",label:"Europe (Ireland)"},{value:"eu-west-2",label:"Europe (London)"},{value:"eu-west-3",label:"Europe (Paris)"},{value:"eu-central-1",label:"Europe (Frankfurt)"},{value:"ap-south-1",label:"Asia Pacific (Mumbai)"},{value:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{value:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{value:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{value:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{value:"sa-east-1",label:"South America (São Paulo)"},{value:"ca-central-1",label:"Canada (Central)"}],we=[{value:"America/New_York",label:"Eastern Time (US & Canada)"},{value:"America/Chicago",label:"Central Time (US & Canada)"},{value:"America/Denver",label:"Mountain Time (US & Canada)"},{value:"America/Los_Angeles",label:"Pacific Time (US & Canada)"},{value:"America/Anchorage",label:"Alaska"},{value:"Pacific/Honolulu",label:"Hawaii"},{value:"America/Toronto",label:"Eastern Time (Canada)"},{value:"America/Vancouver",label:"Pacific Time (Canada)"},{value:"America/Mexico_City",label:"Mexico City"},{value:"America/Sao_Paulo",label:"São Paulo"},{value:"America/Buenos_Aires",label:"Buenos Aires"},{value:"Europe/London",label:"London (GMT/BST)"},{value:"Europe/Paris",label:"Paris (CET/CEST)"},{value:"Europe/Berlin",label:"Berlin (CET/CEST)"},{value:"Europe/Amsterdam",label:"Amsterdam (CET/CEST)"},{value:"Europe/Madrid",label:"Madrid (CET/CEST)"},{value:"Europe/Rome",label:"Rome (CET/CEST)"},{value:"Europe/Zurich",label:"Zurich (CET/CEST)"},{value:"Europe/Stockholm",label:"Stockholm (CET/CEST)"},{value:"Europe/Moscow",label:"Moscow (MSK)"},{value:"Asia/Dubai",label:"Dubai (GST)"},{value:"Asia/Kolkata",label:"India (IST)"},{value:"Asia/Singapore",label:"Singapore (SGT)"},{value:"Asia/Hong_Kong",label:"Hong Kong (HKT)"},{value:"Asia/Shanghai",label:"Shanghai (CST)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"},{value:"Asia/Seoul",label:"Seoul (KST)"},{value:"Australia/Sydney",label:"Sydney (AEST/AEDT)"},{value:"Australia/Melbourne",label:"Melbourne (AEST/AEDT)"},{value:"Australia/Perth",label:"Perth (AWST)"},{value:"Pacific/Auckland",label:"Auckland (NZST/NZDT)"},{value:"UTC",label:"UTC (Coordinated Universal Time)"}];Be(async()=>{try{const l=Intl.DateTimeFormat().resolvedOptions().timeZone;we.some(S=>S.value===l)?i(H,l,!0):i(H,"UTC")}catch{i(H,"America/New_York")}try{const l=await ta();l.has_admin?l.has_aws?ue("/"):(I.add("admin"),ke.isAuthenticated?i(_,"aws"):ue("/auth/login?redirect=/setup")):i(_,"admin")}catch(l){console.error("Failed to check setup status:",l),i(_,"admin")}});async function Ne(){if(i(y,!0),i(w,""),e(k)!==e(P)){i(w,"Passwords do not match"),i(y,!1);return}if(e(k).length<8){i(w,"Password must be at least 8 characters"),i(y,!1);return}try{await ra({email:e(E),password:e(k),confirm_password:e(P),name:e(j)||void 0,company:e(B)||void 0,timezone:e(H)||void 0});const l=await sa({email:e(E),password:e(k)});l.token&&l.user&&ke.setSession(l.token,l.user),I.add("admin"),i(_,"aws")}catch(l){console.error("Failed to create admin:",l),i(w,l.message||"Failed to create admin account",!0)}finally{i(y,!1)}}async function ze(){i(y,!0),i(w,"");try{await la({aws_access_key:e(oe),aws_secret_key:e(ne),aws_region:e(ve)}),I.add("aws"),i(_,"complete")}catch(l){console.error("Failed to save AWS credentials:",l),i(w,l.message||"Failed to save AWS credentials",!0)}finally{i(y,!1)}}function Ke(){ue("/")}function qe(){ue("/")}function pe(l,S){return S&&I.has(S)?"complete":e(_)===l?l==="complete"?"complete":"current":"pending"}let Fe=Qe(()=>[{label:"Account",status:pe("admin","admin")},{label:"Email",status:pe("aws","aws")},{label:"Complete",status:pe("complete")}]);var Se=ie();aa("w3bol3",l=>{Je(()=>{Xe.title="Setup - Outlet"})});var Oe=p(Se);{var We=l=>{var S=_a(),Q=r(S);ge(Q,{class:"w-8 h-8 animate-spin text-primary"}),t(S),o(l,S)},Ge=l=>{var S=Na(),Q=r(S),Ye=r(Q);V(Ye,{children:(q,Z)=>{var F=Ea(),O=p(F);ba(O,{get steps(){return e(Fe)},class:"mb-8"});var ee=s(O,2);{var g=d=>{var u=ya(),m=r(u),$=r(m),C=r($);De(C,{class:"w-8 h-8 text-primary"}),t($),f(4),t(m);var c=s(m,2);{var v=a=>{Me(a,{type:"error",title:"Error",class:"mb-6",children:(h,K)=>{var L=ha(),he=r(L,!0);t(L),J(()=>ye(he,e(w))),o(h,L)},$$slots:{default:!0}})};T(c,a=>{e(w)&&a(v)})}var b=s(c,2),x=r(b),U=s(r(x),2);R(U,{id:"admin-company",type:"text",placeholder:"Your company name",required:!0,get value(){return e(B)},set value(a){i(B,a,!0)}}),t(x);var D=s(x,2),W=s(r(D),2);R(W,{id:"admin-name",type:"text",placeholder:"Your name",required:!0,get value(){return e(j)},set value(a){i(j,a,!0)}}),t(D);var N=s(D,2),z=s(r(N),2);R(z,{id:"admin-email",type:"email",placeholder:"admin@example.com",required:!0,get value(){return e(E)},set value(a){i(E,a,!0)}}),t(N);var G=s(N,2),ae=s(r(G),2);R(ae,{id:"admin-password",type:"password",placeholder:"Minimum 8 characters",required:!0,get value(){return e(k)},set value(a){i(k,a,!0)}}),t(G);var te=s(G,2),re=s(r(te),2);R(re,{id:"admin-confirm-password",type:"password",placeholder:"Confirm your password",required:!0,get value(){return e(P)},set value(a){i(P,a,!0)}}),t(te);var se=s(te,2),de=s(r(se),2);Pe(de,{id:"admin-timezone",get options(){return we},get value(){return e(H)},set value(a){i(H,a,!0)}}),f(2),t(se);var Y=s(se,2),le=r(Y),fe=r(le);{var be=a=>{var h=ga(),K=p(h);ge(K,{class:"w-4 h-4 animate-spin"}),f(),o(a,h)},_e=a=>{var h=xa(),K=s(p(h));xe(K,{class:"w-4 h-4"}),o(a,h)};T(fe,a=>{e(y)?a(be):a(_e,!1)})}t(le),t(Y),t(b),t(u),J(()=>le.disabled=e(y)||!e(B)||!e(j)||!e(E)||!e(k)||!e(P)),Te("submit",b,a=>{a.preventDefault(),Ne()}),o(d,u)},M=d=>{var u=ie(),m=p(u);{var $=c=>{var v=Ca(),b=r(v),x=r(b),U=r(x);ua(U,{class:"w-8 h-8 text-primary"}),t(x),f(4),t(b);var D=s(b,2);{var W=a=>{Me(a,{type:"error",title:"Error",class:"mb-6",children:(h,K)=>{var L=wa(),he=r(L,!0);t(L),J(()=>ye(he,e(w))),o(h,L)},$$slots:{default:!0}})};T(D,a=>{e(w)&&a(W)})}var N=s(D,2),z=r(N),G=s(r(z),2);Pe(G,{id:"aws-region",get options(){return Ue},get value(){return e(ve)},set value(a){i(ve,a,!0)}}),f(2),t(z);var ae=s(z,2),te=s(r(ae),2);R(te,{id:"aws-access-key",type:"text",placeholder:"AKIAIOSFODNN7EXAMPLE",required:!0,get value(){return e(oe)},set value(a){i(oe,a,!0)}}),t(ae);var re=s(ae,2),se=s(r(re),2);R(se,{id:"aws-secret-key",type:"password",placeholder:"Your secret access key",required:!0,get value(){return e(ne)},set value(a){i(ne,a,!0)}}),t(re);var de=s(re,2),Y=r(de),le=r(Y);{var fe=a=>{var h=Sa(),K=p(h);ge(K,{class:"w-4 h-4 animate-spin"}),f(),o(a,h)},be=a=>{var h=Aa(),K=s(p(h));xe(K,{class:"w-4 h-4"}),o(a,h)};T(le,a=>{e(y)?a(fe):a(be,!1)})}t(Y);var _e=s(Y,2);_e.__click=qe,t(de),t(N),t(v),J(()=>Y.disabled=e(y)||!e(oe)||!e(ne)),Te("submit",N,a=>{a.preventDefault(),ze()}),o(c,v)},C=c=>{var v=ie(),b=p(v);{var x=U=>{var D=Ta(),W=r(D),N=r(W);ce(N,{class:"w-8 h-8 text-green-500"}),t(W);var z=s(W,6);z.__click=Ke;var G=s(r(z));xe(G,{class:"w-4 h-4"}),t(z),t(D),o(U,D)};T(b,U=>{e(_)==="complete"&&U(x)},!0)}o(c,v)};T(m,c=>{e(_)==="aws"?c($):c(C,!1)},!0)}o(d,u)};T(ee,d=>{e(_)==="admin"?d(g):d(M,!1)})}o(q,F)},$$slots:{default:!0}}),t(Q);var Ae=s(Q,2),Ce=r(Ae),Le=r(Ce);{var Re=q=>{var Z=$a(),F=p(Z);V(F,{children:(g,M)=>{var d=ka(),u=p(d),m=r(u);De(m,{class:"w-5 h-5 text-primary"}),f(2),t(u);var $=s(u,4),C=r($),c=r(C);ce(c,{class:"w-4 h-4 text-green-500 mt-0.5 shrink-0"}),f(2),t(C);var v=s(C,2),b=r(v);ce(b,{class:"w-4 h-4 text-green-500 mt-0.5 shrink-0"}),f(2),t(v);var x=s(v,2),U=r(x);ce(U,{class:"w-4 h-4 text-green-500 mt-0.5 shrink-0"}),f(2),t(x),t($),o(g,d)},$$slots:{default:!0}});var O=s(F,2);V(O,{children:(g,M)=>{var d=Pa(),u=p(d),m=r(u);ca(m,{class:"w-5 h-5 text-blue-500"}),f(2),t(u),f(4),o(g,d)},$$slots:{default:!0}});var ee=s(O,2);V(ee,{children:(g,M)=>{var d=Ma(),u=p(d),m=r(u);Ie(m,{class:"w-5 h-5 text-amber-500"}),f(2),t(u),f(2),o(g,d)},$$slots:{default:!0}}),o(q,Z)},je=q=>{var Z=ie(),F=p(Z);{var O=g=>{var M=Ia(),d=p(M);V(d,{children:(m,$)=>{var C=Da(),c=p(C),v=r(c);ma(v,{class:"w-5 h-5 text-primary"}),f(2),t(c);var b=s(c,4),x=s(r(b));va(x,{class:"w-3 h-3"}),t(b),o(m,C)},$$slots:{default:!0}});var u=s(d,2);da(u,{compact:!0}),o(g,M)},ee=g=>{var M=ie(),d=p(M);{var u=m=>{V(m,{children:($,C)=>{var c=Ua(),v=p(c),b=r(v);Ie(b,{class:"w-5 h-5 text-amber-500"}),f(2),t(v),f(2),o($,c)},$$slots:{default:!0}})};T(d,m=>{e(_)==="complete"&&m(u)},!0)}o(g,M)};T(F,g=>{e(_)==="aws"?g(O):g(ee,!1)},!0)}o(q,Z)};T(Le,q=>{e(_)==="admin"?q(Re):q(je,!1)})}t(Ce),t(Ae),t(S),o(l,S)};T(Oe,l=>{e(_)==="loading"?l(We):l(Ge,!1)})}o(me,Se),Ve()}ea(["click"]);export{rt as component};
