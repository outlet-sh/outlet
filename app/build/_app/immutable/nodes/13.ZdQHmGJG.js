import"../chunks/Bzak7iHL.js";import{p as Ke,u as Qe,g as e,e as Fe,b as v,d as N,f as o,a as Xe,k as Ze,$ as et,c as t,r as a,s as r,n as l,t as ue}from"../chunks/Ip2DykXx.js";import{d as tt,s as _e,e as at}from"../chunks/DhOIAuLg.js";import{c as q,a as s,f as i,t as rt}from"../chunks/BPgbRZ5o.js";import{i as z}from"../chunks/BeCi3WIf.js";import{h as st}from"../chunks/vHZS38u2.js";import{b as lt}from"../chunks/CmyOW3uE.js";import{s as ot,a as it}from"../chunks/ur54L5C-.js";import{p as nt}from"../chunks/BUZmhiZ9.js";import{g as ke}from"../chunks/CDoCV2GU.js";import{g as dt,u as mt}from"../chunks/CtwFYI68.js";import{C as F,A as Le,B as ie,I as Ce,L as Pe}from"../chunks/Bphptf_a.js";import{L as vt}from"../chunks/sFH_xjRy.js";import{B as pt}from"../chunks/D2CetaP7.js";import{M as ct}from"../chunks/DWdrbJLD.js";import{C as ze}from"../chunks/rz6TTqSb.js";import{C as ft}from"../chunks/P2yphoDx.js";import{L as ut,C as Ae}from"../chunks/-wcGd-2E.js";import{C as U}from"../chunks/Dx9qyz7C.js";import{S as _t}from"../chunks/Bw0QDcut.js";var xt=i('<div class="flex items-center justify-center py-12"><!></div>'),gt=i("<p>The organization you're looking for doesn't exist.</p>"),ht=i('<!> <div class="mt-4"><!></div>',1),bt=i("Get Started <!>",1),yt=i(`<div class="text-center"><div class="mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-6"><!></div> <h1 class="text-2xl font-bold text-text mb-2"> </h1> <p class="text-text-muted mb-8">Let's set up your email sender identity so your subscribers know who's sending them emails.</p> <div class="space-y-4 text-left mb-8"><div class="flex items-start gap-3 p-4 bg-bg-muted rounded-lg"><!> <div><p class="font-medium text-text">Brand Setup</p> <p class="text-sm text-text-muted">Configure your from name and email address</p></div></div></div> <div class="flex gap-3"><!></div> <button type="button" class="mt-4 text-sm text-text-muted hover:text-text transition-colors">Skip for now</button></div>`),$t=i("<p> </p>"),wt=i("<!> Back",1),St=i("<!> Saving...",1),kt=i("Save & Complete <!>",1),Ct=i('<div><div class="mb-6"><h2 class="text-xl font-bold text-text">Email Sender Settings</h2> <p class="text-text-muted mt-1">How do you want your emails to appear?</p></div> <!> <form class="space-y-5"><div><label for="from-name" class="form-label">From Name</label> <!> <p class="mt-1 text-xs text-text-muted">The name that appears as the sender</p></div> <div><label for="from-email" class="form-label">From Email</label> <!> <p class="mt-1 text-xs text-text-muted">Must be a verified email address</p></div> <div><label for="reply-to" class="form-label">Reply-To Email (optional)</label> <!> <p class="mt-1 text-xs text-text-muted">Where replies will be sent</p></div> <div class="flex gap-3 pt-4"><!> <!></div></form> <button type="button" class="mt-4 text-sm text-text-muted hover:text-text transition-colors w-full text-center">Skip for now</button></div>'),Pt=i("Go to Dashboard <!>",1),zt=i(`<div class="text-center"><div class="mx-auto w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mb-6"><!></div> <h2 class="text-2xl font-bold text-text mb-2">You're all set!</h2> <p class="text-text-muted mb-8"> </p> <!></div>`),Tt=i('<div class="mb-8"><div class="flex items-center justify-between text-sm"><span class="text-text-muted"> </span></div> <div class="mt-2 h-2 bg-border rounded-full overflow-hidden"><div class="h-full bg-primary transition-all duration-300"></div></div></div> <!>',1),Bt=i('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Why set this up?</h3></div> <ul class="space-y-3 text-sm text-text-muted"><li class="flex items-start gap-2"><span class="text-primary mt-0.5">1.</span> <span>Subscribers see a familiar name in their inbox</span></li> <li class="flex items-start gap-2"><span class="text-primary mt-0.5">2.</span> <span>Improves email deliverability and trust</span></li> <li class="flex items-start gap-2"><span class="text-primary mt-0.5">3.</span> <span>Replies go to the right place</span></li></ul>',1),Et=i('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Pro tip</h3></div> <p class="text-sm text-text-muted">Use a recognizable sender name like your company name or newsletter title. Avoid generic names like "Newsletter" or "Updates".</p>',1),jt=i("<!> <!>",1),Ft=i(`<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Sender Settings Help</h3></div> <div class="space-y-4 text-sm"><div><p class="font-medium text-text">From Name</p> <p class="text-text-muted">This appears as the sender in email clients. Use your brand name or a person's name for a personal touch.</p></div> <div><p class="font-medium text-text">From Email</p> <p class="text-text-muted">The email address that sends your campaigns. This should be verified with your email provider.</p></div> <div><p class="font-medium text-text">Reply-To</p> <p class="text-text-muted">Where subscriber replies are sent. Use a monitored inbox like support@ or hello@.</p></div></div>`,1),Lt=i('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Best practices</h3></div> <ul class="space-y-2 text-sm text-text-muted"><li class="flex items-start gap-2"><!> <span>Use a consistent from name across all emails</span></li> <li class="flex items-start gap-2"><!> <span>Use a domain you own (not gmail.com)</span></li> <li class="flex items-start gap-2"><!> <span>Monitor your reply-to inbox regularly</span></li></ul>',1),At=i('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Email verification</h3></div> <p class="text-sm text-text-muted">Make sure your from email is verified with your email provider (like Amazon SES) before sending campaigns.</p>',1),Nt=i("<!> <!> <!>",1),Ut=i(`<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">What's next?</h3></div> <ul class="space-y-3 text-sm text-text-muted"><li class="flex items-start gap-2"><!> <span>Create your first email list</span></li> <li class="flex items-start gap-2"><!> <span>Add subscribers manually or import a CSV</span></li> <li class="flex items-start gap-2"><!> <span>Create your first campaign</span></li> <li class="flex items-start gap-2"><!> <span>Set up welcome email automation</span></li></ul>`,1),Wt=i('<div class="grid grid-cols-1 lg:grid-cols-5 gap-8"><div class="lg:col-span-3"><!></div> <div class="lg:col-span-2"><div class="sticky top-8 space-y-6"><!></div></div></div>');function la(Ne,Ue){Ke(Ue,!0);const We=()=>it(nt,"$page",Me),[Me,Oe]=ot();let p=N("welcome"),J=N(!1),xe=N(!0),K=N(""),h=N(null),Q=N(""),D=N(""),ne=N(""),X=Fe(()=>We().params.orgSlug);Qe(()=>{e(X)&&Ie()});async function Ie(){v(xe,!0);try{v(h,await dt(e(X)),!0),e(h)&&(v(Q,e(h).from_name||e(h).name,!0),v(D,e(h).from_email||"",!0),v(ne,e(h).reply_to||"",!0))}catch(b){console.error("Failed to load organization:",b),v(K,"Organization not found")}finally{v(xe,!1)}}function Te(){e(p)==="welcome"?v(p,"brand"):e(p)==="brand"&&qe()}function Ye(){e(p)==="brand"&&v(p,"welcome")}async function qe(){if(e(h)){v(J,!0),v(K,"");try{await mt({},{from_name:e(Q),from_email:e(D),reply_to:e(ne)||e(D)},e(h).id),v(p,"complete")}catch(b){console.error("Failed to save org email settings:",b),v(K,b.message||"Failed to save email settings",!0)}finally{v(J,!1)}}}function De(){ke(`/${e(X)}`)}function Be(){localStorage.setItem(`orgSetupSkipped_${e(X)}`,"true"),ke(`/${e(X)}`)}var Ee=q();st("yjdd7a",b=>{Ze(()=>{var W;et.title=`Welcome - ${(((W=e(h))==null?void 0:W.name)||"Setup")??""}`})});var Ge=o(Ee);{var Re=b=>{F(b,{children:(W,je)=>{var Z=xt(),ge=t(Z);vt(ge,{size:"large"}),a(Z),s(W,Z)},$$slots:{default:!0}})},He=b=>{var W=q(),je=o(W);{var Z=G=>{F(G,{children:(ee,de)=>{var me=ht(),te=o(me);Le(te,{type:"error",title:"Organization not found",children:(re,be)=>{var y=gt();s(re,y)},$$slots:{default:!0}});var ae=r(te,2),he=t(ae);ie(he,{type:"secondary",onclick:()=>ke("/"),children:(re,be)=>{l();var y=rt("Go Back");s(re,y)},$$slots:{default:!0}}),a(ae),s(ee,me)},$$slots:{default:!0}})},ge=G=>{var ee=Wt(),de=t(ee),me=t(de);F(me,{children:(y,R)=>{var M=Tt(),O=o(M),T=t(O),k=t(T),u=t(k);a(k),a(T);var _=r(T,2),P=t(_);a(_),a(O);var I=r(O,2);{var B=d=>{var n=yt(),x=t(n),E=t(x);pt(E,{class:"w-8 h-8 text-primary"}),a(x);var g=r(x,2),$=t(g);a(g);var m=r(g,4),C=t(m),w=t(C);ct(w,{class:"w-5 h-5 text-primary mt-0.5"}),l(2),a(C),a(m);var c=r(m,2),S=t(c);ie(S,{type:"primary",size:"lg",onclick:Te,class:"flex-1 justify-center",children:(Y,H)=>{l();var L=bt(),le=r(o(L));ze(le,{class:"w-4 h-4 ml-2"}),s(Y,L)},$$slots:{default:!0}}),a(c);var j=r(c,2);j.__click=Be,a(n),ue(()=>_e($,`Welcome to ${e(h).name??""}`)),s(d,n)},se=d=>{var n=q(),x=o(n);{var E=$=>{var m=Ct(),C=r(t(m),2);{var w=f=>{Le(f,{type:"error",title:"Error",class:"mb-6",children:(ce,fe)=>{var A=$t(),we=t(A,!0);a(A),ue(()=>_e(we,e(K))),s(ce,A)},$$slots:{default:!0}})};z(C,f=>{e(K)&&f(w)})}var c=r(C,2),S=t(c),j=r(t(S),2);Ce(j,{id:"from-name",type:"text",placeholder:"Your Company Name",required:!0,get value(){return e(Q)},set value(f){v(Q,f,!0)}}),l(2),a(S);var Y=r(S,2),H=r(t(Y),2);Ce(H,{id:"from-email",type:"email",placeholder:"newsletter@example.com",required:!0,get value(){return e(D)},set value(f){v(D,f,!0)}}),l(2),a(Y);var L=r(Y,2),le=r(t(L),2);Ce(le,{id:"reply-to",type:"email",placeholder:"support@example.com",get value(){return e(ne)},set value(f){v(ne,f,!0)}}),l(2),a(L);var ve=r(L,2),ye=t(ve);ie(ye,{type:"secondary",onclick:Ye,get disabled(){return e(J)},children:(f,ce)=>{var fe=wt(),A=o(fe);ft(A,{class:"w-4 h-4 mr-2"}),l(),s(f,fe)},$$slots:{default:!0}});var pe=r(ye,2);{let f=Fe(()=>e(J)||!e(Q)||!e(D));ie(pe,{htmlType:"submit",type:"primary",get disabled(){return e(f)},class:"flex-1 justify-center",children:(ce,fe)=>{var A=q(),we=o(A);{var Ve=V=>{var oe=St(),Se=o(oe);ut(Se,{class:"w-4 h-4 mr-2 animate-spin"}),l(),s(V,oe)},Je=V=>{var oe=kt(),Se=r(o(oe));ze(Se,{class:"w-4 h-4 ml-2"}),s(V,oe)};z(we,V=>{e(J)?V(Ve):V(Je,!1)})}s(ce,A)},$$slots:{default:!0}})}a(ve),a(c);var $e=r(c,2);$e.__click=Be,a(m),at("submit",c,f=>{f.preventDefault(),Te()}),s($,m)},g=$=>{var m=q(),C=o(m);{var w=c=>{var S=zt(),j=t(S),Y=t(j);U(Y,{class:"w-8 h-8 text-green-500"}),a(j);var H=r(j,4),L=t(H);a(H);var le=r(H,2);ie(le,{type:"primary",size:"lg",onclick:De,class:"w-full justify-center",children:(ve,ye)=>{l();var pe=Pt(),$e=r(o(pe));ze($e,{class:"w-4 h-4 ml-2"}),s(ve,pe)},$$slots:{default:!0}}),a(S),ue(()=>_e(L,`Your sender settings have been saved. You're ready to start sending emails from ${e(h).name??""}.`)),s(c,S)};z(C,c=>{e(p)==="complete"&&c(w)},!0)}s($,m)};z(x,$=>{e(p)==="brand"?$(E):$(g,!1)},!0)}s(d,n)};z(I,d=>{e(p)==="welcome"?d(B):d(se,!1)})}ue(()=>{_e(u,`Step ${e(p)==="welcome"?1:e(p)==="brand"?2:3} of 3`),lt(P,`width: ${e(p)==="welcome"?"33%":e(p)==="brand"?"66%":"100%"}`)}),s(y,M)},$$slots:{default:!0}}),a(de);var te=r(de,2),ae=t(te),he=t(ae);{var re=y=>{var R=jt(),M=o(R);F(M,{children:(T,k)=>{var u=Bt(),_=o(u),P=t(_);Ae(P,{class:"w-5 h-5 text-primary"}),l(2),a(_),l(2),s(T,u)},$$slots:{default:!0}});var O=r(M,2);F(O,{children:(T,k)=>{var u=Et(),_=o(u),P=t(_);Pe(P,{class:"w-5 h-5 text-amber-500"}),l(2),a(_),l(2),s(T,u)},$$slots:{default:!0}}),s(y,R)},be=y=>{var R=q(),M=o(R);{var O=k=>{var u=Nt(),_=o(u);F(_,{children:(B,se)=>{var d=Ft(),n=o(d),x=t(n);Ae(x,{class:"w-5 h-5 text-primary"}),l(2),a(n),l(2),s(B,d)},$$slots:{default:!0}});var P=r(_,2);F(P,{children:(B,se)=>{var d=Lt(),n=o(d),x=t(n);Pe(x,{class:"w-5 h-5 text-amber-500"}),l(2),a(n);var E=r(n,2),g=t(E),$=t(g);U($,{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),l(2),a(g);var m=r(g,2),C=t(m);U(C,{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),l(2),a(m);var w=r(m,2),c=t(w);U(c,{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),l(2),a(w),a(E),s(B,d)},$$slots:{default:!0}});var I=r(P,2);F(I,{children:(B,se)=>{var d=At(),n=o(d),x=t(n);_t(x,{class:"w-5 h-5 text-green-500"}),l(2),a(n),l(2),s(B,d)},$$slots:{default:!0}}),s(k,u)},T=k=>{var u=q(),_=o(u);{var P=I=>{F(I,{children:(B,se)=>{var d=Ut(),n=o(d),x=t(n);Pe(x,{class:"w-5 h-5 text-amber-500"}),l(2),a(n);var E=r(n,2),g=t(E),$=t(g);U($,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),a(g);var m=r(g,2),C=t(m);U(C,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),a(m);var w=r(m,2),c=t(w);U(c,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),a(w);var S=r(w,2),j=t(S);U(j,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),a(S),a(E),s(B,d)},$$slots:{default:!0}})};z(_,I=>{e(p)==="complete"&&I(P)},!0)}s(k,u)};z(M,k=>{e(p)==="brand"?k(O):k(T,!1)},!0)}s(y,R)};z(he,y=>{e(p)==="welcome"?y(re):y(be,!1)})}a(ae),a(te),a(ee),s(G,ee)};z(je,G=>{e(h)?G(ge,!1):G(Z)},!0)}s(b,W)};z(Ge,b=>{e(xe)?b(Re):b(He,!1)})}s(Ne,Ee),Xe(),Oe()}tt(["click"]);export{la as component};
