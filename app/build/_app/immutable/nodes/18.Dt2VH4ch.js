import"../chunks/Bzak7iHL.js";import{a as R}from"../chunks/DufYntU0.js";import{p as V,f as W,a as X,h as Y,s as o,b as e,d as l,$ as Z,g as s,c as i,r as p,t as ee,e as te}from"../chunks/Ip2DykXx.js";import{s as se}from"../chunks/DhOIAuLg.js";import{i as E}from"../chunks/BeCi3WIf.js";import{f,a as u}from"../chunks/BPgbRZ5o.js";import{h as ae}from"../chunks/vHZS38u2.js";import{A as re,C as oe,I as y}from"../chunks/Bphptf_a.js";import{L as le}from"../chunks/sFH_xjRy.js";import{S as ie}from"../chunks/CwztAqJg.js";import{i as pe,j as ne}from"../chunks/CtwFYI68.js";var de=f("<p> </p>"),me=f('<div class="flex justify-center py-8"><!></div>'),ve=f('<p class="mt-1 text-sm text-text-muted">Leave blank to keep existing password</p>'),ue=f('<div class="space-y-6"><div class="grid grid-cols-1 gap-6 sm:grid-cols-6"><div class="sm:col-span-4"><label for="smtp-host" class="form-label">SMTP Host</label> <!></div> <div class="sm:col-span-2"><label for="smtp-port" class="form-label">Port</label> <!></div> <div class="sm:col-span-3"><label for="smtp-user" class="form-label">Username</label> <!></div> <div class="sm:col-span-3"><label for="smtp-password" class="form-label">Password</label> <!> <!></div></div> <p class="text-sm text-text-muted">From Name and From Email are configured per organization.</p> <div class="flex justify-end"><!></div></div>'),fe=f("<!> <!>",1);function ke(T,A){V(A,!0);let x=l(!1),c=l(!1),C=l(!0),d=l(""),g=l(""),_=l(587),b=l(""),m=l(""),h=l(!1);R(async()=>{await B()});async function B(){try{const t=await pe({},"email");for(const a of t.settings)switch(a.key){case"smtp_host":e(g,a.value||"",!0);break;case"smtp_port":e(_,a.value?parseInt(a.value):587,!0);break;case"smtp_user":e(b,a.value||"",!0);break;case"smtp_password":e(h,!!a.value);break}}catch(t){e(d,t.message||"Failed to load settings",!0)}finally{e(C,!1)}}async function H(){e(x,!0),e(c,!1),e(d,"");try{await ne({smtp_host:s(g),smtp_port:s(_),smtp_user:s(b),smtp_password:s(m)||void 0}),e(c,!0),setTimeout(()=>{e(c,!1)},2e3),s(m)&&(e(h,!0),e(m,""))}catch(t){e(d,t.message||"Failed to save settings",!0)}finally{e(x,!1)}}var F=fe();ae("14s0w6w",t=>{Y(()=>{Z.title="Email Settings - Outlet"})});var j=W(F);{var U=t=>{re(t,{type:"error",title:"Error",children:(a,w)=>{var n=de(),v=i(n,!0);p(n),ee(()=>se(v,s(d))),u(a,n)},$$slots:{default:!0}})};E(j,t=>{s(d)&&t(U)})}var z=o(j,2);{var N=t=>{var a=me(),w=i(a);le(w,{}),p(a),u(t,a)},O=t=>{oe(t,{title:"Email Configuration",subtitle:"Configure SMTP settings for sending emails",children:(a,w)=>{var n=ue(),v=i(n),S=i(v),q=o(i(S),2);y(q,{type:"text",id:"smtp-host",placeholder:"smtp.example.com",get value(){return s(g)},set value(r){e(g,r,!0)}}),p(S);var $=o(S,2),D=o(i($),2);y(D,{type:"number",id:"smtp-port",get value(){return s(_)},set value(r){e(_,r,!0)}}),p($);var P=o($,2),G=o(i(P),2);y(G,{type:"text",id:"smtp-user",get value(){return s(b)},set value(r){e(b,r,!0)}}),p(P);var I=o(P,2),L=o(i(I),2);{let r=te(()=>s(h)?"••••••••••••••••":"");y(L,{type:"password",id:"smtp-password",get placeholder(){return s(r)},get value(){return s(m)},set value(k){e(m,k,!0)}})}var J=o(L,2);{var K=r=>{var k=ve();u(r,k)};E(J,r=>{s(h)&&r(K)})}p(I),p(v);var M=o(v,4),Q=i(M);ie(Q,{label:"Save Settings",get saving(){return s(x)},get saved(){return s(c)},onclick:H}),p(M),p(n),u(a,n)},$$slots:{default:!0}})};E(z,t=>{s(C)?t(N):t(O,!1)})}u(T,F),X()}export{ke as component};
