import"../chunks/DsnmJJEf.js";import{p as Fe,f as k,d as Le,e as Re,i as e,c as n,h as a,b as t,s as P,j as Z,g as He,r as o,t as j,n as ee}from"../chunks/odI--4Kw.js";import{s as z}from"../chunks/BNMK9zrr.js";import{a as s,c as te,f as _,t as B}from"../chunks/CCInJaqd.js";import{i as b}from"../chunks/COaB7F5h.js";import{h as Oe}from"../chunks/hUjpWz_l.js";import{s as N,r as oe,a as ae}from"../chunks/BohEjZuL.js";import{C as pe,A as _e,g as me,B as re,j as le,T as ge,b as xe}from"../chunks/CKHj2K0U.js";import{s as Se}from"../chunks/DL1yFSKa.js";import"../chunks/BhhnIeUl.js";import{z as ye,A as be}from"../chunks/CbJUEE85.js";import{U as je}from"../chunks/B1OR2nGZ.js";import{C as ze}from"../chunks/CTlASMnd.js";import{T as he}from"../chunks/Cu0Q0NU6.js";var Be=_("<p> </p>"),Ne=_('<!> <span class="font-medium text-yellow-800">Preview:</span>',1),Ee=_('<!> <span class="font-medium text-green-800">Completed:</span>',1),qe=_('<p class="mt-2 text-sm text-yellow-700"> </p>'),Ge=_('<div><div class="flex items-center gap-2"><!> <span> </span></div> <!></div>'),Je=_("<!> ",1),Ke=_(`<div class="flex items-start gap-4"><div class="p-3 rounded-lg bg-orange-100 text-orange-600"><!></div> <div class="flex-1"><h2 class="text-lg font-medium text-text">Inactive Contacts</h2> <p class="mt-1 text-sm text-text-muted">Remove contacts who haven't opened or clicked any emails in a long time. This helps improve your deliverability and open rates.</p> <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="no-opens" class="form-label">No opens in (days)</label> <input id="no-opens" type="number" class="input input-bordered w-full"/></div> <div><label for="no-clicks" class="form-label">No clicks in (days)</label> <input id="no-clicks" type="number" class="input input-bordered w-full"/></div></div> <!> <div class="mt-4 flex gap-3"><!> <!></div></div></div>`),Me=_('<!> <span class="font-medium text-yellow-800">Preview:</span>',1),Qe=_('<!> <span class="font-medium text-green-800">Completed:</span>',1),Ve=_('<p class="mt-2 text-sm text-yellow-700"> </p>'),We=_('<div><div class="flex items-center gap-2"><!> <span> </span></div> <!></div>'),Xe=_("<!> ",1),Ye=_(`<div class="flex items-start gap-4"><div class="p-3 rounded-lg bg-blue-100 text-blue-600"><!></div> <div class="flex-1"><h2 class="text-lg font-medium text-text">Unconfirmed Subscriptions</h2> <p class="mt-1 text-sm text-text-muted">Remove pending subscriptions from contacts who never confirmed their email. This cleans up contacts who signed up but didn't complete double opt-in.</p> <div class="mt-4 max-w-xs"><label for="unconfirmed-days" class="form-label">Older than (days)</label> <input id="unconfirmed-days" type="number" class="input input-bordered w-full"/></div> <!> <div class="mt-4 flex gap-3"><!> <!></div></div></div>`),Ze=_(`<p>Housekeeping operations permanently delete data. Always preview changes before executing.
				Deleted contacts and subscriptions cannot be recovered.</p>`),et=_('<div class="p-6 max-w-5xl mx-auto"><div class="mb-6"><h1 class="text-2xl font-semibold text-text">Housekeeping</h1> <p class="mt-1 text-sm text-text-muted">Clean up your subscriber lists by removing inactive or unconfirmed contacts.</p></div> <!> <div class="space-y-6"><!> <!> <!></div></div> <!> <!>',1);function mt(we,$e){Fe($e,!0);const[tt,ke]=Se();let K=P(90),M=P(180),T=P(!1),c=P(null),Q=P(30),U=P(!1),v=P(null),C=P(""),V=P(!1),W=P(!1);async function Ce(){t(T,!0),t(C,""),t(c,null);try{t(c,await ye({no_opens_days:e(K),no_clicks_days:e(M),dry_run:!0}),!0)}catch(l){t(C,l.message||"Failed to preview inactive contacts",!0)}finally{t(T,!1)}}async function De(){t(T,!0),t(C,"");try{t(c,await ye({no_opens_days:e(K),no_clicks_days:e(M),dry_run:!1}),!0)}catch(l){t(C,l.message||"Failed to delete inactive contacts",!0)}finally{t(T,!1)}}async function Pe(){t(U,!0),t(C,""),t(v,null);try{t(v,await be({older_than_days:e(Q),dry_run:!0}),!0)}catch(l){t(C,l.message||"Failed to preview unconfirmed contacts",!0)}finally{t(U,!1)}}async function Te(){t(U,!0),t(C,"");try{t(v,await be({older_than_days:e(Q),dry_run:!1}),!0)}catch(l){t(C,l.message||"Failed to delete unconfirmed contacts",!0)}finally{t(U,!1)}}var ie=et();Oe("1vht8xz",l=>{Re(()=>{He.title="Housekeeping | Outlet"})});var se=k(ie),de=a(n(se),2);{var Ue=l=>{_e(l,{type:"error",title:"Error",class:"mb-6",children:(L,m)=>{var $=Be(),E=n($,!0);o($),j(()=>z(E,e(C))),s(L,$)},$$slots:{default:!0}})};b(de,l=>{e(C)&&l(Ue)})}var ce=a(de,2),ve=n(ce);pe(ve,{children:(l,L)=>{var m=Ke(),$=n(m),E=n($);je(E,{class:"h-6 w-6"}),o($);var q=a($,2),H=a(n(q),4),R=n(H),O=a(n(R),2);oe(O),N(O,"min",30),N(O,"max",365),o(R);var X=a(R,2),S=a(n(X),2);oe(S),N(S,"min",30),N(S,"max",365),o(X),o(H);var G=a(H,2);{var ne=i=>{var x=Ge(),y=n(x),d=n(y);{var u=w=>{var F=Ne(),J=k(F);ge(J,{class:"h-5 w-5 text-yellow-600"}),ee(2),s(w,F)},h=w=>{var F=Ee(),J=k(F);xe(J,{class:"h-5 w-5 text-green-600"}),ee(2),s(w,F)};b(d,w=>{e(c).dry_run?w(u):w(h,!1)})}var f=a(d,2),r=n(f,!0);o(f),o(y);var p=a(y,2);{var D=w=>{var F=qe(),J=n(F);o(F),j(()=>z(J,`${e(c).affected_count??""} contact${e(c).affected_count===1?"":"s"} will be deleted.`)),s(w,F)};b(p,w=>{e(c).dry_run&&e(c).affected_count>0&&w(D)})}o(x),j(()=>{ae(x,1,`mt-4 p-4 rounded-lg ${e(c).dry_run?"bg-yellow-50 border border-yellow-200":"bg-green-50 border border-green-200"}`),ae(f,1,e(c).dry_run?"text-yellow-700":"text-green-700"),z(r,e(c).message)}),s(i,x)};b(G,i=>{e(c)&&i(ne)})}var Y=a(G,2),g=n(Y);re(g,{type:"secondary",onclick:Ce,get disabled(){return e(T)},children:(i,x)=>{var y=te(),d=k(y);{var u=f=>{var r=B("Checking...");s(f,r)},h=f=>{var r=B("Preview");s(f,r)};b(d,f=>{e(T)&&!e(c)?f(u):f(h,!1)})}s(i,y)},$$slots:{default:!0}});var A=a(g,2);{var I=i=>{re(i,{type:"danger",onclick:()=>t(V,!0),get disabled(){return e(T)},children:(x,y)=>{var d=te(),u=k(d);{var h=r=>{var p=B("Deleting...");s(r,p)},f=r=>{var p=Je(),D=k(p);he(D,{class:"mr-2 h-4 w-4"});var w=a(D);j(()=>z(w,` Delete ${e(c).affected_count??""} Contact${e(c).affected_count===1?"":"s"}`)),s(r,p)};b(u,r=>{e(T)?r(h):r(f,!1)})}s(x,d)},$$slots:{default:!0}})};b(A,i=>{e(c)?.dry_run&&e(c).affected_count>0&&i(I)})}o(Y),o(q),o(m),le(O,()=>e(K),i=>t(K,i)),le(S,()=>e(M),i=>t(M,i)),s(l,m)},$$slots:{default:!0}});var ue=a(ve,2);pe(ue,{children:(l,L)=>{var m=Ye(),$=n(m),E=n($);ze(E,{class:"h-6 w-6"}),o($);var q=a($,2),H=a(n(q),4),R=a(n(H),2);oe(R),N(R,"min",7),N(R,"max",90),o(H);var O=a(H,2);{var X=g=>{var A=We(),I=n(A),i=n(I);{var x=r=>{var p=Me(),D=k(p);ge(D,{class:"h-5 w-5 text-yellow-600"}),ee(2),s(r,p)},y=r=>{var p=Qe(),D=k(p);xe(D,{class:"h-5 w-5 text-green-600"}),ee(2),s(r,p)};b(i,r=>{e(v).dry_run?r(x):r(y,!1)})}var d=a(i,2),u=n(d,!0);o(d),o(I);var h=a(I,2);{var f=r=>{var p=Ve(),D=n(p);o(p),j(()=>z(D,`${e(v).affected_count??""} subscription${e(v).affected_count===1?"":"s"} will be deleted.`)),s(r,p)};b(h,r=>{e(v).dry_run&&e(v).affected_count>0&&r(f)})}o(A),j(()=>{ae(A,1,`mt-4 p-4 rounded-lg ${e(v).dry_run?"bg-yellow-50 border border-yellow-200":"bg-green-50 border border-green-200"}`),ae(d,1,e(v).dry_run?"text-yellow-700":"text-green-700"),z(u,e(v).message)}),s(g,A)};b(O,g=>{e(v)&&g(X)})}var S=a(O,2),G=n(S);re(G,{type:"secondary",onclick:Pe,get disabled(){return e(U)},children:(g,A)=>{var I=te(),i=k(I);{var x=d=>{var u=B("Checking...");s(d,u)},y=d=>{var u=B("Preview");s(d,u)};b(i,d=>{e(U)&&!e(v)?d(x):d(y,!1)})}s(g,I)},$$slots:{default:!0}});var ne=a(G,2);{var Y=g=>{re(g,{type:"danger",onclick:()=>t(W,!0),get disabled(){return e(U)},children:(A,I)=>{var i=te(),x=k(i);{var y=u=>{var h=B("Deleting...");s(u,h)},d=u=>{var h=Xe(),f=k(h);he(f,{class:"mr-2 h-4 w-4"});var r=a(f);j(()=>z(r,` Delete ${e(v).affected_count??""} Subscription${e(v).affected_count===1?"":"s"}`)),s(u,h)};b(x,u=>{e(U)?u(y):u(d,!1)})}s(A,i)},$$slots:{default:!0}})};b(ne,g=>{e(v)?.dry_run&&e(v).affected_count>0&&g(Y)})}o(S),o(q),o(m),le(R,()=>e(Q),g=>t(Q,g)),s(l,m)},$$slots:{default:!0}});var Ae=a(ue,2);_e(Ae,{type:"warning",title:"Permanent Deletion",children:(l,L)=>{var m=Ze();s(l,m)},$$slots:{default:!0}}),o(ce),o(se);var fe=a(se,2);{let l=Z(()=>`This will permanently delete ${e(c)?.affected_count||0} contacts. This action cannot be undone.`),L=Z(()=>e(T)?"Deleting...":"Delete");me(fe,{title:"Delete Inactive Contacts",get description(){return e(l)},get actionLabel(){return e(L)},actionType:"danger",onAction:De,onCancel:()=>t(V,!1),get open(){return e(V)},set open(m){t(V,m,!0)}})}var Ie=a(fe,2);{let l=Z(()=>`This will permanently delete ${e(v)?.affected_count||0} unconfirmed subscriptions. This action cannot be undone.`),L=Z(()=>e(U)?"Deleting...":"Delete");me(Ie,{title:"Delete Unconfirmed Subscriptions",get description(){return e(l)},get actionLabel(){return e(L)},actionType:"danger",onAction:Te,onCancel:()=>t(W,!1),get open(){return e(W)},set open(m){t(W,m,!0)}})}s(we,ie),Le(),ke()}export{mt as component};
