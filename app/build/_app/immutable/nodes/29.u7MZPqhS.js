import"../chunks/Bzak7iHL.js";import{f as _,p as ze,c as r,a as qe,g as e,d as f,b as t,h as He,s as o,t as P,e as me,$ as Oe,n as T,r as s}from"../chunks/Ip2DykXx.js";import{s as p}from"../chunks/DhOIAuLg.js";import{c as fe,a as n,f as d,t as ue}from"../chunks/BPgbRZ5o.js";import{l as Pe,s as ke,i as H}from"../chunks/BeCi3WIf.js";import{h as Ue}from"../chunks/vHZS38u2.js";import{r as Je}from"../chunks/CmyOW3uE.js";import{C as ne,I as Ke,B as ee,d as Qe,f as Ve,A as be,g as we}from"../chunks/Bphptf_a.js";import{L as We,M as Xe,N as Ye,O as Ze,P as et}from"../chunks/CtwFYI68.js";import{L as tt}from"../chunks/sFH_xjRy.js";import{B as De}from"../chunks/CK6k7lQK.js";import{S as at}from"../chunks/Bw0QDcut.js";import"../chunks/hUurZXsg.js";import{s as Ae}from"../chunks/Df8mRDld.js";import{I as Ee}from"../chunks/CYeJYM_Q.js";import{F as rt}from"../chunks/CGB94ttx.js";import{D as Ce}from"../chunks/BZpcwiXl.js";import{T as st}from"../chunks/Boqopfmd.js";function ot(Y,O){const R=Pe(O,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.522.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const I=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Ee(Y,ke({name:"search"},()=>R,{get iconNode(){return I},children:(x,m)=>{var i=fe(),g=_(i);Ae(g,O,"default",{}),n(x,i)},$$slots:{default:!0}}))}function nt(Y,O){const R=Pe(O,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.522.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const I=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13"}]];Ee(Y,ke({name:"user-x"},()=>R,{get iconNode(){return I},children:(x,m)=>{var i=fe(),g=_(i);Ae(g,O,"default",{}),n(x,i)},$$slots:{default:!0}}))}var lt=d("<p> </p>"),dt=d('<div class="mb-6"><!></div>'),it=d("<p> </p>"),ct=d('<div class="mb-6"><!></div>'),vt=d("<!> ",1),pt=d('<div class="flex items-center gap-3 mb-4"><!> <h2 class="text-lg font-medium text-text">GDPR Compliance Tools</h2></div> <p class="text-sm text-text-muted mb-4">Manage contact consent preferences, export personal data, or delete contact information to comply with GDPR and privacy regulations.</p> <div class="flex gap-3"><div class="flex-1"><!></div> <!></div>',1),mt=d('<div class="flex justify-center py-8"><!></div>'),ut=d('<div class="flex items-center justify-between py-2 border-b border-border"><span class="text-sm text-text-muted">Data Retention</span> <span class="text-sm text-text"> </span></div>'),ft=d('<h2 class="text-lg font-medium text-text mb-4">Contact Information</h2> <div class="space-y-4"><div class="flex items-center justify-between py-2 border-b border-border"><span class="text-sm text-text-muted">Email</span> <span class="text-sm font-medium text-text"> </span></div> <div class="flex items-center justify-between py-2 border-b border-border"><span class="text-sm text-text-muted">Contact ID</span> <code class="text-sm font-mono text-text"> </code></div> <div class="flex items-center justify-between py-2 border-b border-border"><span class="text-sm text-text-muted">Account Created</span> <span class="text-sm text-text"> </span></div> <!></div>',1),_t=d('<h2 class="text-lg font-medium text-text mb-4">Consent Preferences</h2> <div class="space-y-4"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-text">GDPR Consent</p> <p class="text-xs text-text-muted"> </p></div> <div class="flex items-center gap-3"><!> <!></div></div> <div class="flex items-center justify-between"><div><p class="text-sm font-medium text-text">Marketing Consent</p> <p class="text-xs text-text-muted"> </p></div> <div class="flex items-center gap-3"><!> <!></div></div> <div class="pt-4 border-t border-border"><!></div></div>',1),xt=d("<!> ",1),gt=d("<br/> ",1),$t=d("<!> Download Export",1),ht=d('<div class="p-4 bg-green-500/10 border border-green-500/20 rounded-lg"><p class="text-sm font-medium text-text mb-2">Export Ready</p> <p class="text-xs text-text-muted mb-3"> <!></p> <!></div>'),yt=d("<!> Delete Data",1),bt=d('<h2 class="text-lg font-medium text-text mb-4">Data Actions</h2> <div class="space-y-4"><div class="flex items-center justify-between p-4 bg-bg-secondary rounded-lg"><div class="flex items-center gap-3"><!> <div><p class="text-sm font-medium text-text">Export Personal Data</p> <p class="text-xs text-text-muted">Download all data associated with this contact (GDPR Article 20)</p></div></div> <!></div> <!> <div class="flex items-center justify-between p-4 bg-red-500/10 border border-red-500/20 rounded-lg"><div class="flex items-center gap-3"><!> <div><p class="text-sm font-medium text-text">Delete All Data</p> <p class="text-xs text-text-muted">Permanently delete this contact and all associated data (GDPR Article 17)</p></div></div> <!></div></div>',1),wt=d("<!> <!> <!>",1),Dt=d('<div class="mt-4"><label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-sm text-text">Also request deletion from email provider logs (if supported)</span></label></div>'),Ct=d('<!> <!> <div class="space-y-6"><!> <!></div> <!>',1);function Ot(Y,O){ze(O,!0);let R=f(""),I=f(!1),x=f(""),m=f(null),i=f(""),g=f(""),te=f(!1),L=f(null),Z=f(!1),le=f(!1),de=f(!1),ae=f(!1),K=f(!1),Q=f(!1);async function _e(){if(!e(R).trim()){t(i,"Please enter an email address");return}t(I,!0),t(i,""),t(g,""),t(m,null),t(L,null);try{const a=await We({email:e(R).trim()});if(!a.found||!a.contact_id){t(i,"No contact found with that email address");return}t(x,a.contact_id,!0);const l=await Xe({},e(x));t(m,l,!0),t(K,l.gdpr_consent,!0),t(Q,l.marketing_consent,!0)}catch(a){console.error("Failed to search contact:",a),t(i,a.message||"Failed to find contact",!0)}finally{t(I,!1)}}async function Fe(){if(e(x)){t(ae,!0),t(i,""),t(g,"");try{const a=await Ze({},{gdpr_consent:e(K),marketing_consent:e(Q)},e(x));t(m,a,!0),t(g,"Consent preferences updated successfully"),setTimeout(()=>{t(g,"")},3e3)}catch(a){console.error("Failed to update consent:",a),t(i,a.message||"Failed to update consent",!0)}finally{t(ae,!1)}}}async function Ge(){if(e(x)){t(te,!0),t(i,""),t(g,"");try{const a=await et({},e(x));t(L,a,!0),t(g,"Data export created successfully")}catch(a){console.error("Failed to export data:",a),t(i,a.message||"Failed to export contact data",!0)}finally{t(te,!1)}}}function Se(){t(Z,!0)}async function je(){if(e(x)){t(le,!0),t(i,"");try{await Ye({},{confirm:!0,delete_email:e(de)},e(x)),t(Z,!1),t(m,null),t(x,""),t(R,""),t(g,"Contact data deleted successfully")}catch(a){console.error("Failed to delete data:",a),t(i,a.message||"Failed to delete contact data",!0)}finally{t(le,!1)}}}function re(a){return a?new Date(a).toLocaleString():"Never"}var xe=Ct();Ue("1spqfkg",a=>{He(()=>{Oe.title="Privacy & GDPR - Settings"})});var ge=_(xe);{var Ne=a=>{var l=dt(),k=r(l);be(k,{type:"error",title:"Error",children:($,S)=>{var c=lt(),w=r(c,!0);s(c),P(()=>p(w,e(i))),n($,c)},$$slots:{default:!0}}),s(l),n(a,l)};H(ge,a=>{e(i)&&a(Ne)})}var $e=o(ge,2);{var Re=a=>{var l=ct(),k=r(l);be(k,{type:"success",title:"Success",children:($,S)=>{var c=it(),w=r(c,!0);s(c),P(()=>p(w,e(g))),n($,c)},$$slots:{default:!0}}),s(l),n(a,l)};H($e,a=>{e(g)&&a(Re)})}var ie=o($e,2),he=r(ie);ne(he,{children:(a,l)=>{var k=pt(),$=_(k),S=r($);at(S,{class:"h-5 w-5 text-primary"}),T(2),s($);var c=o($,4),w=r(c),se=r(w);Ke(se,{type:"email",placeholder:"Enter contact email address",onkeydown:A=>A.key==="Enter"&&_e(),get value(){return e(R)},set value(A){t(R,A,!0)}}),s(w);var ce=o(w,2);ee(ce,{type:"primary",onclick:_e,get disabled(){return e(I)},children:(A,ve)=>{var E=vt(),F=_(E);ot(F,{class:"mr-2 h-4 w-4"});var h=o(F);P(()=>p(h,` ${e(I)?"Searching...":"Search Contact"}`)),n(A,E)},$$slots:{default:!0}}),s(c),n(a,k)},$$slots:{default:!0}});var Ie=o(he,2);{var Te=a=>{var l=mt(),k=r(l);tt(k,{size:"large"}),s(l),n(a,l)},Le=a=>{var l=fe(),k=_(l);{var $=S=>{var c=wt(),w=_(c);ne(w,{children:(A,ve)=>{var E=ft(),F=o(_(E),2),h=r(F),j=o(r(h),2),V=r(j,!0);s(j),s(h);var U=o(h,2),M=o(r(U),2),W=r(M,!0);s(M),s(U);var B=o(U,2),N=o(r(B),2),J=r(N,!0);s(N),s(B);var X=o(B,2);{var G=u=>{var v=ut(),D=o(r(v),2),z=r(D,!0);s(D),s(v),P(()=>p(z,e(m).data_retention_policy)),n(u,v)};H(X,u=>{e(m).data_retention_policy&&u(G)})}s(F),P(u=>{p(V,e(m).email),p(W,e(m).contact_id),p(J,u)},[()=>re(e(m).created_at)]),n(A,E)},$$slots:{default:!0}});var se=o(w,2);ne(se,{children:(A,ve)=>{var E=_t(),F=o(_(E),2),h=r(F),j=r(h),V=o(r(j),2),U=r(V);s(V),s(j);var M=o(j,2),W=r(M);{let y=me(()=>e(K)?"success":"secondary");De(W,{get type(){return e(y)},children:(q,C)=>{T();var b=ue();P(()=>p(b,e(K)?"Granted":"Not Granted")),n(q,b)},$$slots:{default:!0}})}var B=o(W,2);we(B,{label:"",get checked(){return e(K)},set checked(y){t(K,y,!0)}}),s(M),s(h);var N=o(h,2),J=r(N),X=o(r(J),2),G=r(X);s(X),s(J);var u=o(J,2),v=r(u);{let y=me(()=>e(Q)?"success":"secondary");De(v,{get type(){return e(y)},children:(q,C)=>{T();var b=ue();P(()=>p(b,e(Q)?"Granted":"Not Granted")),n(q,b)},$$slots:{default:!0}})}var D=o(v,2);we(D,{label:"",get checked(){return e(Q)},set checked(y){t(Q,y,!0)}}),s(u),s(N);var z=o(N,2),pe=r(z);ee(pe,{type:"primary",onclick:Fe,get disabled(){return e(ae)},children:(y,q)=>{T();var C=ue();P(()=>p(C,e(ae)?"Saving...":"Save Consent Changes")),n(y,C)},$$slots:{default:!0}}),s(z),s(F),P((y,q)=>{p(U,`Consented: ${y??""}`),p(G,`Consented: ${q??""}`)},[()=>re(e(m).gdpr_consent_at),()=>re(e(m).marketing_consent_at)]),n(A,E)},$$slots:{default:!0}});var ce=o(se,2);ne(ce,{children:(A,ve)=>{var E=bt(),F=o(_(E),2),h=r(F),j=r(h),V=r(j);rt(V,{class:"h-5 w-5 text-primary"}),T(2),s(j);var U=o(j,2);ee(U,{type:"secondary",onclick:Ge,get disabled(){return e(te)},children:(G,u)=>{var v=xt(),D=_(v);Ce(D,{class:"mr-2 h-4 w-4"});var z=o(D);P(()=>p(z,` ${e(te)?"Exporting...":"Export Data"}`)),n(G,v)},$$slots:{default:!0}}),s(h);var M=o(h,2);{var W=G=>{var u=ht(),v=o(r(u),2),D=r(v),z=o(D);{var pe=C=>{var b=gt(),ye=o(_(b));P(oe=>p(ye,`Expires: ${oe??""}`),[()=>re(e(L).expires_at)]),n(C,b)};H(z,C=>{e(L).expires_at&&C(pe)})}s(v);var y=o(v,2);{var q=C=>{ee(C,{type:"primary",onclick:()=>{var b;return window.open((b=e(L))==null?void 0:b.download_url,"_blank")},children:(b,ye)=>{var oe=$t(),Be=_(oe);Ce(Be,{class:"mr-2 h-4 w-4"}),T(),n(b,oe)},$$slots:{default:!0}})};H(y,C=>{e(L).download_url&&C(q)})}s(u),P(()=>p(D,`Format: ${e(L).format??""} `)),n(G,u)};H(M,G=>{e(L)&&G(W)})}var B=o(M,2),N=r(B),J=r(N);nt(J,{class:"h-5 w-5 text-red-500"}),T(2),s(N);var X=o(N,2);ee(X,{type:"danger",onclick:Se,children:(G,u)=>{var v=yt(),D=_(v);st(D,{class:"mr-2 h-4 w-4"}),T(),n(G,v)},$$slots:{default:!0}}),s(B),s(F),n(A,E)},$$slots:{default:!0}}),n(S,c)};H(k,S=>{e(m)&&S($)},!0)}n(a,l)};H(Ie,a=>{e(I)?a(Te):a(Le,!1)})}s(ie);var Me=o(ie,2);{let a=me(()=>e(le)?"Deleting...":"Delete All Data");Qe(Me,{title:"Delete Contact Data",description:"This will permanently delete all data associated with this contact. This action cannot be undone.",get actionLabel(){return e(a)},actionType:"danger",onAction:je,onCancel:()=>{t(Z,!1)},get open(){return e(Z)},set open(l){t(Z,l,!0)},children:(l,k)=>{var $=Dt(),S=r($),c=r(S);Je(c),T(2),s(S),s($),Ve(c,()=>e(de),w=>t(de,w)),n(l,$)},$$slots:{default:!0}})}n(Y,xe),qe()}export{Ot as component};
