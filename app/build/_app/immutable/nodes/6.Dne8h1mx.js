import"../chunks/DsnmJJEf.js";import{f as J,p as ct,u as Re,b as s,s as M,c as a,i as e,r as t,h as r,j as ce,t as $,d as vt,n as de,a as tt,l as At,$ as Tt,g as Lt}from"../chunks/EWi02PFm.js";import{d as ut,s as g,e as Bt}from"../chunks/CMlTvFs1.js";import{s as Et}from"../chunks/CYBLM2wj.js";import{l as Fe,s as Ge,p as Rt,i as I,c as at}from"../chunks/Bv3BEGQz.js";import{e as Se,s as q,a as pe,i as Ce}from"../chunks/BU0M2qTC.js";import{c as me,a as n,f as p,t as Ee}from"../chunks/m1NGduc7.js";import{h as Ft}from"../chunks/lEmZmbJU.js";import{s as pt,a as mt}from"../chunks/P1cg2ZFr.js";import{g as ue}from"../chunks/CvqyqS9e.js";import{p as bt}from"../chunks/DiWfGYld.js";import"../chunks/BBXvuiDC.js";import{a as De,s as He,F as Gt,M as Dt,I as rt,B as st,A as Ht,X as Kt,e as ot}from"../chunks/DDdH-etX.js";import{S as Xt}from"../chunks/CiH3KQEb.js";import{U as Yt}from"../chunks/DmOa8iwi.js";import{T as qt}from"../chunks/B50D8VDs.js";import{S as Jt}from"../chunks/CJ1Fwzia.js";import{M as lt}from"../chunks/BgBLc175.js";import{C as Qt}from"../chunks/ClqnK_AS.js";import{A as Vt}from"../chunks/ByYQ1gGe.js";import{g as Zt,l as ea,c as ta}from"../chunks/DtWifhjl.js";import{g as aa,l as ra}from"../chunks/CuiFJ7Vr.js";import{C as nt}from"../chunks/B9HQ-DGQ.js";import{M as sa}from"../chunks/UzPTBASM.js";import{P as it}from"../chunks/6kjRXbF2.js";function oa(B,m){const E=Fe(m,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"M4.929 4.929 19.07 19.071"}],["circle",{cx:"12",cy:"12",r:"10"}]];De(B,Ge({name:"ban"},()=>E,{get iconNode(){return D},children:(H,c)=>{var S=me(),v=J(S);He(v,m,"default",{}),n(H,S)},$$slots:{default:!0}}))}function la(B,m){const E=Fe(m,["children","$$slots","$$events","$$legacy"]);const D=[["path",{d:"m15 18-6-6 6-6"}]];De(B,Ge({name:"chevron-left"},()=>E,{get iconNode(){return D},children:(H,c)=>{var S=me(),v=J(S);He(v,m,"default",{}),n(H,S)},$$slots:{default:!0}}))}function na(B,m){const E=Fe(m,["children","$$slots","$$events","$$legacy"]);const D=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];De(B,Ge({name:"layout-dashboard"},()=>E,{get iconNode(){return D},children:(H,c)=>{var S=me(),v=J(S);He(v,m,"default",{}),n(H,S)},$$slots:{default:!0}}))}const ia=async({params:B})=>({orgSlug:B.orgSlug}),ar=Object.freeze(Object.defineProperty({__proto__:null,load:ia},Symbol.toStringTag,{value:"Module"}));var da=p('<a class="sidebar-brand"><!> <span class="sidebar-brand-text"> </span></a>'),ca=p('<a class="sidebar-brand-icon"><!></a>'),va=p('<span class="sidebar-label"> </span>'),ua=p("<a><!> <!></a>"),pa=p('<span class="sidebar-label"> </span>'),ma=p("<a><!> <!></a>"),ba=p('<!> <span class="sidebar-label">Collapse</span>',1),fa=p('<aside><div class="sidebar-header"><!></div> <nav class="sidebar-nav"></nav> <div class="flex-1"></div> <nav class="sidebar-nav sidebar-nav-bottom"><!> <button class="sidebar-collapse-btn"><!></button></nav></aside>');function dt(B,m){ct(m,!0);const E=()=>mt(bt,"$page",D),[D,H]=pt(),c=Rt(m,"orgName",3,"Outlet"),S="sidebar-collapsed";let v=M(!1);Re(()=>{{const d=localStorage.getItem(S);s(v,d==="true")}});function le(){s(v,!e(v)),localStorage.setItem(S,String(e(v)))}let C=ce(()=>`/${m.orgSlug}`);const K=[{id:"dashboard",label:"Dashboard",href:"",icon:na,exact:!0},{id:"campaigns",label:"Campaigns",href:"/campaigns",icon:Xt},{id:"lists",label:"Lists",href:"/lists",icon:Yt},{id:"templates",label:"Templates",href:"/templates",icon:Gt},{id:"housekeeping",label:"Housekeeping",href:"/housekeeping",icon:qt},{id:"blocklist",label:"Blocklist",href:"/blocklist",icon:oa}],N=[{id:"settings",label:"Settings",href:"/settings",icon:Jt}];function P(d,l=!1){const h=`${e(C)}${d}`;return l?E().url.pathname===h||E().url.pathname===h+"/":E().url.pathname.startsWith(h)&&h!==e(C)}var F=fa();let G;var A=a(F),ee=a(A);{var te=d=>{var l=da(),h=a(l);lt(h,{class:"h-6 w-6 text-primary"});var w=r(h,2),i=a(w,!0);t(w),t(l),$(()=>{q(l,"href",e(C)),g(i,c())}),n(d,l)},Oe=d=>{var l=ca(),h=a(l);lt(h,{class:"h-6 w-6 text-primary"}),t(l),$(()=>q(l,"href",e(C))),n(d,l)};I(ee,d=>{e(v)?d(Oe,!1):d(te)})}t(A);var ne=r(A,2);Se(ne,21,()=>K,Ce,(d,l)=>{const h=ce(()=>e(l).icon);var w=ua();let i;var _=a(w);at(_,()=>e(h),(u,x)=>{x(u,{class:"sidebar-icon"})});var T=r(_,2);{var L=u=>{var x=va(),y=a(x,!0);t(x),$(()=>g(y,e(l).label)),n(u,x)};I(T,u=>{e(v)||u(L)})}t(w),$(u=>{q(w,"href",`${e(C)??""}${e(l).href??""}`),i=pe(w,1,"sidebar-link",null,i,u),q(w,"title",e(v)?e(l).label:void 0)},[()=>({active:P(e(l).href,e(l).exact)})]),n(d,w)}),t(ne);var ve=r(ne,4),be=a(ve);Se(be,17,()=>N,Ce,(d,l)=>{const h=ce(()=>e(l).icon);var w=ma();let i;var _=a(w);at(_,()=>e(h),(u,x)=>{x(u,{class:"sidebar-icon"})});var T=r(_,2);{var L=u=>{var x=pa(),y=a(x,!0);t(x),$(()=>g(y,e(l).label)),n(u,x)};I(T,u=>{e(v)||u(L)})}t(w),$(u=>{q(w,"href",`${e(C)??""}${e(l).href??""}`),i=pe(w,1,"sidebar-link",null,i,u),q(w,"title",e(v)?e(l).label:void 0)},[()=>({active:P(e(l).href)})]),n(d,w)});var ae=r(be,2);ae.__click=le;var ze=a(ae);{var Ie=d=>{Qt(d,{class:"h-4 w-4"})},fe=d=>{var l=ba(),h=J(l);la(h,{class:"h-4 w-4"}),de(2),n(d,l)};I(ze,d=>{e(v)?d(Ie):d(fe,!1)})}t(ae),t(ve),t(F),$(()=>{G=pe(F,1,"sidebar",null,G,{collapsed:e(v)}),q(ae,"title",e(v)?"Expand sidebar":"Collapse sidebar")}),n(B,F),vt(),H()}ut(["click"]);var ga=p('<meta name="robots" content="noindex, nofollow"/>'),_a=p('<div class="min-h-screen bg-base-50 flex items-center justify-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),xa=p('<div class="min-h-screen bg-base-50 flex items-center justify-center"><div class="text-error"> </div></div>'),ha=p('<button><span class="flex items-center justify-center h-8 w-8 rounded-md text-xs font-semibold text-white bg-primary flex-shrink-0"> </span> <span class="flex-1 text-sm font-medium text-text truncate"> </span> <!></button>'),wa=p('<div class="absolute left-1/2 -translate-x-1/2 top-full mt-2 w-64 rounded-lg shadow-lg py-1 z-50 bg-white border border-base-200"><div class="px-3 py-2 border-b border-border"><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Workspaces</p></div> <div class="max-h-64 overflow-y-auto"></div> <div class="border-t border-border mt-1 pt-1"><button class="w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100 text-text-muted hover:text-text"><span class="flex items-center justify-center h-8 w-8 rounded-md border-2 border-dashed border-base-300 flex-shrink-0"><!></span> <span class="text-sm">Add workspace</span></button></div></div>'),ya=p('<div class="absolute right-0 top-full mt-2 w-56 rounded-lg shadow-lg py-1 z-50 bg-white border border-base-200"><div class="px-4 py-3 border-b border-border"><p class="text-sm font-medium text-text truncate"> </p></div> <a class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900">Settings</a> <div class="border-t border-border my-1"></div> <button class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900 w-full text-left">Switch Workspace</button> <button class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900 w-full text-left">Sign out</button></div>'),ka=p('<div class="fixed inset-0 z-40 bg-black/50 md:hidden" role="button" tabindex="-1"></div> <div class="fixed inset-y-0 left-0 z-50 w-[220px] md:hidden"><!></div>',1),$a=p('<button><span class="flex items-center justify-center h-8 w-8 rounded-md text-xs font-semibold text-white bg-primary flex-shrink-0"> </span> <span class="flex-1 text-sm font-medium text-text truncate"> </span> <!></button>'),Sa=p('<div class="absolute right-0 top-full mt-2 w-64 rounded-lg shadow-lg py-1 z-50 bg-white border border-base-200"><div class="px-3 py-2 border-b border-border"><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Workspaces</p></div> <div class="max-h-64 overflow-y-auto"></div> <div class="border-t border-border mt-1 pt-1"><button class="w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100 text-text-muted hover:text-text"><span class="flex items-center justify-center h-8 w-8 rounded-md border-2 border-dashed border-base-300 flex-shrink-0"><!></span> <span class="text-sm">Add workspace</span></button></div></div>'),Ca=p('<div class="absolute right-0 top-full mt-2 w-56 rounded-lg shadow-lg py-1 z-50 bg-white border border-base-200"><div class="px-4 py-3 border-b border-border"><p class="text-sm font-medium text-text truncate"> </p> <p class="text-xs text-text-muted capitalize"> </p></div> <a class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900">Settings</a> <div class="border-t border-border my-1"></div> <button class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900 w-full text-left">Switch Workspace</button> <button class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900 w-full text-left">Sign out</button></div>'),Oa=p('<div class="admin-layout"><div class="admin-sidebar hidden md:block"><!></div> <div class="fixed top-0 left-0 right-0 h-14 px-4 flex items-center justify-between z-40 border-b border-base-200 bg-white md:hidden"><button class="p-2 rounded-lg transition-colors text-text-muted hover:bg-base-100"><!></button> <div class="workspace-switcher relative"><button class="flex items-center gap-1 font-semibold text-text"> <!></button> <!></div> <div class="user-menu-container relative"><button class="flex items-center gap-2 p-1 rounded-lg transition-colors hover:bg-base-100"><div class="flex items-center justify-center h-8 w-8 rounded-full text-sm font-medium text-white bg-primary"> </div></button> <!></div></div> <!> <div class="admin-main"><header class="h-16 px-6 items-center justify-end border-b border-base-200 sticky top-0 z-20 bg-white hidden md:flex"><div class="flex items-center gap-4"><div class="workspace-switcher relative"><button class="flex items-center gap-2 px-2 py-1.5 rounded-lg transition-colors hover:bg-base-100 group"><span class="flex items-center justify-center h-7 w-7 rounded-md text-xs font-semibold text-white bg-primary"> </span> <span class="font-medium text-sm"> </span> <!></button> <!></div> <div class="user-menu-container relative"><button class="flex items-center gap-2 p-1 rounded-lg transition-colors hover:bg-base-100"><div class="flex items-center justify-center h-8 w-8 rounded-full text-sm font-medium text-white bg-primary"> </div> <span class="text-sm text-text-muted hidden lg:block"> </span></button> <!></div></div></header> <main class="flex-1"><!></main></div></div>'),za=p("<!> <!>",1),Ia=p('<div class="space-y-4"><!> <div><label for="workspace-name" class="block text-sm font-medium text-text mb-1">Workspace Name</label> <!></div> <div><label for="workspace-slug" class="block text-sm font-medium text-text mb-1">URL Slug</label> <!> <p class="text-xs text-text-muted mt-1"> </p></div></div>'),Pa=p("<!> <!>",1);function rr(B,m){ct(m,!0);const E=()=>mt(bt,"$page",D),[D,H]=pt();let c=M(null),S=M(tt([])),v=M(!0),le=M(""),C=tt(aa()),K=M(!1),N=M(!1),P=M(!1),F=M(!1),G=M(""),A=M(""),ee=M(!1),te=M("");Re(()=>{Oe()}),Re(()=>{E().url.pathname,s(K,!1)});async function Oe(){s(v,!0),s(le,"");try{const[i,_]=await Promise.all([Zt({},m.data.orgSlug),ea()]);s(c,i,!0),s(S,_.organizations||[],!0),localStorage.setItem("currentOrgId",e(c).id),localStorage.setItem("currentOrgName",e(c).name),localStorage.setItem("currentOrgSlug",e(c).slug);const T=localStorage.getItem(`orgSetupSkipped_${e(c).slug}`);if(!e(c).from_email&&!T){ue(`/${e(c).slug}/welcome`);return}}catch(i){console.error("Failed to load organization:",i),s(le,`Organization "${m.data.orgSlug}" not found`),ue("/")}finally{s(v,!1)}}function ne(){localStorage.removeItem("currentOrgId"),localStorage.removeItem("currentOrgName"),localStorage.removeItem("currentOrgSlug"),ue("/")}function ve(){ra()}function be(i){const _=i.target;_.closest(".user-menu-container")||s(N,!1),_.closest(".workspace-switcher")||s(P,!1)}function ae(i){s(P,!1),ue(`/${i}`)}function ze(i){return i.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}function Ie(){s(A,ze(e(G)),!0)}function fe(){s(P,!1),s(G,""),s(A,""),s(te,""),s(F,!0)}async function d(){if(!(!e(G).trim()||!e(A).trim())){s(ee,!0),s(te,"");try{const i=await ta({name:e(G).trim(),slug:e(A).trim()});s(F,!1),ue(`/${i.slug}/welcome`)}catch(i){s(te,i.message||"Failed to create workspace",!0)}finally{s(ee,!1)}}}var l=Pa();Ft("1on96hz",i=>{var _=ga();At(()=>{Lt.title=`${(e(c)?.name||"Admin")??""} | Outlet`}),n(i,_)}),Bt("click",Tt,be);var h=J(l);Vt(h,{children:(i,_)=>{var T=me(),L=J(T);{var u=y=>{var X=_a();n(y,X)},x=y=>{var X=me(),re=J(X);{var ge=Q=>{var O=xa(),V=a(O),xe=a(V,!0);t(V),t(O),$(()=>g(xe,e(le))),n(Q,O)},_e=Q=>{var O=Oa(),V=a(O),xe=a(V);{let o=ce(()=>e(c)?.name);dt(xe,{get orgSlug(){return m.data.orgSlug},get orgName(){return e(o)}})}t(V);var ie=r(V,2),he=a(ie);he.__click=()=>s(K,!e(K));var ft=a(he);{var gt=o=>{Kt(o,{class:"h-6 w-6"})},_t=o=>{sa(o,{class:"h-6 w-6"})};I(ft,o=>{e(K)?o(gt):o(_t,!1)})}t(he);var Pe=r(he,2),we=a(Pe);we.__click=o=>{o.stopPropagation(),s(N,!1),s(P,!e(P))};var Ke=a(we),xt=r(Ke);nt(xt,{class:"h-4 w-4 text-text-muted"}),t(we);var ht=r(we,2);{var wt=o=>{var f=wa(),b=r(a(f),2);Se(b,21,()=>e(S),Ce,(Y,W)=>{var U=ha();U.__click=()=>ae(e(W).slug);var se=a(U),Ae=a(se,!0);t(se);var oe=r(se,2),Te=a(oe,!0);t(oe);var Le=r(oe,2);{var Be=R=>{ot(R,{class:"h-4 w-4 text-primary flex-shrink-0"})};I(Le,R=>{e(W).id===e(c)?.id&&R(Be)})}t(U),$(R=>{pe(U,1,`w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100 ${e(W).id===e(c)?.id?"bg-base-50":""}`),g(Ae,R),g(Te,e(W).name)},[()=>e(W).name[0].toUpperCase()]),n(Y,U)}),t(b);var z=r(b,2),j=a(z);j.__click=fe;var k=a(j),Z=a(k);it(Z,{class:"h-4 w-4"}),t(k),de(2),t(j),t(z),t(f),n(o,f)};I(ht,o=>{e(P)&&o(wt)})}t(Pe);var Xe=r(Pe,2),ye=a(Xe);ye.__click=o=>{o.stopPropagation(),s(P,!1),s(N,!e(N))};var Ye=a(ye),yt=a(Ye,!0);t(Ye),t(ye);var kt=r(ye,2);{var $t=o=>{var f=ya(),b=a(f),z=a(b),j=a(z,!0);t(z),t(b);var k=r(b,2);k.__click=()=>s(N,!1);var Z=r(k,4);Z.__click=ne;var Y=r(Z,2);Y.__click=ve,t(f),$(()=>{g(j,C?.email),q(k,"href",`/${m.data.orgSlug??""}/settings`)}),n(o,f)};I(kt,o=>{e(N)&&o($t)})}t(Xe),t(ie);var qe=r(ie,2);{var St=o=>{var f=ka(),b=J(f);b.__click=()=>s(K,!1),b.__keydown=k=>k.key==="Escape"&&s(K,!1);var z=r(b,2),j=a(z);{let k=ce(()=>e(c)?.name);dt(j,{get orgSlug(){return m.data.orgSlug},get orgName(){return e(k)}})}t(z),n(o,f)};I(qe,o=>{e(K)&&o(St)})}var Je=r(qe,2),We=a(Je),Qe=a(We),Ne=a(Qe),ke=a(Ne);ke.__click=o=>{o.stopPropagation(),s(N,!1),s(P,!e(P))};var je=a(ke),Ct=a(je,!0);t(je);var Ue=r(je,2),Ot=a(Ue,!0);t(Ue);var zt=r(Ue,2);nt(zt,{class:"h-4 w-4 text-text-muted group-hover:text-text transition-colors"}),t(ke);var It=r(ke,2);{var Pt=o=>{var f=Sa(),b=r(a(f),2);Se(b,21,()=>e(S),Ce,(Y,W)=>{var U=$a();U.__click=()=>ae(e(W).slug);var se=a(U),Ae=a(se,!0);t(se);var oe=r(se,2),Te=a(oe,!0);t(oe);var Le=r(oe,2);{var Be=R=>{ot(R,{class:"h-4 w-4 text-primary flex-shrink-0"})};I(Le,R=>{e(W).id===e(c)?.id&&R(Be)})}t(U),$(R=>{pe(U,1,`w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100 ${e(W).id===e(c)?.id?"bg-base-50":""}`),g(Ae,R),g(Te,e(W).name)},[()=>e(W).name[0].toUpperCase()]),n(Y,U)}),t(b);var z=r(b,2),j=a(z);j.__click=fe;var k=a(j),Z=a(k);it(Z,{class:"h-4 w-4"}),t(k),de(2),t(j),t(z),t(f),n(o,f)};I(It,o=>{e(P)&&o(Pt)})}t(Ne);var Ve=r(Ne,2),$e=a(Ve);$e.__click=o=>{o.stopPropagation(),s(P,!1),s(N,!e(N))};var Me=a($e),Wt=a(Me,!0);t(Me);var Ze=r(Me,2),Nt=a(Ze,!0);t(Ze),t($e);var jt=r($e,2);{var Ut=o=>{var f=Ca(),b=a(f),z=a(b),j=a(z,!0);t(z);var k=r(z,2),Z=a(k,!0);t(k),t(b);var Y=r(b,2);Y.__click=()=>s(N,!1);var W=r(Y,4);W.__click=ne;var U=r(W,2);U.__click=ve,t(f),$(()=>{g(j,C?.email),g(Z,C?.role||"user"),q(Y,"href",`/${m.data.orgSlug??""}/settings`)}),n(o,f)};I(jt,o=>{e(N)&&o(Ut)})}t(Ve),t(Qe),t(We);var et=r(We,2),Mt=a(et);Et(Mt,()=>m.children),t(et),t(Je),t(O),$((o,f,b)=>{g(Ke,`${(e(c)?.name||"Outlet")??""} `),g(yt,o),g(Ct,f),g(Ot,e(c)?.name||"Organization"),g(Wt,b),g(Nt,C?.email)},[()=>(C?.name||C?.email||"U")[0].toUpperCase(),()=>(e(c)?.name||"O")[0].toUpperCase(),()=>(C?.name||C?.email||"U")[0].toUpperCase()]),n(Q,O)};I(re,Q=>{e(le)?Q(ge):Q(_e,!1)},!0)}n(y,X)};I(L,y=>{e(v)?y(u):y(x,!1)})}n(i,T)},$$slots:{default:!0}});var w=r(h,2);Dt(w,{title:"Create Workspace",get show(){return e(F)},set show(_){s(F,_,!0)},footer:_=>{var T=za(),L=J(T);st(L,{type:"secondary",onclick:()=>s(F,!1),get disabled(){return e(ee)},children:(x,y)=>{de();var X=Ee("Cancel");n(x,X)},$$slots:{default:!0}});var u=r(L,2);{let x=ce(()=>!e(G).trim()||!e(A).trim()||e(ee));st(u,{type:"primary",onclick:d,get disabled(){return e(x)},children:(y,X)=>{de();var re=Ee();$(()=>g(re,e(ee)?"Creating...":"Create Workspace")),n(y,re)},$$slots:{default:!0}})}n(_,T)},children:(_,T)=>{var L=Ia(),u=a(L);{var x=O=>{Ht(O,{type:"error",children:(V,xe)=>{de();var ie=Ee();$(()=>g(ie,e(te))),n(V,ie)},$$slots:{default:!0}})};I(u,O=>{e(te)&&O(x)})}var y=r(u,2),X=r(a(y),2);rt(X,{id:"workspace-name",oninput:Ie,placeholder:"My Company",get value(){return e(G)},set value(O){s(G,O,!0)}}),t(y);var re=r(y,2),ge=r(a(re),2);rt(ge,{id:"workspace-slug",placeholder:"my-company",get value(){return e(A)},set value(O){s(A,O,!0)}});var _e=r(ge,2),Q=a(_e);t(_e),t(re),t(L),$(()=>g(Q,`This will be used in the URL: /${(e(A)||"my-company")??""}`)),n(_,L)},$$slots:{footer:!0,default:!0}}),n(B,l),vt(),H()}ut(["click","keydown"]);export{rr as component,ar as universal};
