import"../chunks/DsnmJJEf.js";import{f as j,p as Jt,a as ft,s as J,u as Xt,b as F,t as g,d as Zt,m as te,h as s,c as e,i as a,g as ee,r as t,j as X,n as R}from"../chunks/odI--4Kw.js";import{d as ae,s as b}from"../chunks/BNMK9zrr.js";import{c as $t,a as v,f as u,t as jt}from"../chunks/CCInJaqd.js";import{l as Lt,s as At,i as H}from"../chunks/COaB7F5h.js";import{s as k,e as Ct,i as Nt}from"../chunks/BohEjZuL.js";import{h as se}from"../chunks/hUjpWz_l.js";import"../chunks/BqKO_3W0.js";import{b as Mt}from"../chunks/Bt-Xh7oU.js";import{a as Dt,s as Ot,C as S,T as Rt}from"../chunks/D_7vKuD1.js";import{L as re}from"../chunks/D716f0vp.js";import{B as zt}from"../chunks/BD7k7D4N.js";import{ak as ie,w as le,ad as oe}from"../chunks/DsZuZzfy.js";import{g as de}from"../chunks/CuiFJ7Vr.js";import{R as ne}from"../chunks/CQ1n2zyf.js";import{M as gt}from"../chunks/CQcKoRKH.js";import{P as ve}from"../chunks/BWeRMZqn.js";import{U as ht}from"../chunks/Dhv-QKBU.js";import{S as bt}from"../chunks/RTXBhc-W.js";import"../chunks/B9hjHVe6.js";import{A as It}from"../chunks/DqfeHRq9.js";function ce(K,z){const h=Lt(z,["children","$$slots","$$events","$$legacy"]);const B=[["path",{d:"M14 4.1 12 6"}],["path",{d:"m5.1 8-2.9-.8"}],["path",{d:"m6 12-1.9 2"}],["path",{d:"M7.2 2.2 8 5.1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"}]];Dt(K,At({name:"mouse-pointer-click"},()=>h,{get iconNode(){return B},children:(C,$)=>{var P=$t(),L=j(P);Ot(L,z,"default",{}),v(C,P)},$$slots:{default:!0}}))}function me(K,z){const h=Lt(z,["children","$$slots","$$events","$$legacy"]);const B=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];Dt(K,At({name:"user-minus"},()=>h,{get iconNode(){return B},children:(C,$)=>{var P=$t(),L=j(P);Ot(L,z,"default",{}),v(C,P)},$$slots:{default:!0}}))}var pe=u('<div class="flex items-center justify-center h-64"><!></div>'),xe=u('<!> <h2 class="text-xl font-semibold text-text mb-2">Get started with email</h2> <p class="text-text-muted mb-6 max-w-md mx-auto">Create your first email list to start collecting subscribers and sending campaigns.</p> <div class="flex justify-center gap-3"><a class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-white font-medium hover:bg-primary/90 transition-colors"><!> Create a List</a></div>',1),ue=u('<div class="flex items-start justify-between"><div><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Subscribers</p> <p class="text-2xl font-bold text-text mt-1"> </p> <p class="text-xs text-text-muted mt-1"> </p></div> <div class="p-2 bg-blue-100 rounded-lg"><!></div></div>'),_e=u('<div class="flex items-start justify-between"><div><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Emails Sent</p> <p class="text-2xl font-bold text-text mt-1"> </p> <p class="text-xs text-text-muted mt-1">All time</p></div> <div class="p-2 bg-green-100 rounded-lg"><!></div></div>'),fe=u('<div class="flex items-start justify-between"><div><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Open Rate</p> <p class="text-2xl font-bold text-text mt-1"> </p> <p class="text-xs text-text-muted mt-1"> </p></div> <div class="p-2 bg-purple-100 rounded-lg"><!></div></div>'),ge=u('<div class="flex items-start justify-between"><div><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Click Rate</p> <p class="text-2xl font-bold text-text mt-1"> </p> <p class="text-xs text-text-muted mt-1"> </p></div> <div class="p-2 bg-cyan-100 rounded-lg"><!></div></div>'),he=u('<div class="p-2 bg-amber-100 rounded-lg"><!></div> <div><p class="text-sm font-medium text-text"> </p> <p class="text-xs text-text-muted">Bounced</p></div>',1),be=u('<div class="p-2 bg-red-100 rounded-lg"><!></div> <div><p class="text-sm font-medium text-text"> </p> <p class="text-xs text-text-muted">Complaints</p></div>',1),$e=u('<div class="p-2 bg-gray-100 rounded-lg"><!></div> <div><p class="text-sm font-medium text-text"> </p> <p class="text-xs text-text-muted">Unsubscribed</p></div>',1),we=u('<div class="grid grid-cols-3 gap-4"><!> <!> <!></div>'),ye=u('<p class="text-xs text-text-muted truncate"> </p>'),ke=u('<a class="flex items-center justify-between py-2 hover:bg-bg-secondary -mx-2 px-2 rounded-lg transition-colors"><div class="min-w-0"><p class="text-sm font-medium text-text truncate"> </p> <!></div> <div class="flex items-center gap-2 ml-4"><!></div></a>'),Pe=u('<div class="space-y-3"></div>'),Se=u('<div class="text-center py-6"><!> <p class="text-sm text-text-muted">No lists yet</p> <a class="text-sm text-primary hover:underline mt-1 inline-block">Create your first list</a></div>'),je=u('<div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-text">Email Lists</h2> <a class="text-sm font-medium text-primary hover:underline flex items-center gap-1">View all <!></a></div> <!>',1),Ce=u('<a class="flex items-center justify-between py-2 hover:bg-bg-secondary -mx-2 px-2 rounded-lg transition-colors"><div class="min-w-0"><p class="text-sm font-medium text-text truncate"> </p> <p class="text-xs text-text-muted truncate"> </p></div> <div class="flex items-center gap-2 ml-4"><!></div></a>'),Ne=u('<div class="space-y-3"></div>'),Me=u('<div class="text-center py-6"><!> <p class="text-sm text-text-muted">No campaigns yet</p> <a class="text-sm text-primary hover:underline mt-1 inline-block">Create your first campaign</a></div>'),Re=u('<div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-text">Recent Campaigns</h2> <a class="text-sm font-medium text-primary hover:underline flex items-center gap-1">View all <!></a></div> <!>',1),ze=u('<h2 class="text-lg font-semibold text-text mb-4">Quick Actions</h2> <div class="grid grid-cols-2 sm:grid-cols-4 gap-3"><a class="flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-bg-secondary transition-colors"><div class="p-2 bg-green-100 rounded-lg"><!></div> <div><p class="text-sm font-medium text-text">New Campaign</p> <p class="text-xs text-text-muted">Send emails</p></div></a> <a class="flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-bg-secondary transition-colors"><div class="p-2 bg-blue-100 rounded-lg"><!></div> <div><p class="text-sm font-medium text-text">Manage Lists</p> <p class="text-xs text-text-muted">Subscribers</p></div></a> <a class="flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-bg-secondary transition-colors"><div class="p-2 bg-amber-100 rounded-lg"><!></div> <div><p class="text-sm font-medium text-text">Templates</p> <p class="text-xs text-text-muted">Email designs</p></div></a></div>',1),Ie=u('<div class="grid grid-cols-2 lg:grid-cols-4 gap-4"><a class="block"><!></a> <a class="block"><!></a> <a class="block"><!></a> <a class="block"><!></a></div> <!> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!>',1),Le=u('<div class="p-6 space-y-6 max-w-6xl mx-auto"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-semibold text-text"> </h1> <p class="mt-1 text-sm text-text-muted"> </p></div> <button class="p-2 rounded-lg hover:bg-bg-secondary transition-colors" title="Refresh"><!></button></div> <!></div>');function aa(K,z){Jt(z,!0);let h=X(()=>z.data.brandSlug?`/${z.data.brandSlug}`:""),B=ft(de()),C=J(!0),$=J(null),P=J(ft([])),L=J(ft([])),it=J("");Xt(()=>{wt()});async function wt(){F(C,!0);try{if(!(Mt?localStorage.getItem("currentOrgId"):null)){F(C,!1);return}const[N,Q,vt]=await Promise.all([ie({}).catch(()=>null),le().catch(()=>({lists:[]})),oe({limit:5}).catch(()=>({campaigns:[]}))]);F($,N,!0),F(P,Q?.lists||[],!0),F(L,(vt?.campaigns||[]).slice(0,5),!0);const ct=Mt?localStorage.getItem("currentOrgName"):null;F(it,ct||"Your Organization",!0)}catch(c){console.error("Failed to load dashboard data:",c)}finally{F(C,!1)}}function I(c){return c==null?"0":c>=1e6?(c/1e6).toFixed(1)+"M":c>=1e3?(c/1e3).toFixed(1)+"K":c.toString()}function yt(c){return c==null?"0%":c.toFixed(1)+"%"}let Ut=X(()=>a(P).reduce((c,N)=>c+(N.subscriber_count||0),0)),Et=X(()=>a(P).length>0||a($)&&a($).total_sent>0);var lt=Le();se("1kkp5zj",c=>{te(()=>{ee.title=`Dashboard - ${(a(it)||"Admin")??""}`})});var ot=e(lt),dt=e(ot),nt=e(dt),Ft=e(nt);t(nt);var kt=s(nt,2),Bt=e(kt,!0);t(kt),t(dt);var Z=s(dt,2);Z.__click=wt;var Tt=e(Z);{let c=X(()=>a(C)?"animate-spin":"");ne(Tt,{get class(){return`h-5 w-5 text-text-muted ${a(c)??""}`}})}t(Z),t(ot);var Vt=s(ot,2);{var Gt=c=>{var N=pe(),Q=e(N);re(Q,{size:"large"}),t(N),v(c,N)},Ht=c=>{var N=$t(),Q=j(N);{var vt=T=>{S(T,{class:"text-center py-12",children:(tt,et)=>{var A=xe(),at=j(A);gt(at,{class:"h-12 w-12 text-text-muted mx-auto mb-4"});var D=s(at,6),W=e(D),V=e(W);ve(V,{class:"h-4 w-4"}),R(),t(W),t(D),g(()=>k(W,"href",`${a(h)??""}/lists`)),v(tt,A)},$$slots:{default:!0}})},ct=T=>{var tt=Ie(),et=j(tt),A=e(et),at=e(A);S(at,{class:"hover:shadow-md transition-shadow cursor-pointer",children:(w,M)=>{var d=ue(),i=e(d),l=s(e(i),2),_=e(l,!0);t(l);var f=s(l,2),m=e(f);t(f),t(i);var o=s(i,2),n=e(o);ht(n,{class:"h-5 w-5 text-blue-600"}),t(o),t(d),g(r=>{b(_,r),b(m,`${a(P).length??""} list${a(P).length!==1?"s":""}`)},[()=>I(a(Ut))]),v(w,d)},$$slots:{default:!0}}),t(A);var D=s(A,2),W=e(D);S(W,{class:"hover:shadow-md transition-shadow cursor-pointer",children:(w,M)=>{var d=_e(),i=e(d),l=s(e(i),2),_=e(l,!0);t(l),R(2),t(i);var f=s(i,2),m=e(f);bt(m,{class:"h-5 w-5 text-green-600"}),t(f),t(d),g(o=>b(_,o),[()=>I(a($)?.total_sent)]),v(w,d)},$$slots:{default:!0}}),t(D);var V=s(D,2),Kt=e(V);S(Kt,{class:"hover:shadow-md transition-shadow cursor-pointer",children:(w,M)=>{var d=fe(),i=e(d),l=s(e(i),2),_=e(l,!0);t(l);var f=s(l,2),m=e(f);t(f),t(i);var o=s(i,2),n=e(o);gt(n,{class:"h-5 w-5 text-purple-600"}),t(o),t(d),g((r,p)=>{b(_,r),b(m,`${p??""} opened`)},[()=>yt(a($)?.open_rate),()=>I(a($)?.total_opened)]),v(w,d)},$$slots:{default:!0}}),t(V);var mt=s(V,2),Qt=e(mt);S(Qt,{class:"hover:shadow-md transition-shadow cursor-pointer",children:(w,M)=>{var d=ge(),i=e(d),l=s(e(i),2),_=e(l,!0);t(l);var f=s(l,2),m=e(f);t(f),t(i);var o=s(i,2),n=e(o);ce(n,{class:"h-5 w-5 text-cyan-600"}),t(o),t(d),g((r,p)=>{b(_,r),b(m,`${p??""} clicked`)},[()=>yt(a($)?.click_rate),()=>I(a($)?.total_clicked)]),v(w,d)},$$slots:{default:!0}}),t(mt),t(et);var Pt=s(et,2);{var Wt=w=>{var M=we(),d=e(M);S(d,{class:"flex items-center gap-3 p-4",children:(_,f)=>{var m=he(),o=j(m),n=e(o);Rt(n,{class:"h-4 w-4 text-amber-600"}),t(o);var r=s(o,2),p=e(r),x=e(p,!0);t(p),R(2),t(r),g(y=>b(x,y),[()=>I(a($).total_bounced)]),v(_,m)},$$slots:{default:!0}});var i=s(d,2);S(i,{class:"flex items-center gap-3 p-4",children:(_,f)=>{var m=be(),o=j(m),n=e(o);Rt(n,{class:"h-4 w-4 text-red-600"}),t(o);var r=s(o,2),p=e(r),x=e(p,!0);t(p),R(2),t(r),g(y=>b(x,y),[()=>I(a($).total_complaints)]),v(_,m)},$$slots:{default:!0}});var l=s(i,2);S(l,{class:"flex items-center gap-3 p-4",children:(_,f)=>{var m=$e(),o=j(m),n=e(o);me(n,{class:"h-4 w-4 text-gray-600"}),t(o);var r=s(o,2),p=e(r),x=e(p,!0);t(p),R(2),t(r),g(y=>b(x,y),[()=>I(a($).total_unsubscribed)]),v(_,m)},$$slots:{default:!0}}),t(M),v(w,M)};H(Pt,w=>{a($)&&(a($).total_bounced>0||a($).total_complaints>0||a($).total_unsubscribed>0)&&w(Wt)})}var pt=s(Pt,2),St=e(pt);S(St,{children:(w,M)=>{var d=je(),i=j(d),l=s(e(i),2),_=s(e(l));It(_,{class:"h-4 w-4"}),t(l),t(i);var f=s(i,2);{var m=n=>{var r=Pe();Ct(r,21,()=>a(P).slice(0,5),Nt,(p,x)=>{var y=ke(),O=e(y),U=e(O),xt=e(U,!0);t(U);var st=s(U,2);{var ut=E=>{var G=ye(),q=e(G,!0);t(G),g(()=>b(q,a(x).description)),v(E,G)};H(st,E=>{a(x).description&&E(ut)})}t(O);var Y=s(O,2),_t=e(Y);zt(_t,{variant:"default",size:"sm",children:(E,G)=>{R();var q=jt();g(rt=>b(q,`${rt??""} subscribers`),[()=>I(a(x).subscriber_count)]),v(E,q)},$$slots:{default:!0}}),t(Y),t(y),g(()=>{k(y,"href",`${a(h)??""}/lists/${a(x).id??""}`),b(xt,a(x).name)}),v(p,y)}),t(r),v(n,r)},o=n=>{var r=Se(),p=e(r);ht(p,{class:"h-8 w-8 text-text-muted mx-auto mb-2"});var x=s(p,4);t(r),g(()=>k(x,"href",`${a(h)??""}/lists`)),v(n,r)};H(f,n=>{a(P).length>0?n(m):n(o,!1)})}g(()=>k(l,"href",`${a(h)??""}/lists`)),v(w,d)},$$slots:{default:!0}});var Yt=s(St,2);S(Yt,{children:(w,M)=>{var d=Re(),i=j(d),l=s(e(i),2),_=s(e(l));It(_,{class:"h-4 w-4"}),t(l),t(i);var f=s(i,2);{var m=n=>{var r=Ne();Ct(r,21,()=>a(L),Nt,(p,x)=>{var y=Ce(),O=e(y),U=e(O),xt=e(U,!0);t(U);var st=s(U,2),ut=e(st,!0);t(st),t(O);var Y=s(O,2),_t=e(Y);{let E=X(()=>a(x).status==="sent"?"success":a(x).status==="draft"?"default":"info");zt(_t,{get variant(){return a(E)},size:"sm",children:(G,q)=>{R();var rt=jt();g(()=>b(rt,a(x).status)),v(G,rt)},$$slots:{default:!0}})}t(Y),t(y),g(()=>{k(y,"href",`${a(h)??""}/campaigns/${a(x).id??""}`),b(xt,a(x).name),b(ut,a(x).subject)}),v(p,y)}),t(r),v(n,r)},o=n=>{var r=Me(),p=e(r);bt(p,{class:"h-8 w-8 text-text-muted mx-auto mb-2"});var x=s(p,4);t(r),g(()=>k(x,"href",`${a(h)??""}/campaigns`)),v(n,r)};H(f,n=>{a(L).length>0?n(m):n(o,!1)})}g(()=>k(l,"href",`${a(h)??""}/campaigns`)),v(w,d)},$$slots:{default:!0}}),t(pt);var qt=s(pt,2);S(qt,{children:(w,M)=>{var d=ze(),i=s(j(d),2),l=e(i),_=e(l),f=e(_);bt(f,{class:"h-4 w-4 text-green-600"}),t(_),R(2),t(l);var m=s(l,2),o=e(m),n=e(o);ht(n,{class:"h-4 w-4 text-blue-600"}),t(o),R(2),t(m);var r=s(m,2),p=e(r),x=e(p);gt(x,{class:"h-4 w-4 text-amber-600"}),t(p),R(2),t(r),t(i),g(()=>{k(l,"href",`${a(h)??""}/campaigns/new`),k(m,"href",`${a(h)??""}/lists`),k(r,"href",`${a(h)??""}/templates`)}),v(w,d)},$$slots:{default:!0}}),g(()=>{k(A,"href",`${a(h)??""}/lists`),k(D,"href",`${a(h)??""}/campaigns`),k(V,"href",`${a(h)??""}/campaigns`),k(mt,"href",`${a(h)??""}/campaigns`)}),v(T,tt)};H(Q,T=>{a(Et)?T(ct,!1):T(vt)},!0)}v(c,N)};H(Vt,c=>{a(C)?c(Gt):c(Ht,!1)})}t(lt),g(c=>{b(Ft,`Welcome back, ${c??""}`),b(Bt,a(it)),Z.disabled=a(C)},[()=>B?.name||B?.email?.split("@")[0]||"there"]),v(K,lt),Zt()}ae(["click"]);export{aa as component};
