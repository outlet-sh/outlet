import"../chunks/DsnmJJEf.js";import{p as ke,a as te,s as x,u as $e,b as r,f as ae,d as Ce,e as We,$ as Oe,g as Pe,c as t,h as s,i as a,r as e,t as z,n as R,j as ze}from"../chunks/EWi02PFm.js";import{d as Se,e as Ue,s as b}from"../chunks/CMlTvFs1.js";import{s as je}from"../chunks/CYBLM2wj.js";import{i as H}from"../chunks/Bv3BEGQz.js";import{s as Ae,e as Le,i as Me}from"../chunks/BU0M2qTC.js";import{f as g,a as n,t as J}from"../chunks/m1NGduc7.js";import{h as Ie}from"../chunks/lEmZmbJU.js";import{g as re}from"../chunks/CvqyqS9e.js";import{g as Ne,l as Be}from"../chunks/CuiFJ7Vr.js";import{A as Fe}from"../chunks/ByYQ1gGe.js";import{l as Re,c as Te}from"../chunks/DtWifhjl.js";import{M as Ee,I as se,A as Ge,B as oe}from"../chunks/DDdH-etX.js";import{C as qe}from"../chunks/B9HQ-DGQ.js";import{P as De}from"../chunks/6kjRXbF2.js";import{S as He}from"../chunks/CJ1Fwzia.js";var Je=g('<meta name="robots" content="noindex, nofollow"/>'),Ke=g('<button class="w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100"><span class="flex items-center justify-center h-8 w-8 rounded-md text-xs font-semibold text-white bg-primary flex-shrink-0"> </span> <span class="flex-1 text-sm font-medium text-text truncate"> </span></button>'),Qe=g('<div class="absolute right-0 top-full mt-2 w-64 rounded-lg shadow-lg py-1 z-50 bg-white border border-base-200"><div class="px-3 py-2 border-b border-border"><p class="text-xs font-medium text-text-muted uppercase tracking-wide">Workspaces</p></div> <div class="max-h-64 overflow-y-auto"></div> <div class="border-t border-border mt-1 pt-1"><button class="w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-base-100 text-text-muted hover:text-text"><span class="flex items-center justify-center h-8 w-8 rounded-md border-2 border-dashed border-base-300 flex-shrink-0"><!></span> <span class="text-sm">Add workspace</span></button></div></div>'),Ve=g('<div class="absolute right-0 z-50 mt-2 w-56 origin-top-right rounded-lg py-1 bg-white border border-base-200 shadow-lg" role="menu" aria-orientation="vertical"><div class="px-4 py-3 border-b border-border"><p class="text-sm font-medium text-text truncate"> </p> <p class="text-xs text-text-muted capitalize"> </p></div> <a href="/settings" class="flex items-center gap-2 px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900" role="menuitem"><!> Settings</a> <div class="border-t border-border my-1"></div> <button class="block px-4 py-2 text-sm transition-colors text-base-700 hover:bg-base-100 hover:text-base-900 w-full text-left" role="menuitem">Sign out</button></div>'),Xe=g('<div class="min-h-screen bg-base-50"><nav class="border-b border-base-200 bg-white"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><div class="flex h-16 justify-between"><div class="flex items-center"><a href="/" class="text-xl font-bold text-primary">Outlet</a></div> <div class="flex items-center space-x-4"><div class="workspace-switcher relative"><button class="flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors hover:bg-base-100 group"><span class="font-medium text-sm">Workspaces</span> <!></button> <!></div> <div class="user-menu-container relative ml-3"><div><button class="flex items-center rounded-full text-sm transition-colors focus:outline-none" aria-haspopup="true"><span class="sr-only">Open user menu</span> <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary text-white"><span class="text-sm font-medium text-white"> </span></div></button></div> <!></div></div></div></div></nav> <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><!></main></div>'),Ye=g("<!> <!>",1),Ze=g('<div class="space-y-4"><!> <div><label for="workspace-name" class="block text-sm font-medium text-text mb-1">Workspace Name</label> <!></div> <div><label for="workspace-slug" class="block text-sm font-medium text-text mb-1">URL Slug</label> <!> <p class="text-xs text-text-muted mt-1"> </p></div></div>'),et=g("<!> <!>",1);function bt(ie,K){ke(K,!0);let S=te(Ne()),_=x(!1),Q=x(te([])),h=x(!1),U=x(!1),w=x(""),u=x(""),j=x(!1),A=x("");$e(()=>{le()});async function le(){try{const o=await Re();r(Q,o.organizations||[],!0)}catch(o){console.error("Failed to load organizations:",o)}}function ne(){Be()}function ce(o){const l=o.target;l.closest(".user-menu-container")||r(_,!1),l.closest(".workspace-switcher")||r(h,!1)}function de(o){r(h,!1),re(`/${o}`)}function pe(o){return o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}function ve(){r(u,pe(a(w)),!0)}function ue(){r(h,!1),r(w,""),r(u,""),r(A,""),r(U,!0)}async function me(){if(!(!a(w).trim()||!a(u).trim())){r(j,!0),r(A,"");try{const o=await Te({name:a(w).trim(),slug:a(u).trim()});r(U,!1),re(`/${o.slug}/welcome`)}catch(o){r(A,o.message||"Failed to create workspace",!0)}finally{r(j,!1)}}}var V=et();Ue("click",Oe,ce),Ie("37xve",o=>{var l=Je();We(()=>{Pe.title="Outlet"}),n(o,l)});var X=ae(V);Fe(X,{children:(o,l)=>{var y=Xe(),c=t(y),k=t(c),m=t(k),v=s(t(m),2),f=t(v),d=t(f);d.__click=i=>{i.stopPropagation(),r(_,!1),r(h,!a(h))};var T=s(t(d),2);qe(T,{class:"h-4 w-4 text-text-muted group-hover:text-text transition-colors"}),e(d);var E=s(d,2);{var G=i=>{var $=Qe(),C=s(t($),2);Le(C,21,()=>a(Q),Me,(O,F)=>{var P=Ke();P.__click=()=>de(a(F).slug);var D=t(P),he=t(D,!0);e(D);var ee=s(D,2),we=t(ee,!0);e(ee),e(P),z(ye=>{b(he,ye),b(we,a(F).name)},[()=>a(F).name[0].toUpperCase()]),n(O,P)}),e(C);var W=s(C,2),N=t(W);N.__click=ue;var B=t(N),q=t(B);De(q,{class:"h-4 w-4"}),e(B),R(2),e(N),e(W),e($),n(i,$)};H(E,i=>{a(h)&&i(G)})}e(f);var p=s(f,2),L=t(p),M=t(L);M.__click=i=>{i.stopPropagation(),r(h,!1),r(_,!a(_))};var I=s(t(M),2),Y=t(I),xe=t(Y,!0);e(Y),e(I),e(M),e(L);var be=s(L,2);{var ge=i=>{var $=Ve(),C=t($),W=t(C),N=t(W,!0);e(W);var B=s(W,2),q=t(B,!0);e(B),e(C);var O=s(C,2);O.__click=()=>r(_,!1);var F=t(O);He(F,{class:"h-4 w-4"}),R(),e(O);var P=s(O,4);P.__click=ne,e($),z(()=>{b(N,S?.name||S?.email),b(q,S?.role)}),n(i,$)};H(be,i=>{a(_)&&i(ge)})}e(p),e(v),e(m),e(k),e(c);var Z=s(c,2),_e=t(Z);je(_e,()=>K.children),e(Z),e(y),z(i=>{Ae(M,"aria-expanded",a(_)),b(xe,i)},[()=>(S?.name||S?.email||"U")[0].toUpperCase()]),n(o,y)},$$slots:{default:!0}});var fe=s(X,2);Ee(fe,{title:"Create Workspace",get show(){return a(U)},set show(l){r(U,l,!0)},footer:l=>{var y=Ye(),c=ae(y);oe(c,{type:"secondary",onclick:()=>r(U,!1),get disabled(){return a(j)},children:(m,v)=>{R();var f=J("Cancel");n(m,f)},$$slots:{default:!0}});var k=s(c,2);{let m=ze(()=>!a(w).trim()||!a(u).trim()||a(j));oe(k,{type:"primary",onclick:me,get disabled(){return a(m)},children:(v,f)=>{R();var d=J();z(()=>b(d,a(j)?"Creating...":"Create Workspace")),n(v,d)},$$slots:{default:!0}})}n(l,y)},children:(l,y)=>{var c=Ze(),k=t(c);{var m=p=>{Ge(p,{type:"error",children:(L,M)=>{R();var I=J();z(()=>b(I,a(A))),n(L,I)},$$slots:{default:!0}})};H(k,p=>{a(A)&&p(m)})}var v=s(k,2),f=s(t(v),2);se(f,{id:"workspace-name",oninput:ve,placeholder:"My Company",get value(){return a(w)},set value(p){r(w,p,!0)}}),e(v);var d=s(v,2),T=s(t(d),2);se(T,{id:"workspace-slug",placeholder:"my-company",get value(){return a(u)},set value(p){r(u,p,!0)}});var E=s(T,2),G=t(E);e(E),e(d),e(c),z(()=>b(G,`This will be used in the URL: /${(a(u)||"my-company")??""}`)),n(l,c)},$$slots:{footer:!0,default:!0}}),n(ie,V),Ce()}Se(["click"]);export{bt as component};
