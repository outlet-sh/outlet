import"../chunks/Bzak7iHL.js";import{p as he,u as xe,b as r,d as v,g as e,f as G,a as be,k as ye,s as o,$ as we,c as s,r as i,t as J,e as M,n as b}from"../chunks/Ip2DykXx.js";import{s as K}from"../chunks/DhOIAuLg.js";import{f,a as m,t as Q}from"../chunks/BPgbRZ5o.js";import{i as C}from"../chunks/BeCi3WIf.js";import{h as $e}from"../chunks/vHZS38u2.js";import{b as Ce}from"../chunks/Bt-Xh7oU.js";import{t as Se,u as ke}from"../chunks/CtwFYI68.js";import{A as Ee,C as V,I as T}from"../chunks/Bphptf_a.js";import{L as Fe}from"../chunks/sFH_xjRy.js";import{S as Ie}from"../chunks/CwztAqJg.js";import{M as Ne}from"../chunks/DWdrbJLD.js";import{C as je}from"../chunks/Dx9qyz7C.js";import{C as ze}from"../chunks/DHzbXXRd.js";var Me=f("<p> </p>"),Te=f('<div class="flex items-center gap-2 text-green-600"><!> <span class="text-sm font-medium">Configured</span></div>'),Ae=f('<div class="flex items-center gap-2 text-text-muted"><!> <span class="text-sm">Using defaults</span></div>'),Le=f(`<div class="card-header"><h2 class="card-title">Sender Identity</h2> <p class="card-subtitle">Configure how your emails appear to recipients</p></div> <div class="border border-border rounded-lg"><div class="p-4 flex items-center justify-between"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"><!></div> <div><h3 class="card-section-title">Email Sender</h3> <p class="card-section-subtitle"><!></p></div></div> <div class="flex items-center gap-2"><!></div></div> <div class="border-t border-border p-4 bg-bg-secondary"><div class="space-y-4 max-w-lg"><div><label for="from-name" class="form-label">From Name</label> <!> <p class="mt-1 text-xs text-text-muted">The name shown in the recipient's inbox</p></div> <div><label for="from-email" class="form-label">From Email</label> <!> <p class="mt-1 text-xs text-text-muted">Must be a verified email address with your email provider</p></div> <div><label for="reply-to" class="form-label">Reply-To Email</label> <!> <p class="mt-1 text-xs text-text-muted">Where replies will be sent (optional, defaults to From Email)</p></div> <div class="flex justify-end gap-3 pt-2"><!></div></div></div></div>`,1),Oe=f(`<div class="flex items-start gap-4"><div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"><svg class="h-5 w-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div><h3 class="card-title">How it works</h3> <p class="card-subtitle">These settings are used as defaults for all emails sent from your site, including campaigns, sequences, and transactional emails.
						You can override these settings on a per-campaign or per-sequence basis.</p></div></div>`),Pe=f('<div class="space-y-6"><!> <!></div>'),qe=f("<!> <!>",1);function ea(X,Z){he(Z,!0);let y=v(!0),S=v(!1),w=v(!1),l=v(null),c=v(""),p=v(""),g=v(""),_=v("");xe(()=>{A()});async function A(){r(y,!0),r(c,"");try{const a=Ce?localStorage.getItem("currentOrgId"):null;if(!a){r(c,"No organization selected"),r(y,!1);return}r(l,await Se({},a),!0),r(p,e(l).from_name||"",!0),r(g,e(l).from_email||"",!0),r(_,e(l).reply_to||"",!0)}catch(a){console.error("Failed to load data:",a),r(c,a.message||"Failed to load data",!0)}finally{r(y,!1)}}async function ee(){if(e(l)){r(S,!0),r(w,!1),r(c,"");try{await ke({},{from_name:e(p)||void 0,from_email:e(g)||void 0,reply_to:e(_)||void 0},e(l).id),r(w,!0),setTimeout(()=>{r(w,!1)},2e3),await A()}catch(a){console.error("Failed to save email settings:",a),r(c,a.message||"Failed to save email settings",!0)}finally{r(S,!1)}}}let ae=M(()=>e(l)&&(e(p)!==(e(l).from_name||"")||e(g)!==(e(l).from_email||"")||e(_)!==(e(l).reply_to||""))),L=M(()=>{var a,n;return((a=e(l))==null?void 0:a.from_name)||((n=e(l))==null?void 0:n.from_email)});var O=qe();$e("yhtzp4",a=>{ye(()=>{var n;we.title=`Email Settings - ${(((n=e(l))==null?void 0:n.name)||"Loading")??""}`})});var P=G(O);{var te=a=>{Ee(a,{type:"error",title:"Error",children:(n,k)=>{var h=Me(),x=s(h,!0);i(h),J(()=>K(x,e(c))),m(n,h)},$$slots:{default:!0}})};C(P,a=>{e(c)&&a(te)})}var re=o(P,2);{var se=a=>{Fe(a,{size:"large"})},ie=a=>{var n=Pe(),k=s(n);V(k,{children:(x,le)=>{var $=Le(),q=o(G($),2),E=s(q),F=s(E),I=s(F),oe=s(I);Ne(oe,{class:"h-6 w-6 text-blue-600"}),i(I);var B=o(I,2),D=o(s(B),2),de=s(D);{var ne=t=>{var d=Q();J(()=>{var u,Y;return K(d,`${(((u=e(l))==null?void 0:u.from_name)||"No name")??""} <${(((Y=e(l))==null?void 0:Y.from_email)||"No email")??""}>`)}),m(t,d)},me=t=>{var d=Q("Not configured - using platform defaults");m(t,d)};C(de,t=>{e(L)?t(ne):t(me,!1)})}i(D),i(B),i(F);var H=o(F,2),ve=s(H);{var ce=t=>{var d=Te(),u=s(d);je(u,{class:"h-5 w-5"}),b(2),i(d),m(t,d)},fe=t=>{var d=Ae(),u=s(d);ze(u,{class:"h-5 w-5"}),b(2),i(d),m(t,d)};C(ve,t=>{e(L)?t(ce):t(fe,!1)})}i(H),i(E);var R=o(E,2),U=s(R),N=s(U),ue=o(s(N),2);T(ue,{id:"from-name",type:"text",placeholder:"Acme Inc",get value(){return e(p)},set value(t){r(p,t,!0)}}),b(2),i(N);var j=o(N,2),pe=o(s(j),2);T(pe,{id:"from-email",type:"email",placeholder:"hello@yourdomain.com",get value(){return e(g)},set value(t){r(g,t,!0)}}),b(2),i(j);var z=o(j,2),ge=o(s(z),2);T(ge,{id:"reply-to",type:"email",placeholder:"support@yourdomain.com",get value(){return e(_)},set value(t){r(_,t,!0)}}),b(2),i(z);var W=o(z,2),_e=s(W);{let t=M(()=>!e(ae));Ie(_e,{label:"Save Settings",get saving(){return e(S)},get saved(){return e(w)},onclick:ee,get disabled(){return e(t)}})}i(W),i(U),i(R),i(q),m(x,$)},$$slots:{default:!0}});var h=o(k,2);V(h,{children:(x,le)=>{var $=Oe();m(x,$)},$$slots:{default:!0}}),i(n),m(a,n)};C(re,a=>{e(y)?a(se):a(ie,!1)})}m(X,O),be()}export{ea as component};
