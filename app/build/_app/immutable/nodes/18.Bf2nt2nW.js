import"../chunks/DsnmJJEf.js";import{a as Ae}from"../chunks/DXb0mlk6.js";import{p as Ee,d as $e,e as Ce,h as a,c as s,b as e,s as d,i as t,g as Me,r,t as Te,f as V,n as Z,j as le}from"../chunks/C06BEU5l.js";import{s as Ie}from"../chunks/C8f6XRe7.js";import{i as w}from"../chunks/CGGWlPqF.js";import{f as c,a as v}from"../chunks/DV4WO4A5.js";import{h as Fe}from"../chunks/CFYH9Sl-.js";import{A as ee,e as Ue,C as oe,S as Ke,I as P}from"../chunks/Bg2aYoKt.js";import{L as Ne}from"../chunks/B1NykLMz.js";import{S as ie}from"../chunks/DnDCPtQy.js";import{A as Le}from"../chunks/CuzVnpru.js";import{g as Oe,u as de}from"../chunks/C03oMPLM.js";import{C as We}from"../chunks/cP8ggCeJ.js";import{S as ze}from"../chunks/B5bTgktX.js";var Re=c("<p> </p>"),je=c('<div class="flex justify-center py-8"><!></div>'),Ge=c(`<p>Choose how Outlet sends emails. You can use an SMTP relay service (like SendGrid, Mailgun, Postmark)
				or connect directly to Amazon SES for high-volume sending.</p>`),Be=c('<p class="mt-1 text-sm text-green-600">Configured</p>'),De=c('<p class="mt-1 text-sm text-text-muted">Leave blank to keep existing key</p>'),He=c(`<p>In sandbox mode, you can only send emails to verified email addresses.
								Request production access from your AWS console to send to any recipient.</p>`),qe=c('<div class="flex items-center gap-3 mb-4"><!> <div><h2 class="text-lg font-medium text-text">Amazon SES</h2> <p class="text-sm text-text-muted">Connect directly to AWS Simple Email Service for high-volume sending</p></div></div> <div class="space-y-6"><div class="grid grid-cols-1 gap-6 sm:grid-cols-6"><div class="sm:col-span-6"><label for="aws-region" class="form-label">AWS Region</label> <!> <p class="mt-1 text-sm text-text-muted">Choose the region closest to your audience for best delivery performance</p></div> <div class="sm:col-span-3"><label for="aws-access-key" class="form-label">Access Key ID</label> <!> <!></div> <div class="sm:col-span-3"><label for="aws-secret-key" class="form-label">Secret Access Key</label> <!> <!></div></div> <div class="pt-4 border-t border-border"><h3 class="font-medium text-text mb-3">SES Sandbox Mode</h3> <!></div> <p class="text-sm text-text-muted">From Name and From Email are configured per organization.</p> <div class="flex justify-end"><!></div></div>',1),Ve=c("<!> <!>",1),Xe=c('<p class="mt-1 text-sm text-text-muted">Leave blank to keep existing password</p>'),Ye=c('<div class="flex items-center gap-3 mb-4"><!> <div><h2 class="text-lg font-medium text-text">SMTP Relay</h2> <p class="text-sm text-text-muted">Connect to SendGrid, Mailgun, Postmark, or any SMTP server</p></div></div> <div class="space-y-6"><div class="grid grid-cols-1 gap-6 sm:grid-cols-6"><div class="sm:col-span-4"><label for="smtp-host" class="form-label">SMTP Host</label> <!></div> <div class="sm:col-span-2"><label for="smtp-port" class="form-label">Port</label> <!></div> <div class="sm:col-span-3"><label for="smtp-user" class="form-label">Username</label> <!></div> <div class="sm:col-span-3"><label for="smtp-password" class="form-label">Password / API Key</label> <!> <!></div></div> <div class="pt-4 border-t border-border"><h3 class="font-medium text-text mb-3">Common Providers</h3> <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm"><div class="p-3 bg-surface-secondary rounded-lg"><p class="font-medium text-text">SendGrid</p> <p class="text-text-muted">smtp.sendgrid.net:587</p> <p class="text-text-muted text-xs">Username: apikey</p></div> <div class="p-3 bg-surface-secondary rounded-lg"><p class="font-medium text-text">Mailgun</p> <p class="text-text-muted">smtp.mailgun.org:587</p> <p class="text-text-muted text-xs">Username: your login</p></div> <div class="p-3 bg-surface-secondary rounded-lg"><p class="font-medium text-text">Postmark</p> <p class="text-text-muted">smtp.postmarkapp.com:587</p> <p class="text-text-muted text-xs">Username: server API token</p></div></div></div> <p class="text-sm text-text-muted">From Name and From Email are configured per organization.</p> <div class="flex justify-end"><!></div></div>',1),Je=c('<!> <div class="mb-4"><!></div> <!>',1),Qe=c('<div class="space-y-6"><!> <!></div>');function ut(ne,ve){Ee(ve,!0);let b=d(!1),u=d(!1),te=d(!0),m=d(""),k=d("ses"),A=d(""),z=d(587),R=d(""),E=d(""),j=d(!1),y=d(""),$=d(""),G=d("us-east-1"),S=d(!1);const ce=[{value:"us-east-1",label:"US East (N. Virginia)"},{value:"us-east-2",label:"US East (Ohio)"},{value:"us-west-1",label:"US West (N. California)"},{value:"us-west-2",label:"US West (Oregon)"},{value:"eu-west-1",label:"Europe (Ireland)"},{value:"eu-west-2",label:"Europe (London)"},{value:"eu-west-3",label:"Europe (Paris)"},{value:"eu-central-1",label:"Europe (Frankfurt)"},{value:"ap-south-1",label:"Asia Pacific (Mumbai)"},{value:"ap-southeast-1",label:"Asia Pacific (Singapore)"},{value:"ap-southeast-2",label:"Asia Pacific (Sydney)"},{value:"ap-northeast-1",label:"Asia Pacific (Tokyo)"},{value:"ap-northeast-2",label:"Asia Pacific (Seoul)"},{value:"sa-east-1",label:"South America (São Paulo)"},{value:"ca-central-1",label:"Canada (Central)"}],pe=[{id:"ses",label:"Amazon SES"},{id:"smtp",label:"SMTP Relay"}];Ae(async()=>{await ue()});async function ue(){try{const l=await Oe({},"email");for(const o of l.settings)switch(o.key){case"smtp_host":e(A,o.value||"",!0);break;case"smtp_port":e(z,o.value?parseInt(o.value):587,!0);break;case"smtp_user":e(R,o.value||"",!0);break;case"smtp_password":e(j,!!o.value);break;case"aws_access_key":e(y,o.value||"",!0),e(S,!!o.value);break;case"aws_region":e(G,o.value||"us-east-1",!0);break}t(y)||t(S)?e(k,"ses"):t(A)&&e(k,"smtp")}catch(l){e(m,l.message||"Failed to load settings",!0)}finally{e(te,!1)}}async function me(){e(b,!0),e(u,!1),e(m,"");try{await de({smtp_host:t(A),smtp_port:t(z),smtp_user:t(R),smtp_password:t(E)||void 0}),e(u,!0),setTimeout(()=>{e(u,!1)},2e3),t(E)&&(e(j,!0),e(E,""))}catch(l){e(m,l.message||"Failed to save settings",!0)}finally{e(b,!1)}}async function fe(){e(b,!0),e(u,!1),e(m,"");try{await de({aws_access_key:t(y),aws_secret_key:t($)||void 0,aws_region:t(G)}),e(u,!0),setTimeout(()=>{e(u,!1)},2e3),t($)&&(e(S,!0),e($,""))}catch(l){e(m,l.message||"Failed to save settings",!0)}finally{e(b,!1)}}var X=Qe();Fe("1v3r2l5",l=>{Ce(()=>{Me.title="Integrations - Settings"})});var ae=s(X);{var ge=l=>{ee(l,{type:"error",title:"Error",onclose:()=>e(m,""),children:(o,C)=>{var f=Re(),Y=s(f,!0);r(f),Te(()=>Ie(Y,t(m))),v(o,f)},$$slots:{default:!0}})};w(ae,l=>{t(m)&&l(ge)})}var _e=a(ae,2);{var xe=l=>{var o=je(),C=s(o);Ne(C,{}),r(o),v(l,o)},be=l=>{var o=Je(),C=V(o);ee(C,{type:"info",title:"Email Sending Provider",children:(p,M)=>{var T=Ge();v(p,T)},$$slots:{default:!0}});var f=a(C,2),Y=s(f);Ue(Y,{get tabs(){return pe},variant:"pills",get activeTab(){return t(k)},set activeTab(p){e(k,p,!0)}}),r(f);var ye=a(f,2);{var Se=p=>{var M=Ve(),T=V(M);oe(T,{children:(I,se)=>{var F=qe(),g=V(F),U=s(g);We(U,{class:"h-5 w-5 text-primary"}),Z(2),r(g);var D=a(g,2),_=s(D),K=s(_),N=a(s(K),2);Ke(N,{id:"aws-region",get options(){return ce},get value(){return t(G)},set value(i){e(G,i,!0)}}),Z(2),r(K);var L=a(K,2),O=a(s(L),2);P(O,{type:"text",id:"aws-access-key",placeholder:"AKIAIOSFODNN7EXAMPLE",get value(){return t(y)},set value(i){e(y,i,!0)}});var H=a(O,2);{var J=i=>{var h=Be();v(i,h)};w(H,i=>{t(S)&&t(y)&&i(J)})}r(L);var q=a(L,2),W=a(s(q),2);{let i=le(()=>t(S)?"••••••••••••••••":"");P(W,{type:"password",id:"aws-secret-key",get placeholder(){return t(i)},get value(){return t($)},set value(h){e($,h,!0)}})}var Q=a(W,2);{var n=i=>{var h=De();v(i,h)};w(Q,i=>{t(S)&&i(n)})}r(q),r(_);var x=a(_,2),we=a(s(x),2);ee(we,{type:"warning",title:"New AWS accounts start in sandbox mode",children:(i,h)=>{var ke=He();v(i,ke)},$$slots:{default:!0}}),r(x);var re=a(x,4),Pe=s(re);ie(Pe,{label:"Save SES Settings",get saving(){return t(b)},get saved(){return t(u)},onclick:fe}),r(re),r(D),v(I,F)},$$slots:{default:!0}});var B=a(T,2);Le(B,{}),v(p,M)},he=p=>{oe(p,{children:(M,T)=>{var B=Ye(),I=V(B),se=s(I);ze(se,{class:"h-5 w-5 text-primary"}),Z(2),r(I);var F=a(I,2),g=s(F),U=s(g),D=a(s(U),2);P(D,{type:"text",id:"smtp-host",placeholder:"smtp.sendgrid.net",get value(){return t(A)},set value(n){e(A,n,!0)}}),r(U);var _=a(U,2),K=a(s(_),2);P(K,{type:"number",id:"smtp-port",get value(){return t(z)},set value(n){e(z,n,!0)}}),r(_);var N=a(_,2),L=a(s(N),2);P(L,{type:"text",id:"smtp-user",placeholder:"apikey",get value(){return t(R)},set value(n){e(R,n,!0)}}),r(N);var O=a(N,2),H=a(s(O),2);{let n=le(()=>t(j)?"••••••••••••••••":"");P(H,{type:"password",id:"smtp-password",get placeholder(){return t(n)},get value(){return t(E)},set value(x){e(E,x,!0)}})}var J=a(H,2);{var q=n=>{var x=Xe();v(n,x)};w(J,n=>{t(j)&&n(q)})}r(O),r(g);var W=a(g,6),Q=s(W);ie(Q,{label:"Save SMTP Settings",get saving(){return t(b)},get saved(){return t(u)},onclick:me}),r(W),r(F),v(M,B)},$$slots:{default:!0}})};w(ye,p=>{t(k)==="ses"?p(Se):p(he,!1)})}v(l,o)};w(_e,l=>{t(te)?l(xe):l(be,!1)})}r(X),v(ne,X),$e()}export{ut as component};
