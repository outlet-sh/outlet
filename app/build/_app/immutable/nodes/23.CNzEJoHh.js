import"../chunks/DsnmJJEf.js";import{p as Ie,u as Ne,i as a,b as m,f as u,d as Ye,s as S,j as fe,m as qe,g as De,c as e,r as t,h as r,n as l,t as le}from"../chunks/odI--4Kw.js";import{d as Me,s as oe,e as Ge}from"../chunks/BNMK9zrr.js";import{c as Q,a as o,f as d,t as Re}from"../chunks/CCInJaqd.js";import{i as M}from"../chunks/COaB7F5h.js";import{h as Ue}from"../chunks/hUjpWz_l.js";import{s as Ve,a as He}from"../chunks/DL1yFSKa.js";import{p as Je}from"../chunks/CdFg3XMI.js";import{g as ie}from"../chunks/BsbAhiR-.js";import{j as Ke,k as Qe}from"../chunks/CbJUEE85.js";import{C,A as _e,B as ne,h as P,L as ge,I as me}from"../chunks/DDAcQctE.js";import{L as Xe}from"../chunks/D716f0vp.js";import{C as xe}from"../chunks/o-LMMHGY.js";import{L as Ze}from"../chunks/yIQo1P_w.js";import{C as et}from"../chunks/CyXKlrPp.js";import{S as tt}from"../chunks/DBgKfrOf.js";var at=d('<div class="flex items-center justify-center py-12"><!></div>'),rt=d("<p>The organization you're looking for doesn't exist.</p>"),st=d('<!> <div class="mt-4"><!></div>',1),lt=d("Go to Dashboard <!>",1),ot=d(`<div class="text-center"><div class="mx-auto w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mb-6"><!></div> <h2 class="text-2xl font-bold text-text mb-2">You're all set!</h2> <p class="text-text-muted mb-8"> </p> <!></div>`),it=d(`<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">What's next?</h3></div> <ul class="space-y-3 text-sm text-text-muted"><li class="flex items-start gap-2"><!> <span>Create your first email list</span></li> <li class="flex items-start gap-2"><!> <span>Add subscribers manually or import a CSV</span></li> <li class="flex items-start gap-2"><!> <span>Create your first campaign</span></li> <li class="flex items-start gap-2"><!> <span>Set up welcome email automation</span></li></ul>`,1),nt=d('<div class="grid grid-cols-1 lg:grid-cols-5 gap-8"><div class="lg:col-span-3"><!></div> <div class="lg:col-span-2"><div class="sticky top-8 space-y-6"><!></div></div></div>'),mt=d("<p> </p>"),dt=d("<!> Saving...",1),vt=d("Save & Continue <!>",1),pt=d(`<div class="mb-6"><h1 class="text-2xl font-bold text-text"> </h1> <p class="text-text-muted mt-1">Set up your email sender identity so subscribers know who's emailing them.</p></div> <!> <form class="space-y-5"><div><label for="from-name" class="form-label">From Name</label> <!> <p class="mt-1 text-xs text-text-muted">The name that appears as the sender</p></div> <div><label for="from-email" class="form-label">From Email</label> <!> <p class="mt-1 text-xs text-text-muted">Must be a verified email address</p></div> <div><label for="reply-to" class="form-label">Reply-To Email (optional)</label> <!> <p class="mt-1 text-xs text-text-muted">Where replies will be sent</p></div> <div class="flex gap-3 pt-4"><!></div></form> <button type="button" class="mt-4 text-sm text-text-muted hover:text-text transition-colors w-full text-center">Skip for now</button>`,1),ct=d('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Why set this up?</h3></div> <ul class="space-y-3 text-sm text-text-muted"><li class="flex items-start gap-2"><span class="text-primary mt-0.5">1.</span> <span>Subscribers see a familiar name in their inbox</span></li> <li class="flex items-start gap-2"><span class="text-primary mt-0.5">2.</span> <span>Improves email deliverability and trust</span></li> <li class="flex items-start gap-2"><span class="text-primary mt-0.5">3.</span> <span>Replies go to the right place</span></li></ul>',1),ut=d('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Best practices</h3></div> <ul class="space-y-2 text-sm text-text-muted"><li class="flex items-start gap-2"><!> <span>Use a recognizable sender name</span></li> <li class="flex items-start gap-2"><!> <span>Use a domain you own (not gmail.com)</span></li> <li class="flex items-start gap-2"><!> <span>Monitor your reply-to inbox regularly</span></li></ul>',1),ft=d('<div class="flex items-center gap-2 mb-4"><!> <h3 class="font-semibold text-text">Email verification</h3></div> <p class="text-sm text-text-muted">Make sure your from email is verified with your email provider (like Amazon SES) before sending campaigns.</p>',1),_t=d('<div class="grid grid-cols-1 lg:grid-cols-5 gap-8"><div class="lg:col-span-3"><!></div> <div class="lg:col-span-2"><div class="sticky top-8 space-y-6"><!> <!> <!></div></div></div>');function Tt(he,$e){Ie($e,!0);const ye=()=>He(Je,"$page",be),[be,we]=Ve();let G=S(!1),X=S(!0),W=S(""),de=S(!1),f=S(null),I=S(""),E=S(""),R=S(""),L=fe(()=>ye().params.brandSlug);Ne(()=>{a(L)&&ke()});async function ke(){if(a(L)){m(X,!0);try{m(f,await Ke({},a(L)),!0),a(f)&&(m(I,a(f).from_name||a(f).name,!0),m(E,a(f).from_email||"",!0),m(R,a(f).reply_to||"",!0))}catch(_){console.error("Failed to load organization:",_),m(W,"Organization not found")}finally{m(X,!1)}}}async function Se(){if(a(f)){m(G,!0),m(W,"");try{await Qe({},{from_name:a(I),from_email:a(E),reply_to:a(R)||a(E)},a(f).id),m(de,!0)}catch(_){console.error("Failed to save org email settings:",_),m(W,_.message||"Failed to save email settings",!0)}finally{m(G,!1)}}}function Ce(){ie(`/${a(L)}`)}function Pe(){localStorage.setItem(`orgSetupSkipped_${a(L)}`,"true"),ie(`/${a(L)}`)}var ve=Q();Ue("h6js1x",_=>{qe(()=>{De.title=`Welcome - ${(a(f)?.name||"Setup")??""}`})});var ze=u(ve);{var je=_=>{C(_,{children:(U,pe)=>{var N=at(),Z=e(N);Xe(Z,{size:"large"}),t(N),o(U,N)},$$slots:{default:!0}})},Ee=_=>{var U=Q(),pe=u(U);{var N=F=>{C(F,{children:(V,ce)=>{var H=st(),J=u(H);_e(J,{type:"error",title:"Organization not found",children:(x,Y)=>{var b=rt();o(x,b)},$$slots:{default:!0}});var $=r(J,2),y=e($);ne(y,{type:"secondary",onclick:()=>ie("/"),children:(x,Y)=>{l();var b=Re("Go Back");o(x,b)},$$slots:{default:!0}}),t($),o(V,H)},$$slots:{default:!0}})},Z=F=>{var V=Q(),ce=u(V);{var H=$=>{var y=nt(),x=e(y),Y=e(x);C(Y,{children:(T,ee)=>{var v=ot(),h=e(v),i=e(h);P(i,{class:"w-8 h-8 text-green-500"}),t(h);var s=r(h,4),p=e(s);t(s);var k=r(s,2);ne(k,{type:"primary",size:"lg",onclick:Ce,class:"w-full justify-center",children:(g,A)=>{l();var n=lt(),w=r(u(n));xe(w,{class:"w-4 h-4 ml-2"}),o(g,n)},$$slots:{default:!0}}),t(v),le(()=>oe(p,`Your sender settings have been saved. You're ready to start sending emails from ${a(f).name??""}.`)),o(T,v)},$$slots:{default:!0}}),t(x);var b=r(x,2),q=e(b),K=e(q);C(K,{children:(T,ee)=>{var v=it(),h=u(v),i=e(h);ge(i,{class:"w-5 h-5 text-amber-500"}),l(2),t(h);var s=r(h,2),p=e(s),k=e(p);P(k,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),t(p);var g=r(p,2),A=e(g);P(A,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),t(g);var n=r(g,2),w=e(n);P(w,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),t(n);var z=r(n,2),j=e(z);P(j,{class:"w-4 h-4 text-green-500 mt-0.5"}),l(2),t(z),t(s),o(T,v)},$$slots:{default:!0}}),t(q),t(b),t(y),o($,y)},J=$=>{var y=_t(),x=e(y),Y=e(x);C(Y,{children:(v,h)=>{var i=pt(),s=u(i),p=e(s),k=e(p);t(p),l(2),t(s);var g=r(s,2);{var A=c=>{_e(c,{type:"error",title:"Error",class:"mb-6",children:(ae,Be)=>{var B=mt(),re=e(B,!0);t(B),le(()=>oe(re,a(W))),o(ae,B)},$$slots:{default:!0}})};M(g,c=>{a(W)&&c(A)})}var n=r(g,2),w=e(n),z=r(e(w),2);me(z,{id:"from-name",type:"text",placeholder:"Your Company Name",required:!0,get value(){return a(I)},set value(c){m(I,c,!0)}}),l(2),t(w);var j=r(w,2),Le=r(e(j),2);me(Le,{id:"from-email",type:"email",placeholder:"newsletter@example.com",required:!0,get value(){return a(E)},set value(c){m(E,c,!0)}}),l(2),t(j);var te=r(j,2),Fe=r(e(te),2);me(Fe,{id:"reply-to",type:"email",placeholder:"support@example.com",get value(){return a(R)},set value(c){m(R,c,!0)}}),l(2),t(te);var ue=r(te,2),Te=e(ue);{let c=fe(()=>a(G)||!a(I)||!a(E));ne(Te,{htmlType:"submit",type:"primary",get disabled(){return a(c)},class:"flex-1 justify-center",children:(ae,Be)=>{var B=Q(),re=u(B);{var Oe=O=>{var D=dt(),se=u(D);Ze(se,{class:"w-4 h-4 mr-2 animate-spin"}),l(),o(O,D)},We=O=>{var D=vt(),se=r(u(D));xe(se,{class:"w-4 h-4 ml-2"}),o(O,D)};M(re,O=>{a(G)?O(Oe):O(We,!1)})}o(ae,B)},$$slots:{default:!0}})}t(ue),t(n);var Ae=r(n,2);Ae.__click=Pe,le(()=>oe(k,`Welcome to ${a(f).name??""}`)),Ge("submit",n,c=>{c.preventDefault(),Se()}),o(v,i)},$$slots:{default:!0}}),t(x);var b=r(x,2),q=e(b),K=e(q);C(K,{children:(v,h)=>{var i=ct(),s=u(i),p=e(s);et(p,{class:"w-5 h-5 text-primary"}),l(2),t(s),l(2),o(v,i)},$$slots:{default:!0}});var T=r(K,2);C(T,{children:(v,h)=>{var i=ut(),s=u(i),p=e(s);ge(p,{class:"w-5 h-5 text-amber-500"}),l(2),t(s);var k=r(s,2),g=e(k),A=e(g);P(A,{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),l(2),t(g);var n=r(g,2),w=e(n);P(w,{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),l(2),t(n);var z=r(n,2),j=e(z);P(j,{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),l(2),t(z),t(k),o(v,i)},$$slots:{default:!0}});var ee=r(T,2);C(ee,{children:(v,h)=>{var i=ft(),s=u(i),p=e(s);tt(p,{class:"w-5 h-5 text-green-500"}),l(2),t(s),l(2),o(v,i)},$$slots:{default:!0}}),t(q),t(b),t(y),o($,y)};M(ce,$=>{a(de)?$(H):$(J,!1)},!0)}o(F,V)};M(pe,F=>{a(f)?F(Z,!1):F(N)},!0)}o(_,U)};M(ze,_=>{a(X)?_(je):_(Ee,!1)})}o(he,ve),Ye(),we()}Me(["click"]);export{Tt as component};
