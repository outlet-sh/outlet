import"../chunks/DsnmJJEf.js";import{p as Ce,d as Pe,e as Te,h as s,c as n,f as P,i as e,s as R,b as a,g as De,r as o,t as L,n as X}from"../chunks/EWi02PFm.js";import{s as N}from"../chunks/CMlTvFs1.js";import{f as p,a as r,c as Y,t as S}from"../chunks/m1NGduc7.js";import{i as y}from"../chunks/Bv3BEGQz.js";import{h as Ue}from"../chunks/lEmZmbJU.js";import{s as E,r as re,a as Z}from"../chunks/BU0M2qTC.js";import{C as de,A as ce,B as ee,k as se,T as ve,b as ue}from"../chunks/_5RYljtH.js";import{s as Ae}from"../chunks/P1cg2ZFr.js";import"../chunks/DU2WrJhe.js";import{A as fe,B as _e}from"../chunks/DtWifhjl.js";import{U as Fe}from"../chunks/GaxxnEeU.js";import{C as Ie}from"../chunks/Dic-bvkb.js";import{T as pe}from"../chunks/B-YSeal5.js";var Re=p("<p> </p>"),Be=p('<!> <span class="font-medium text-yellow-800">Preview:</span>',1),He=p('<!> <span class="font-medium text-green-800">Completed:</span>',1),Oe=p('<p class="mt-2 text-sm text-yellow-700"> </p>'),Le=p('<div><div class="flex items-center gap-2"><!> <span> </span></div> <!></div>'),Ne=p("<!> ",1),Se=p(`<div class="flex items-start gap-4"><div class="p-3 rounded-lg bg-orange-100 text-orange-600"><!></div> <div class="flex-1"><h2 class="text-lg font-medium text-text">Inactive Contacts</h2> <p class="mt-1 text-sm text-text-muted">Remove contacts who haven't opened or clicked any emails in a long time. This helps improve your deliverability and open rates.</p> <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4"><div><label for="no-opens" class="form-label">No opens in (days)</label> <input id="no-opens" type="number" class="input input-bordered w-full"/></div> <div><label for="no-clicks" class="form-label">No clicks in (days)</label> <input id="no-clicks" type="number" class="input input-bordered w-full"/></div></div> <!> <div class="mt-4 flex gap-3"><!> <!></div></div></div>`),Ee=p('<!> <span class="font-medium text-yellow-800">Preview:</span>',1),je=p('<!> <span class="font-medium text-green-800">Completed:</span>',1),qe=p('<p class="mt-2 text-sm text-yellow-700"> </p>'),ze=p('<div><div class="flex items-center gap-2"><!> <span> </span></div> <!></div>'),Ge=p("<!> ",1),Je=p(`<div class="flex items-start gap-4"><div class="p-3 rounded-lg bg-blue-100 text-blue-600"><!></div> <div class="flex-1"><h2 class="text-lg font-medium text-text">Unconfirmed Subscriptions</h2> <p class="mt-1 text-sm text-text-muted">Remove pending subscriptions from contacts who never confirmed their email. This cleans up contacts who signed up but didn't complete double opt-in.</p> <div class="mt-4 max-w-xs"><label for="unconfirmed-days" class="form-label">Older than (days)</label> <input id="unconfirmed-days" type="number" class="input input-bordered w-full"/></div> <!> <div class="mt-4 flex gap-3"><!> <!></div></div></div>`),Ke=p(`<p>Housekeeping operations permanently delete data. Always preview changes before executing.
				Deleted contacts and subscriptions cannot be recovered.</p>`),Me=p('<div class="p-6 max-w-5xl mx-auto"><div class="mb-6"><h1 class="text-2xl font-semibold text-text">Housekeeping</h1> <p class="mt-1 text-sm text-text-muted">Clean up your subscriber lists by removing inactive or unconfirmed contacts.</p></div> <!> <div class="space-y-6"><!> <!> <!></div></div>');function dt(me,ge){Ce(ge,!0);const[Qe,xe]=Ae();let J=R(90),K=R(180),A=R(!1),d=R(null),M=R(30),F=R(!1),c=R(null),$=R("");async function ye(){a(A,!0),a($,""),a(d,null);try{a(d,await fe({no_opens_days:e(J),no_clicks_days:e(K),dry_run:!0}),!0)}catch(v){a($,v.message||"Failed to preview inactive contacts",!0)}finally{a(A,!1)}}async function be(){if(confirm(`This will permanently delete ${e(d)?.affected_count||0} contacts. This action cannot be undone. Continue?`)){a(A,!0),a($,"");try{a(d,await fe({no_opens_days:e(J),no_clicks_days:e(K),dry_run:!1}),!0)}catch(v){a($,v.message||"Failed to delete inactive contacts",!0)}finally{a(A,!1)}}}async function he(){a(F,!0),a($,""),a(c,null);try{a(c,await _e({older_than_days:e(M),dry_run:!0}),!0)}catch(v){a($,v.message||"Failed to preview unconfirmed contacts",!0)}finally{a(F,!1)}}async function we(){if(confirm(`This will permanently delete ${e(c)?.affected_count||0} unconfirmed subscriptions. This action cannot be undone. Continue?`)){a(F,!0),a($,"");try{a(c,await _e({older_than_days:e(M),dry_run:!1}),!0)}catch(v){a($,v.message||"Failed to delete unconfirmed contacts",!0)}finally{a(F,!1)}}}var te=Me();Ue("htn5hu",v=>{Te(()=>{De.title="Housekeeping | Outlet"})});var ne=s(n(te),2);{var $e=v=>{ce(v,{type:"error",title:"Error",class:"mb-6",children:(Q,k)=>{var w=Re(),j=n(w,!0);o(w),L(()=>N(j,e($))),r(Q,w)},$$slots:{default:!0}})};y(ne,v=>{e($)&&v($e)})}var oe=s(ne,2),ie=n(oe);de(ie,{children:(v,Q)=>{var k=Se(),w=n(k),j=n(w);Fe(j,{class:"h-6 w-6"}),o(w);var q=s(w,2),B=s(n(q),4),I=n(B),H=s(n(I),2);re(H),E(H,"min",30),E(H,"max",365),o(I);var V=s(I,2),O=s(n(V),2);re(O),E(O,"min",30),E(O,"max",365),o(V),o(B);var z=s(B,2);{var ae=i=>{var g=Le(),x=n(g),l=n(x);{var u=h=>{var U=Be(),G=P(U);ve(G,{class:"h-5 w-5 text-yellow-600"}),X(2),r(h,U)},b=h=>{var U=He(),G=P(U);ue(G,{class:"h-5 w-5 text-green-600"}),X(2),r(h,U)};y(l,h=>{e(d).dry_run?h(u):h(b,!1)})}var f=s(l,2),t=n(f,!0);o(f),o(x);var _=s(x,2);{var C=h=>{var U=Oe(),G=n(U);o(U),L(()=>N(G,`${e(d).affected_count??""} contact${e(d).affected_count===1?"":"s"} will be deleted.`)),r(h,U)};y(_,h=>{e(d).dry_run&&e(d).affected_count>0&&h(C)})}o(g),L(()=>{Z(g,1,`mt-4 p-4 rounded-lg ${e(d).dry_run?"bg-yellow-50 border border-yellow-200":"bg-green-50 border border-green-200"}`),Z(f,1,e(d).dry_run?"text-yellow-700":"text-green-700"),N(t,e(d).message)}),r(i,g)};y(z,i=>{e(d)&&i(ae)})}var W=s(z,2),m=n(W);ee(m,{type:"secondary",onclick:ye,get disabled(){return e(A)},children:(i,g)=>{var x=Y(),l=P(x);{var u=f=>{var t=S("Checking...");r(f,t)},b=f=>{var t=S("Preview");r(f,t)};y(l,f=>{e(A)&&!e(d)?f(u):f(b,!1)})}r(i,x)},$$slots:{default:!0}});var T=s(m,2);{var D=i=>{ee(i,{type:"danger",onclick:be,get disabled(){return e(A)},children:(g,x)=>{var l=Y(),u=P(l);{var b=t=>{var _=S("Deleting...");r(t,_)},f=t=>{var _=Ne(),C=P(_);pe(C,{class:"mr-2 h-4 w-4"});var h=s(C);L(()=>N(h,` Delete ${e(d).affected_count??""} Contact${e(d).affected_count===1?"":"s"}`)),r(t,_)};y(u,t=>{e(A)?t(b):t(f,!1)})}r(g,l)},$$slots:{default:!0}})};y(T,i=>{e(d)?.dry_run&&e(d).affected_count>0&&i(D)})}o(W),o(q),o(k),se(H,()=>e(J),i=>a(J,i)),se(O,()=>e(K),i=>a(K,i)),r(v,k)},$$slots:{default:!0}});var le=s(ie,2);de(le,{children:(v,Q)=>{var k=Je(),w=n(k),j=n(w);Ie(j,{class:"h-6 w-6"}),o(w);var q=s(w,2),B=s(n(q),4),I=s(n(B),2);re(I),E(I,"min",7),E(I,"max",90),o(B);var H=s(B,2);{var V=m=>{var T=ze(),D=n(T),i=n(D);{var g=t=>{var _=Ee(),C=P(_);ve(C,{class:"h-5 w-5 text-yellow-600"}),X(2),r(t,_)},x=t=>{var _=je(),C=P(_);ue(C,{class:"h-5 w-5 text-green-600"}),X(2),r(t,_)};y(i,t=>{e(c).dry_run?t(g):t(x,!1)})}var l=s(i,2),u=n(l,!0);o(l),o(D);var b=s(D,2);{var f=t=>{var _=qe(),C=n(_);o(_),L(()=>N(C,`${e(c).affected_count??""} subscription${e(c).affected_count===1?"":"s"} will be deleted.`)),r(t,_)};y(b,t=>{e(c).dry_run&&e(c).affected_count>0&&t(f)})}o(T),L(()=>{Z(T,1,`mt-4 p-4 rounded-lg ${e(c).dry_run?"bg-yellow-50 border border-yellow-200":"bg-green-50 border border-green-200"}`),Z(l,1,e(c).dry_run?"text-yellow-700":"text-green-700"),N(u,e(c).message)}),r(m,T)};y(H,m=>{e(c)&&m(V)})}var O=s(H,2),z=n(O);ee(z,{type:"secondary",onclick:he,get disabled(){return e(F)},children:(m,T)=>{var D=Y(),i=P(D);{var g=l=>{var u=S("Checking...");r(l,u)},x=l=>{var u=S("Preview");r(l,u)};y(i,l=>{e(F)&&!e(c)?l(g):l(x,!1)})}r(m,D)},$$slots:{default:!0}});var ae=s(z,2);{var W=m=>{ee(m,{type:"danger",onclick:we,get disabled(){return e(F)},children:(T,D)=>{var i=Y(),g=P(i);{var x=u=>{var b=S("Deleting...");r(u,b)},l=u=>{var b=Ge(),f=P(b);pe(f,{class:"mr-2 h-4 w-4"});var t=s(f);L(()=>N(t,` Delete ${e(c).affected_count??""} Subscription${e(c).affected_count===1?"":"s"}`)),r(u,b)};y(g,u=>{e(F)?u(x):u(l,!1)})}r(T,i)},$$slots:{default:!0}})};y(ae,m=>{e(c)?.dry_run&&e(c).affected_count>0&&m(W)})}o(O),o(q),o(k),se(I,()=>e(M),m=>a(M,m)),r(v,k)},$$slots:{default:!0}});var ke=s(le,2);ce(ke,{type:"warning",title:"Permanent Deletion",children:(v,Q)=>{var k=Ke();r(v,k)},$$slots:{default:!0}}),o(oe),o(te),r(me,te),Pe(),xe()}export{dt as component};
