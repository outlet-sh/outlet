/**
 * Outlet Design System
 * Single source of truth - Tailwind CSS v4
 */

/* Tailwind */
@import 'tailwindcss';
@plugin "@tailwindcss/typography";
@plugin "daisyui" {
	themes: light --default, dark;
}

/* ===== Theme Tokens ===== */
@theme {
	/* Fonts - using system fonts for better performance */
	--font-display: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
	--font-body: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

	/* Base palette - Neutral grays */
	--color-base-900: #111827;
	--color-base-800: #1f2937;
	--color-base-700: #374151;
	--color-base-600: #4b5563;
	--color-base-500: #6b7280;
	--color-base-400: #9ca3af;
	--color-base-300: #d1d5db;
	--color-base-200: #e5e7eb;
	--color-base-100: #f3f4f6;
	--color-base-50: #f9fafb;

	/* Accent colors - Professional indigo/blue */
	--color-primary: #4f46e5;
	--color-primary-light: #6366f1;
	--color-primary-dark: #4338ca;
	--color-secondary: #64748b;
	--color-tertiary: #475569;
	--color-success: #22c55e;
	--color-warning: #f59e0b;
	--color-error: #ef4444;
	--color-info: #3b82f6;
	--color-security: #ef4444;

	/* Accent aliases (for semantic clarity) */
	--color-accent-primary: var(--color-primary);
	--color-accent-primary-light: var(--color-primary-light);
	--color-accent-primary-dark: var(--color-primary-dark);
	--color-accent-secondary: var(--color-secondary);
	--color-accent-tertiary: var(--color-tertiary);
	--color-accent-success: var(--color-success);
	--color-accent-warning: var(--color-warning);
	--color-accent-error: var(--color-error);
	--color-accent-info: var(--color-info);

	/* Semantic colors (light theme) */
	--color-text: var(--color-base-900);
	--color-text-secondary: var(--color-base-600);
	--color-text-muted: var(--color-base-500);
	--color-bg: #ffffff;
	--color-bg-secondary: var(--color-base-50);
	--color-border: var(--color-base-200);

	/* Shadows */
	--shadow-glow: 0 0 40px color-mix(in srgb, var(--color-primary) 20%, transparent);
	--shadow-card:
		0 0 0 1px color-mix(in srgb, black 5%, transparent),
		0 1px 3px color-mix(in srgb, black 10%, transparent),
		0 6px 16px color-mix(in srgb, black 8%, transparent);
	--shadow-button: 0 1px 3px color-mix(in srgb, var(--color-primary) 30%, transparent);
	--shadow-button-hover: 0 4px 12px color-mix(in srgb, var(--color-primary) 40%, transparent);
	--shadow-dropdown: 0 10px 40px color-mix(in srgb, black 15%, transparent);
}

/* ===== Dark Theme ===== */
.dark {
	--color-text: #ffffff;
	--color-text-secondary: #e2e8f0;
	--color-text-muted: #94a3b8;
	--color-bg: var(--color-base-900);
	--color-bg-secondary: var(--color-base-800);
	--color-border: var(--color-base-600);
}

/* ===== Base Styles ===== */
@layer base {
	*,
	*::before,
	*::after {
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		text-rendering: optimizeLegibility;
	}

	html {
		font-smooth: always;
	}

	body {
		font-family: var(--font-body);
		background-color: var(--color-bg);
		color: var(--color-text);
	}
}

/* ===== Keyframes ===== */
@keyframes fade-in {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes spin {
	to {
		transform: rotate(360deg);
	}
}

@keyframes dropdown-fade-in {
	from {
		opacity: 0;
		transform: translateY(-4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* ===== Utilities ===== */
@layer utilities {
	/* Dynamic width utility - use with --width custom property */
	.dynamic-width {
		width: var(--width, 0%);
	}

	/* Dynamic height utility - use with --height custom property */
	.dynamic-height {
		height: var(--height, 0px);
	}

	/* Collapsible container transition */
	.collapsible-container {
		overflow: hidden;
		transition: height 300ms cubic-bezier(0.4, 0, 0.2, 1);
	}

	/* Noise overlay utility */
	.noise-overlay {
		opacity: var(--noise-opacity, 0.05);
		background-image: var(--noise-url);
	}
}

/* ===== Components ===== */
@layer components {
	/* Form labels - keeping for backwards compatibility */
	.form-label {
		@apply block text-sm font-medium mb-1;
		color: var(--color-text);
	}

	/* Fix double border on inputs - remove browser outline, DaisyUI handles focus */
	.input,
	.textarea,
	.select {
		outline: none !important;
	}


	.form-hint {
		@apply text-xs mt-1;
		color: var(--color-text-muted);
	}

	.form-error {
		@apply text-xs mt-1;
		color: var(--color-error);
	}

	/* ===== Admin Layout ===== */
	.admin-layout {
		@apply flex min-h-screen bg-base-50;
	}

	.admin-sidebar {
		@apply flex-shrink-0 fixed inset-y-0 left-0 z-30;
	}

	.admin-main {
		@apply flex-1 flex flex-col min-h-screen;
		margin-left: 220px;
		transition: margin-left 0.2s ease;
	}

	/* Adjust for collapsed sidebar */
	.admin-sidebar:has(.sidebar.collapsed) ~ .admin-main {
		margin-left: 64px;
	}

	/* Org badge in top bar - only show when sidebar is collapsed */
	.admin-org-badge {
		@apply hidden items-center gap-2 px-2 py-1.5 rounded-lg transition-colors;
		color: var(--color-text);
	}

	.admin-org-badge:hover {
		background-color: var(--color-bg-secondary);
	}

	/* Show org badge only when sidebar is collapsed */
	.admin-sidebar:has(.sidebar.collapsed) ~ .admin-main .admin-org-badge {
		@apply flex;
	}

	/* Mobile admin layout */
	@media (max-width: 767px) {
		.admin-main {
			margin-left: 0;
			padding-top: 56px;
		}
	}

	/* ===== Data Tables ===== */
	.data-table {
		@apply rounded-lg border;
		background-color: var(--color-bg);
		border-color: var(--color-border);
	}

	.data-table thead {
		background-color: var(--color-bg-secondary);
	}

	.data-table th {
		@apply px-4 py-3 text-xs font-medium uppercase tracking-wide;
		color: var(--color-text-muted);
	}

	.data-table td {
		@apply px-4 py-4 border-t;
		border-color: var(--color-border);
	}

	.data-table tbody tr:hover {
		background-color: var(--color-bg-secondary);
	}

	.data-table-icon {
		@apply flex items-center justify-center h-10 w-10 rounded-lg;
		background-color: var(--color-bg-secondary);
		color: var(--color-text-muted);
	}

	.data-table-icon.active {
		background-color: color-mix(in srgb, var(--color-success) 15%, transparent);
		color: var(--color-success);
	}

	/* ===== Tab Navigation ===== */
	.tab-nav {
		@apply flex gap-1 border-b;
		border-color: var(--color-border);
	}

	.tab-nav-item {
		@apply flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 -mb-px transition-colors;
		border-color: transparent;
		color: var(--color-text-muted);
	}

	.tab-nav-item:hover {
		color: var(--color-text);
	}

	.tab-nav-item.active {
		border-color: var(--color-primary);
		color: var(--color-primary);
	}

	.tab-nav-count {
		@apply px-2 py-0.5 text-xs rounded-full;
		background-color: var(--color-bg-secondary);
	}

	.tab-nav-item.active .tab-nav-count {
		background-color: color-mix(in srgb, var(--color-primary) 15%, transparent);
		color: var(--color-primary);
	}

	/* ===== Sidebar ===== */
	.sidebar {
		@apply flex flex-col h-full border-r;
		width: 220px;
		background-color: var(--color-bg);
		border-color: var(--color-border);
		transition: width 0.2s ease;
	}

	.sidebar.collapsed {
		width: 64px;
	}

	.sidebar-header {
		@apply flex items-center h-16 px-4 border-b;
		border-color: var(--color-border);
	}

	.sidebar-brand {
		@apply flex items-center gap-3 font-semibold;
		color: var(--color-text);
	}

	.sidebar-brand-text {
		@apply truncate;
		max-width: 140px;
	}

	.sidebar-brand-icon {
		@apply flex items-center justify-center w-full;
	}

	.sidebar-nav {
		@apply flex flex-col gap-1 p-3;
	}

	.sidebar-nav-bottom {
		@apply border-t pt-3;
		border-color: var(--color-border);
	}

	.sidebar-link {
		@apply flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all;
		color: var(--color-text-muted);
	}

	.sidebar-link:hover {
		background-color: var(--color-bg-secondary);
		color: var(--color-text);
	}

	.sidebar-link.active {
		background-color: color-mix(in srgb, var(--color-primary) 12%, transparent);
		color: var(--color-primary);
	}

	.sidebar.collapsed .sidebar-link {
		@apply justify-center px-0;
	}

	.sidebar-icon {
		@apply h-5 w-5 flex-shrink-0;
	}

	.sidebar-label {
		@apply truncate;
	}

	.sidebar-collapse-btn {
		@apply flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-all w-full;
		color: var(--color-text-muted);
	}

	.sidebar-collapse-btn:hover {
		background-color: var(--color-bg-secondary);
		color: var(--color-text);
	}

	.sidebar.collapsed .sidebar-collapse-btn {
		@apply justify-center px-0;
	}
}

/* ===== Reduced Motion ===== */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}
